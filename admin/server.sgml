<!-- $Id$ -->
<chapter id="linux-netvaerk-server">
<title>Linux som server</title>
<indexterm><primary>Netværk</primary></indexterm>

<para>
Vi er tidligere kommet ind på en mere grundlæggende
forklaring af netværk, TCP/IP og netværksadresser, idet dette er helt
centralt for alt med netværk. 
</para>

<para>
I dette kapitel ser vi nærmere på en række server-funktionaliteter
DHCP, NFS (Unix-fildeling), NIS (adgangskode-deling) og AppleTalk
(Mac-server). Desuden er der afsnit om hvordan man får en X-server og
klient til at virke. Endelig behandles også hvordan du kan få adgang
til din Linux-maskine via modem (eng. dial-in modem).
</para>

<sect1 id="dhcp">
<!-- Skrevet af Henrik Størner "henrik@storner.dk" -->
<!-- Afsnittet om dynamisk dns og dhcp er skrevet af Michael Rasmussen "mir@miras.org" -->
<title>Opsætning af DHCP-server</title>
<indexterm><primary>DHCP</primary></indexterm>
<para>
Hvis man har mere end et par computere på sit netværk, eller hvis man
ofte flytter computerne mellem forskellige netværk, så bliver det 
hurtigt besværligt at skulle konfigurere deres IP-adresser,
standard-gatewayadresse og navneserver hver gang man flytter dem rundt.
</para>

<para>
Løsningen på det problem er at bruge DHCP - "Dynamic Host
Configuration Protocol". Som navnet antyder, så er det en speciel
protokol som er beregnet til at en computer kan blive konfigureret
automatisk, uden at man skal ind og pille i opsætningen på hver enkelt
maskine.
</para>

<para>
Bemærk, at du ikke bør have mere end én
DHCP-server på samme netværk. Hvis der er flere, så vil du opleve
at det kun virker en gang imellem - nemlig når klienten får svaret fra den
server, der er konfigureret rigtigt.
</para>

<sect2 id="dhcp-virkemaade">
<title>Hvordan virker DHCP?</title>
<para>
Når man tænder en computer der bruger DHCP, så vil den sende en
forespørgsel ud på sit lokale netværk for at spørge efter en
DHCP-server. Hvis der er en DHCP-server på nettet, så tager serveren en
ubrugt IP-adresse fra den pulje af adresser, den er konfigureret til
at bruge, og sender et svar tilbage om at den nye computer kan bruge
den pågældende IP-adresse. Sammen med IP-adressen sendes også andre
oplysninger som er nødvendige for at netværket kan fungere - som regel
er det netmasken, IP-adressen for default gateway og navneservernes 
IP-adresser som fås fra DHCP-serveren.
</para>

<para>
Den IP-adresse som den nye computer får tildelt, må den bruge i et
begrænset tidsrum - den får det der kaldes et "lease" på adressen, som
skal fornyes med jævne mellemrum. Hvis ikke computeren beder om at
forny sit lease, så inddrager DHCP-serveren det igen, og kan dele det
ud til andre maskiner der har brug for en IP-adresse.
</para>

<para>
Når man bruger DHCP, kan man derfor ikke være sikker på, at ens
computere altid har en fast IP-adresse - det afhænger af, hvor længe
ad gangen de er tændt. Så længe de er på nettet, bliver de ved med
at have den IP-adresse de har fået fra serveren. Men hvis de bliver
lukket ned eller taget af nettet så længe at deres lease udløber, så
vil de sandsynligvis få en ny IP-adresse næste gang de kontakter
serveren.
</para>

<para>
Derfor er DHCP mest anvendelig på de systemer, som ikke kører nogen
form for server-funktion - dvs. almindelige arbejdsstationer. 
</para>

<para>
Det er dog muligt at konfigurere sin DHCP-server på en måde, så visse
IP-adresser bliver reserveret til bestemte maskiner, og derved kan man
sikre at den pågældende maskine altid har en bestemt IP-adresse. 
Derfor kan man godt bruge DHCP til servere, f.eks. hvis man
vil styre netværks-konfigurationen centralt.
</para>
</sect2>

<sect2 id="dhcp-een-server">
<title>Kun én DHCP-server pr. netværk!</title>
<para>
Der følger naturligvis en DHCP-server med din Linux-distribution - det
er en server som er udviklet af ISC (Internet Software Consortium);
det er også dem, der udvikler navneserveren BIND. I næste afsnit kan du
se, hvordan man sætter den op.
</para>

<para>
Hvis du har en eller anden form for router på dit netværk, så kan det
imidlertid være at du allerede har en DHCP-server på nettet. Selv små
ISDN- eller ADSL-routere har ofte indbygget en DHCP-server, og den kan
man sagtens bruge.
</para>

<para>
Uanset om du vælger at køre en DHCP-server på din Linux-maskine, eller
du vælger at bruge den der er indbygget i din router, så skal du passe
på at der kun er <emphasis>én</emphasis> DHCP-server på dit
netværk. Hvis der er flere, så vil du opleve at det kun virker en gang
imellem - nemlig når klienten får svaret fra den server, der er
konfigureret rigtigt.
</para>
</sect2>

<sect2 id="dhcp-isc">
<title>ISC DHCP-server</title>
<indexterm><primary>DHCP</primary><secondary>ISC</secondary></indexterm>
<para>
ISC's DHCP-server bruger én konfigurationsfil. Normalt ligger den i
<filename>/etc/dhcpd.conf</filename>. Derudover bruger den
en midlertidig fil til at holde styr på hvilke IP-adresser den har
uddelt til de forskellige maskiner på nettet; den ligger normalt i
<filename>/etc/dhcpd.leases</filename>, og den administrerer selv serveren.
Du skal blot sørge for at filen eksisterer inden du starter
serveren - f.eks. ved at give kommandoen <command>touch
/etc/dhcpd.leases</command> (for Red Hat 7.0 <command>touch
/var/lib/dhcp/dhcpd.leases</command>) inden du starter serveren første gang.
Installér dernæst følgende RPM-pakke for at få DHCP-serveren ind på Red Hat:
</para>

<screen>
<prompt>[root@linus /root]#</prompt> <userinput>rpm -ivh dhcp-*.rpm</userinput>
</screen>


<para>
For at konfigurere DHCP-serveren skal du bestemme dig for, hvilke
oplysninger den skal uddele til de computere, der spørger den om en 
IP-adresse. Dvs. du skal vælge:
</para>

<ITEMIZEDLIST MARK="bullet" SPACING="compact">
<LISTITEM><para>Hvor længe skal de have lov til at bruge den tildelte adresse?</para></listitem>
<LISTITEM><para>Hvilket IP-adresseområde skal der tages adresser fra?</para></listitem>
<LISTITEM><para>Hvilken netmaske har dit netværk?</para></listitem>
<LISTITEM><para>Hvad er default gateway for nettet?</para></listitem>
<LISTITEM><para>Hvilken IP-adresse bruges til navneserver?</para></listitem>
</itemizedlist>


<para>
Derudover er der en frygtelig masse oplysninger, som man kan levere
via DHCP. Det er f.eks. domæne-navnet for maskinerne på dit netværk,
navn på post-server, time-server, WINS-server etc. Det er dog langtfra
alle disse oplysninger, som rent faktisk bruges til noget af de
maskiner som kontakter DHCP-serveren, så derfor er det ikke altid at
man får noget ud af at konfigurere dem på DHCP-serveren. Du kan se
hvilke muligheder der er i "dhcp-options" man-siden.
</para>

<sect3 id="dhcpd-conf">
<title>dhcpd.conf filen</title>
<indexterm><primary>DHCP</primary><secondary>dhcpd.conf</secondary></indexterm>
<para>
I netværket der bruges som eksempel, har man valgt at bruge følgende
værdier til DHCP:
</para>

<ITEMIZEDLIST MARK="bullet" SPACING="compact">
<LISTITEM><para>Et lease skal være fornyet efter 10 timer, og er
max. gyldigt i 24 timer.</para></listitem>
<LISTITEM><para>IP-adresser tildeles fra puljen 192.168.0.100 - 192.168.0.250</para></listitem>
<LISTITEM><para>Netmasken er 255.255.255.0</para></listitem>
<LISTITEM><para>Default gateway er 192.168.0.1</para></listitem>
<LISTITEM><para>Navneserveren er 192.168.0.1</para></listitem>
<LISTITEM><para>Domæne-navnet er "intranet"</para></listitem>
</itemizedlist>

<para>
Konfigurationsfilen <filename>/etc/dhcpd.conf</filename> skal så se således ud:
</para>

<programlisting>
subnet 192.168.0.0 netmask 255.255.255.0 {
        range 192.168.0.100 192.168.0.250;
        option subnet-mask 255.255.255.0;

        # default gateway
        option routers 192.168.0.1;

        option domain-name "intranet";
        option domain-name-servers 192.168.0.1;

        default-lease-time 36000;
        max-lease-time 86400;
}
</programlisting>

<para>
"range" fortæller så, hvilke IP-adresser serveren kan tildele klienter
på dette netværk - det er her, vi skriver at adresserne skal være i
intervallet 192.168.0.100 til 192.168.0.250.
</para>

<para>
"option subnet-mask" definerer netmasken.
</para>

<para>
"option routers" definerer standard-gateway.
</para>

<para>
"option domain-name" og "option domain-name-servers" definerer
DNS-domæne-navnet og navneserveren.  DHCP-serveren laver så et opslag
inden den tildeler IP-adressen til klienten. En smart ting hvis
navneserveren skulle skifte IP-adresse.  Hvis du ikke selv har en
navneserver på dit netværk, så kan du sagtens skrive IP-adressen på
din internetudbyders navneserver her.
</para>


<programlisting>
option domain-name-servers 192.168.0.1, 192.168.0.2;
</programlisting>

<para>
eller
</para>

<programlisting>
option domain-name-servers ns1.intranet.foo, ns2.intranet.foo;
</programlisting>

<para>
"default-lease-time" er det antal sekunder, et lease er
gyldigt. Herefter skal klienten forny sit lease hos DHCP-serveren.
</para>

<para>
"max-lease-time" er det antal sekunder en IP-adresse må bruges. Når
den tid er gået <emphasis>skal</emphasis> klienten holde op med at
bruge IP-adressen.
</para>

<para>
Forskellen på "default-lease-time" og "max-lease-time".  Funktionen af
de to tider er defineret i RFC 2131, afsnit 4.4.5 "Reacquisition and
expiration". Kort fortalt går det ud på, at når default-lease-time
("T1" i RFC'en) udløber, skal klienten begynde at forsøge at forny sit
lease på IP-adressen ved at kontakte den DHCP-server, den oprindelig
fik adressen fra. Det kan klienten så blive ved med at forsøge indtil
den får svar, eller indtil "max-lease-time" ("T2" i RFC'en)
udløber. Hvis T2 udløber <emphasis>skal</emphasis> klienten stoppe med
at benytte IP-adressen, og i stedet begynde at broadcaste efter en ny
DHCP-server.
</para>

<para>
Tiden mellem default-lease-time og max-lease-time er altså den frist,
som en klient har til at forny sit lease på en IP-adresse. Da servere
kan være nede, er det nødvendigt at der er lidt tid til at klare sådan
en ekspeditionssag - helst så længe, at klienterne ikke begynder at
falde af nettet pga. et enkelt nedbrud af DHCP-serveren.
</para>


<para>
Hvordan vælger man en fornuftig lease-time? Det der giver mindst
belastning af DHCP-serveren er, hvis arbejdsstationerne ikke behøver at
forny deres lease hele tiden - en gang om dagen er rimeligt, og derfor
er default-lease-time sat til lidt længere end en normal arbejdsdag
(10 timer) og max-tiden til 24 timer (86400 sekunder). Omvendt vil man
måske godt have, at klienterne hurtigt opdager hvis man skifter
DNS-server - for at det skal ske hurtigt, skal default-lease-time
sættes ned, så klienterne får friske oplysninger fra serveren noget
oftere. Det er en afvejning, man må gøre.
</para>

<para>
DHCP-serveren kan håndtere flere "subnet" - f.eks. hvis
serveren også fungerer som router, så der er flere
netkort installeret i maskinen. Så kan man konfigurere
én DHCP-server, som deler adresser ud til de forskellige
netværk. Almindeligvis har man dog kun ét netværk, der
får adresser fra sin DHCP-server - men derfor skal der
være en "subnet"-erklæring, der fortæller hvad det er
for et fysisk netværk denne DHCP-pulje handler om. Har
man f.eks. to netkort hvor man kun ønsker at DHCP-serveren skal tildele
IP-adresser i det ene net - skal man alligevel
definere DHCP-serveren for begge net, men vise at
DHCP-serveren ikke skal tildele IP-adresser i det andet
net, f.eks. for et klasse C-netværk 192.168.36.X. I det
tilfælde kan følgende tilføjes til <filename>/etc/dhcpd.conf</filename>.
</para>

<programlisting>
        subnet 192.168.36.0 netmask 255.255.255.0 {
                 not authoritative;
        }
</programlisting>


</sect3>

<sect3 id="dhcp-start">
<title>Start DHCP-serveren</title>
<para>
Efter at have redigeret <filename>/etc/dhcpd.conf</filename>
færdig er du klar til at starte DHCP-serveren. Kører du Red Hat, er
det nemt. Du skal installere dhcp-pakken og køre
</para>

<indexterm>
 <primary>/sbin/chkconfig, undersøger og indsætter nye funktioner i et runlevel</primary>
</indexterm>
<indexterm>
 <primary>chkconfig</primary>
</indexterm>
<indexterm>
 <primary>Kommandooversigt</primary>
 <secondary>/sbin/chkconfig, undersøger og indsætter nye funktioner i et runlevel </secondary>
</indexterm>
 
<screen>
<prompt>[root@linus /root]#</prompt> <userinput>/sbin/chkconfig --level 2345 dhcpd on</userinput>
</screen>

<para>
Så starter DHCP-serveren automatisk når maskinen starter op. Det virker
dog først efter en genstart, så hvis du vil have serveren i gang med det
samme, så kører du
</para>

<screen>
<prompt>[root@linus /root]#</prompt> <userinput>/etc/rc.d/init.d/dhcpd start</userinput>
</screen>

<para>
Du kan nu prøve at konfigurere enten en Linux-maskine eller en
Windows-maskine til at bruge DHCP, og så se om den får oplysningerne
fra serveren. Hvis det er en Windows-maskine du bruger til at teste
med, så kan du bruge <command>winipcfg</command>-programmet (Win95 og
Win98) eller <command>ipconfig /all</command> (Windows NT) til at se,
hvordan maskinen er blevet konfigureret af en DHCP-server.
</para>

<para>
Når serveren kører, logger den forespørgsler til en log-fil,
almindeligvis <filename>/var/log/messages</filename>. Det kan se således ud:
</para>

<programlisting>
dhcpd: DHCPDISCOVER from 00:00:b4:c7:1e:e6 via eth0
dhcpd: DHCPOFFER on 192.168.0.101 to 00:00:b4:c7:1e:e6 via eth0
dhcpd: DHCPREQUEST for 192.168.0.101 from 00:00:b4:c7:1e:e6 via eth0
dhcpd: DHCPACK on 192.168.0.101 to 00:00:b4:c7:1e:e6 via eth0 
</programlisting>

<para>
Først er det klienten, som leder efter en DHCP-server. Så tilbyder
DHCP-serveren at klienten kan bruge adressen "192.168.0.101". Den
beder klienten så om, og serveren svarer tilbage at det er OK.
</para>

<para>
De underlige adresser der står i hver linje, er Ethernet-adressen på
det netkort, som spørger DHCP-serveren. Dem kan man bruge til at give
servere en fast IP-adresse, selv om de får oplysningerne via DHCP.
</para>
</sect3>

<sect3 id="dhcp-en-statisk">
<title>Konfigurér en server med DHCP</title>
<para>
Hvis man vil have at en bestemt maskine altid skal få den samme 
IP-adresse fra DHCP-serveren, så kan man give den en statisk tildeling i
DHCP-server-konfigurationen. Her bruger man den Ethernet-adresse, som
maskinens netkort har - hvis maskinen tidligere har fået en IP-adresse
fra DHCP-serveren, så kan man se Ethernet-adressen i log-filen. Man
kan også se den med <command>/sbin/ifconfig</command>-kommandoen hvis
det er en Linux-maskine:
</para>
<indexterm>
 <primary>/sbin/ifconfig eth0, undersøger IP-adresse m.v. for /dev/eth0</primary>
</indexterm>
<indexterm>
 <primary>ifconfig</primary>
</indexterm>
<indexterm>
 <primary>Kommandooversigt</primary>
 <secondary>/sbin/ifconfig eth0, undersøger IP-adresse m.v. for /dev/eth0</secondary>
</indexterm>
<screen>
<prompt>[root@eric]$</prompt> <userinput>/sbin/ifconfig eth0</userinput>
          Link encap:Ethernet  HWaddr 00:00:B4:C7:1E:E6  
          inet addr:192.168.0.104  Bcast:192.168.0.255  Mask:255.255.255.0
          UP BROADCAST RUNNING  MTU:1500  Metric:1
          RX packets:55 errors:0 dropped:0 overruns:0 frame:0
          TX packets:94 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:100
          Interrupt:10 Base address:0x6100
</screen>

<para>
"HWaddr" er Ethernet-adressen. Hvis nu vi vil have at denne maskine
altid får IP-adressen "192.168.0.4" selv om den får sin IP-adresse fra
DHCP-serveren, så tilføjer vi nogle linjer til
<filename>/etc/dhcpd.conf</filename>, inden i den "subnet"-blok som vi
lavede før - så kommer den til at se således ud:
</para>

<programlisting>
subnet 192.168.0.0 netmask 255.255.255.0 {
        range 192.168.0.100 192.168.0.250;
        option subnet-mask 255.255.255.0;

        # default gateway
        option routers 192.168.0.1;

        option domain-name "intranet";
        option domain-name-servers 192.168.0.1;

        default-lease-time 36000;
        max-lease-time 86400;

        host eric {
                hardware ethernet 00:00:B4:C7:1E:E6;
                fixed-address 192.168.0.4;
        }
}
</programlisting>

<para>
"host eric" indleder en særlig specifikation af hvordan en enkelt vært
skal konfigureres. For at DHCP-serveren kan kende værten bruger vi
Ethernet-adressen - den tager vi fra
<command>ifconfig</command>-beskeden. For at tildele denne host en
fast adresse bruges "fixed-address 192.168.0.4", og den adresse vil
den pågældende vært så altid få.
</para>

<para>
Bemærk, at man godt kan tildele faste IP-adresser, der ligger uden for
det område af IP-adresser, der står i "range"-specifikationen.
</para>

<para>
Fordelen ved også at konfigurere servere med IP-adresser fra en 
DHCP-server er, at hvis nogle af de andre oplysninger ændrer sig -
f.eks. navneserveren eller standard-gateway - så skal man kun ændre det
ét sted, nemlig på DHCP-serveren. Alle andre servere og
arbejdsstationer får oplysningerne fra den.
</para>

<para>
Der er dog en enkelt undtagelse - DHCP-serveren kan ikke spørge sig
selv om, hvilken IP-adresse den skal have. Den er man nødt til at
konfigurere manuelt med en statisk IP-adresse, standard-gateway osv.
</para>

</sect3>
</sect2>

<sect2 id="dhcp-dns">
<title>DHCP og DNS</title>
<indexterm><primary>DHCP</primary><secondary>DNS</secondary></indexterm>

<INDEXTERM><PRIMARY>dynamisk DNS</PRIMARY></INDEXTERM>
<INDEXTERM>
  <PRIMARY>DNS</PRIMARY>
  <secondary>dynamisk</secondary>
</INDEXTERM>

<para>
Dette afsnit beskriver DHCP 3.0 fra <ulink
url="http://www.isc.org">ISC</ulink>. Tidligere versioner i 2.X-serien har ikke haft samme
funktionalitet.</para>

<para>
Installationen er ret nem, enten henter du en 
<ulink url="ftp://angus.ind.wpi.edu/pub/packages/isc/dhcp">rpm</ulink>- 
eller en <ulink url="ftp://ftp.isc.org/isc/dhcp/dhcp-latest.tar.gz">tarpakke</ulink> 
med kildekoden. Hvad angår Debian, findes der, mig bekendt, kun den 
mulighed at hente sourcen og så oversætte den selv.
</para>

<para>
Når du har installeret DHCP 3.0, forestår der kun minimale ændringer. 
Du skal ændre i to filer: named.conf og dhcpd.conf. 
Eksempler kan hentes her 
<ulink url="http://www.sslug.dk/linuxbog/admin/eksempler">http://www.sslug.dk/linuxbog/admin/eksempler</ulink>.
</para>

<para>
I named.conf skal der tilføjes en option til de zoner hvor vores 
DHCP-server uddeler ip-numre til. Tilføjelsen giver named ret til 
at foretage opdateringer i vores zonefiler, og tilladelsen gives 
med følgende kommando: allow-update {localhost;}. Se eksempel nedenfor.
</para>

<programlisting>
options {
	directory "/var/named";
	notify no;
	forwarders{
		XXX.XXX.XXX.XXX;
		XXX.XXX.XXX.XXX;
	};
};

logging {
	category lame-servers { null; };
};

zone "." in {
	type hint;
	file "named.ca";
};

zone "0.0.127.IN-ADDR.ARPA" in {
	type master;
	file "127.0.0";
};

zone "domænenavn" in {
	type master;
	file "filnavn";
	allow-update {localhost;};
};

zone "XXX.YYY.ZZZ.IN-ADDR.ARPA" in {
	type master;
	file "filnavn";
	allow-update {localhost;};
};
</programlisting>

<para>
I dhcpd.conf skal der tilføjes en række options, der vedrører dynamisk dns. 
Disse options starter alle med ddns, og de væsentligste er følgende:
</para>

<ITEMIZEDLIST MARK="bullet" SPACING="compact">
<LISTITEM><para>ddns-domainname "domænenavn"</para></listitem>
<LISTITEM><para>ddns-rev-domainname "IN-ADDR.ARPA"</para></listitem>
<LISTITEM><para>ddns-update-style interim</para></listitem>
<LISTITEM>
<programlisting>
zone domænenavn. {
	primary DNS-serverens ip-adresse;
}
</programlisting>
</listitem>
<LISTITEM>
<programlisting>
zone reverse ip-adresse.IN-ADDR.ARPA. {
	primary DNS-serverens ip-adresse;
}
</programlisting>
</listitem>
</itemizedlist>

<para>
Et eksempel følger nedenfor.
</para>

<programlisting>
	option domain-name "domænenavn";
	ddns-update-style interim;

subnet	WWW.XXX.YYY.ZZZ. netmask 255.255.255.0 {
	range WWW.XXX.YYY.100 WWW.XXX.YYY.150;
	ddns-domainname "domænenavn";
	ddns-rev-domainname "IN-ADDR.ARPA";
#	log-facility local7;

	# default gateway
	option routers WWW.XXX.ZZZ.YYY;
	option domain-name-servers WWW.XXX.ZZZ.YYY;
	option interface-mtu 1500;
	option broadcast-address WWW.XXX.ZZZ.255;

	option netbios-name-servers WWW.XXX.ZZZ.YYY;
	option netbios-dd-server WWW.XXX.ZZZ.YYY;
	option netbios-node-type 8;

	default-lease-time 36000;
	max-lease-time 86400;
}

host prtsrv {
		hardware ethernet 00:40:8C:30:6F:CE;
		fixed-address prtsrv.domænenavn;
}

zone domænenavn. {
  primary WWW.XXX.ZZZ.YYY;
}

zone ZZZ.XXX.WWWW.in-addr.arpa. {
  primary WWW.XXX.ZZZ.YYY;
}
</programlisting>

<para>
Hvis du bruger Redhat 7.2, mangler der en sidste rettelse. 
Rettelsen skal foretages i filen <filename>/etc/sysconfig/network</filename>, 
hvor du skal tilføje følgende:
</para>

<ITEMIZEDLIST MARK="bullet" SPACING="compact">
<LISTITEM><para>DHCP_HOSTNAME="hostnavnet på klienten"</para></listitem>
</itemizedlist>

<para>
Det skal bemærkes, at ovenstående hostnavn er uden angivelse af domænet. 
Hvis vi f.eks. har domænet intranet, og ønsker at tildele klienten eric en 
adresse, skal hostnavnet angives som eric og ikke som eric.intranet.
</para>

</sect2>

</sect1>


<sect1 ID="ftpd">
<TITLE>FTP-server</TITLE>
<INDEXTERM><PRIMARY>ftp</PRIMARY><SECONDARY>server</SECONDARY></INDEXTERM>
<INDEXTERM><PRIMARY>wu-ftpd</PRIMARY></INDEXTERM>

<para>
De fleste Linux-distributioner installerer automatisk en 
ftp-server, hvis man har valgt en server-installation.
Har du valgt en skrabet installation til en gammel maskine,
er det nemt senere at få ftp-serveren installeret efterfølgende.
</para>

<para>
<FILENAME>wu-ftpd</FILENAME> er en ftp-server der følger
med næsten alle distributioner.
Et bedre alternativ til wu-ftpd er <FILENAME>proftpd</FILENAME>
<ulink url="http://www.proftpd.net/">http://www.proftpd.net/</ulink>,
som også følger med mange distributioner.
Med wu-ftpd installeret er det muligt
for alle brugere af systemet at få adgang til deres filer
med ftp.
Installationen er nem.
</para>

<indexterm>
 <primary>rpm</primary>
</indexterm>
<indexterm>
 <primary>Kommandooversigt</primary>
 <secondary>rpm</secondary>
</indexterm>

<screen>
<prompt>[root@linus RPMS]# </prompt><userinput>rpm -ivh wu-ftpd*.i386.rpm</userinput>
</screen>

<para>
Ftp-serveren er nu startet og klar til brug.
Af sikkerhedsmæssige årsager kan <COMMAND>root</COMMAND> ikke logge
ind på ftp-serveren.
Dette skyldes at <COMMAND>root</COMMAND> er nævnt i filen
<FILENAME>/etc/ftpusers</FILENAME>. Du kan have dine grunde til at give
root lov til at logge ind, men tænk dig om.
</para>

<para>
Som før nævnt er det kun brugere af systemet, der kan logge ind.
Skal ftp-serveren være åben for alle, f.eks. til brug for at installere
Linux på en anden maskine over nettet, så skal der lige en pakke mere
ind.
</para>

<screen>
<prompt>[root@linus RPMS]# </prompt><userinput>rpm -ivh anonftp*.i386.rpm</userinput>
</screen>

<para>
For at du kan starte din ftp-server op, skal du 
redigere filen <filename>/etc/xinetd.d/wu-ftpd</filename> (Red Hat 7).
Ret <literal>disable = yes</literal> til 
<literal>disable = no</literal> og kør 
<command>/etc/init.d/xinetd restart</command>. Grunden til dette er sikkerhedsgrunde, så ftp-serveren vil <emphasis>ikke</emphasis> automatisk 
blive startet op. 
</para>

<para>
Nu er maskinen åben for at alle kan hente filer fra din maskine, hvor
brugerne logger ind som <COMMAND>anonymous</COMMAND> (eller
<COMMAND>ftp</COMMAND>) og giver sin egen e-post-adresse som
adgangskode.  Skal du lægge filer, så brugerne kan hente dem ned, 
skal de lægges i <FILENAME>/var/ftp/pub/</FILENAME> 
eller et af dets underkataloger. Du kan evt. linke til 
andre dele af filsystemet, hvis du f.eks. vil give 
almindelige brugere lov til at lægge filer ud til 
nedhentning.
</para>


<para>
Det skal nævnes, at der har været en hel del sikkerhedsproblemer i
wu-ftpd, derfor bør du checke hvad der er nyeste udgave før du
installerer på et usikkert netværk, såsom internettet.
</para>

<!--

<para>
Skal brugerne have lov til at lægge filer op, gøres dette normalt
til <FILENAME>/home/ftp/incoming/</FILENAME>.
Her er det vigtigt at sætte ftp op så man kun kan lægge filer op
og ikke hente fra det pågældende katalog. Gør man ikke det, 
risikerer man at ens server bliver
misbrugt til at rundsende pirat-programmer.
Opsætningen af <FILENAME>/incoming/</FILENAME> gøres ved at ......
</para>

-->

</sect1> <!-- ftp-server -->


<sect1 id="nfs">
<title>NFS - Deling af filer mellem Unix-maskiner</title>
<indexterm><primary>NFS</primary></indexterm>
<indexterm><primary>Unix-fildeling</primary></indexterm>
<indexterm><primary>Linux-fildeling</primary></indexterm>
<indexterm><primary>Fildeling</primary><secondary>Linux</secondary></indexterm>
<para>
I Unix-verdenen og dermed også Linux har man i mange år kunnet dele
filer mellem forskellige maskiner i et netværk. Den mest udbredte
protokol til dette er NFS (netværksfilsystem - eng. Networked File
System).  Det er selvfølgelig et område, man skal være forsigtig med,
hvis man har et alt for åbent netværk.  Her skal vi kun give et
simpelt eksempel på, hvordan NFS virker.
</para>

<para>
Du skal først installere RPM-pakken <filename>nfs-utils</filename> (eller 
tilsvarende Debian-pakke) som indeholder nye udgaver af 
nfs-programmer og dæmonerne.
</para>

<para>
nfs (dvs. dæmonerne <filename>rpc.rquotad</filename>,
<filename>rpc.mountd</filename> og <filename>rpc.nfsd</filename>) og
nfslock (dvs. dæmonerne <filename>rpc.lockd</filename> og
<filename>rpc.statd</filename>) skal startes når maskinen genstarter:
</para>

<indexterm>
 <primary>chkconfig</primary>
</indexterm>
<indexterm>
 <primary>Kommandooversigt</primary>
 <secondary>chkconfig </secondary>
</indexterm>

<screen>
<prompt>[root@linus /root]#</prompt> <userinput>/sbin/chkconfig nfs on</userinput>
<prompt>[root@linus /root]#</prompt> <userinput>/sbin/chkconfig nfslock on</userinput>
<prompt>[root@linus /root]#</prompt> <userinput>/sbin/chkconfig --list | grep nfs</userinput>
nfs 0:off 1:off 2:off 3:on 4:on 5:on 6:off
nfslock 0:off 1:off 2:off 3:on 4:on 5:on 6:off
</screen>

<para>
Herefter er maskinen klar som fornuftig NFS-server.
</para>


<para>
Lad os antage at maskinen
alfa skal dele <filename>/home</filename> med maskinen beta, så skal
alfa-maskinen have installeret RPM-pakken <filename>knfsd</filename>. I
<filename>/etc/exports</filename> skriver du først hvilken del af
filtræet der skal deles, derefter hvilke klienter der skal bruge det
(du kan anvende * for alle), og sidst om der deles med læse/skrive-
(rw) eller kun læse-rettigheder (ro). Brug <command>man
exports</command> for flere detaljer.
</para>

<programlisting>
# /etc/exports - NFS export of /home til beta
# Tilsvarende gives kun læseadgang til /mnt/cdrom til alle maskiner
/home beta.domænenavn.dk(rw)
/mnt/cdrom *(ro)
</programlisting>

<para>
Derefter skal du genstarte nfs-serveren ved at skrive
<command>/etc/rc.d/init.d/nfs restart</command>, og som root på
beta-maskinen kan du nu nemt få data fra alfa-maskinen.
</para>

<indexterm>
 <primary>mount -t nfs</primary><secondary>mount af disk på nfs-server</secondary>
</indexterm>
<indexterm>
 <primary>Kommandooversigt</primary>
 <secondary>mount -t nfs</secondary>
</indexterm>

<screen>
<prompt>[root@beta /root]#</prompt> <userinput>mount -t nfs alfa:/home /home</userinput>
</screen>

<indexterm><primary>showmount</primary></indexterm>
<indexterm><primary>NFS</primary><secondary>se hvad der er eksporteret?</secondary></indexterm>
<para>
<emphasis>Tip:</emphasis> Vil du vide hvad der kan monteres fra en NFS-server, så kan du anvende <command>/usr/sbin/showmount -a NFSSERVER</command>, hvor "NFSSERVER" er navn eller IP-adresse på NFS-serveren.
</para>

</sect1>

<sect1 id="nis">
<title>NIS - deling af passwd-filer mellem Unix-maskiner</title>
<para>
Er der flere maskiner i lokalnettet, og har brugerne brug for adgang til
dem alle (eller nogle af dem), er NIS en god løsning.
</para>

<para>
NIS, The Network Information System, sørger for at flere maskiner kan dele
oplysninger om brugere, grupper og endda også maskiner og en del andre
oplysninger.
</para>

<indexterm>
 <primary>yp</primary><secondary>forklaring på navn</secondary>
</indexterm>

<para>
NIS blev tidligere kaldt "Yellow Pages", forkortet "yp", efter
telefonbøgernes gule sider, men det måtte ændres, da Yellow Pages er et
registreret varemærke ejet af British Telecom.
Men de fleste programmer i NIS starter stadig med yp.
</para>

<para>
NIS arbejder, ligesom DNS, med et domænenavn. Men disse to domænenavne har
intet med hinanden at gøre. 
I det følgende har vi to Red Hat-maskiner i (DNS-)domænet
strangeparty.dk. De skal dele informationer om kodeord mv. i (NIS-)domænet
spo.
</para>

<para>
Serveren hedder "supernaut". Klienten hedder "omnitec".
</para>

<para>
På serveren skal pakken "ypserv" installeres:
</para>

<screen>
<prompt>[root@supernaut /home/kwv]# </prompt> <userinput>rpm -Uvh /cdrom/RPMS/ypserv-1.3.9-1.alpha.rpm </userinput>
ypserv                 ##################################################
</screen>

<para>
NIS-domænet skal være "spo". Det sættes med kommandoen <command>domainname</command>.
</para>

<indexterm>
 <primary>domainname</primary>
</indexterm>
<indexterm>
 <primary>Kommandooversigt</primary>
 <secondary>domainname </secondary>
</indexterm>

<screen>
<prompt>[root@supernaut /home/kwv]#</prompt> <userinput>domainname spo</userinput>
</screen>

<para>
Yp-serveren skal nu startes:
</para>

<indexterm>
 <primary>/etc/rc.d/init.d/ypserv start, start af NIS-server</primary>
</indexterm>
<indexterm>
 <primary>NIS, The Network Information System</primary>
 <secondary>/etc/rc.d/init.d/ypserv start, start af NIS-server </secondary>
</indexterm>

<screen>
<prompt>[root@supernaut /home/kwv]# </prompt> <userinput>/etc/rc.d/init.d/ypserv start</userinput>
Starting YP server services:                               [  OK  ]
</screen>

<para>
Det kan betale sig at gennemse, og måske tilrette, filen
<filename>/var/yp/Makefile</filename>.  Du bør nok ændre MINUID og
MINGID, så disse starter UID (bruger-ID) og GID (grupper-ID) ved 300, 
og ikke ved 500 som er
standard i Red Hat. Du kan også  udkommentere linjen "GSHADOW =
$(YPPWDDIR)/gshadow" og indsætte "MERGE_GROUP=false".
</para>

<para>
Herefter initieres NIS-serveren:
</para>

<indexterm>
 <primary>/usr/lib/yp/ypinit -m</primary>
</indexterm>
<indexterm>
 <primary>NIS, The Network Information System</primary>
 <secondary>/usr/lib/yp/ypinit -m </secondary>
</indexterm>

<screen>
<prompt>[root@supernaut /home/kwv]#</prompt> <userinput>/usr/lib/yp/ypinit -m</userinput>

At this point, we have to construct a list of the hosts which will run NIS
servers.  supernaut.strangeparty.dk is in the list of NIS server
hosts.  Please continue to add
the names for the other hosts, one per line.  When you are done with the
list, type a &lt;control D&gt;.
	next host to add:  supernaut.strangeparty.dk
	next host to add:  
The current list of NIS servers looks like this:

supernaut.strangeparty.dk

Is this correct?  [y/n: y]  
We need some  minutes to build the databases...
Building /var/yp/spo/ypservers...
Running /var/yp/Makefile...
gmake[1]: Entering directory `/var/yp/spo'
Updating passwd.byname...
Updating passwd.byuid...
Updating group.byname...
Updating group.bygid...
Updating hosts.byname...
Updating hosts.byaddr...
Updating rpc.byname...
Updating rpc.bynumber...
Updating services.byname...
Updating netid.byname...
Updating protocols.bynumber...
Updating protocols.byname...
Updating mail.aliases...
gmake[1]: Leaving directory `/var/yp/spo'
[root@supernaut /home/kwv]# 
</screen>

<para>
Med ypbind installeret på serveren, kan man nu kontrollere de
services der stilles til rådighed.
Ypbind skal startes først:
</para>

<indexterm>
 <primary>/etc/rc.d/init.d/ypbind start</primary>
</indexterm>
<indexterm>
 <primary>NIS, The Network Information System</primary>
 <secondary>/etc/rc.d/init.d/ypbind start </secondary>
</indexterm>

<screen>
<prompt>[root@supernaut /home/kwv]#</prompt> <userinput>/etc/rc.d/init.d/ypbind start</userinput>

Binding to the NIS domain...                               [  OK  ]
Listening for an NIS domain server: supernaut.strangeparty.dk
</screen>

<para>
Kommandoen <command>ypcat -x</command> viser de tjenester serveren
stiller til rådighed: 
</para>

<indexterm>
 <primary>ypcat</primary>
</indexterm>
<indexterm>
 <primary>NIS, The Network Information System</primary>
 <secondary>ypcat </secondary>
</indexterm>

<screen>
<prompt>[root@supernaut /home/kwv]#</prompt> <userinput>ypcat -x</userinput>

Use "ethers"	for map "ethers.byname"
Use "aliases"	for map "mail.aliases"
Use "services"	for map "services.byname"
Use "protocols"	for map "protocols.bynumber"
Use "hosts"	for map "hosts.byname"
Use "networks"	for map "networks.byaddr"
Use "group"	for map "group.byname"
Use "passwd"	for map "passwd.byname"
</screen>

<para>
Det interessante i vores lille netværk er <filename>passwd</filename>
og <filename>group</filename>. Yderligere kan
<filename>aliases</filename> og <filename>mail.aliases</filename> være
smart til at styre lokal e-post.
</para>

<para>
Men hvad indeholder de så?
</para>

<screen>
<prompt>[root@supernaut /home/kwv]#</prompt> <userinput>ypcat passwd</userinput>
hanne:BmXEt39P1By2I:301:300:Hanne:/supernaut/hanne:/bin/bash
kwv:/g10xcDPwwaA2:405:400:Kristian Vilmann:/home/kwv:/bin/bash
<prompt>[root@supernaut /home/kwv]#</prompt> <userinput>ypcat group</userinput>
hjemme:x:300:
teknik:x:400:
</screen>

<para>
På klienten skal <command>ypbind</command> selvfølgelig være
installeret. Og den skal startes:
</para>

<screen>
<prompt>[root@omnitech /root]#</prompt> <userinput>rpm -q ypbind</userinput>
ypbind-3.3-24
<prompt>[root@omnitech /root]#</prompt> <userinput>domainname spo</userinput>
<prompt>[root@omnitech /root]#</prompt> <userinput>/etc/rc.d/init.d/ypbind start</userinput>
Binding to the NIS domain...                               [  OK  ]
Listening for an NIS domain server: .supernaut.strangeparty.dk
</screen>

<para>
Hvis klienten har problemer med at finde NIS-serveren, eller der er flere
NIS-domæner i netværket, kan man sætte sine præferencer i filen
<filename>/etc/yp.conf</filename>.
</para>

<para>
Lad os se om det ser rigtigt ud. <command>ypwhich</command> fortæller hvilken NIS-server
klienten er bundet til:
</para>

<indexterm>
 <primary>ypwhich</primary>
</indexterm>
<indexterm>
 <primary>NIS, The Network Information System</primary>
 <secondary>ypwhich </secondary>
</indexterm>

<screen>
<prompt>[root@omnitech /root]#</prompt> <userinput>ypwhich</userinput>
supernaut.strangeparty.dk
<prompt>[root@omnitech /root]#</prompt> <userinput>ypcat passwd</userinput>
hanne:$1$d5dYr98N$/k.0aNyvq/BMX0UlMoyGZ1:301:300:Hanne:/home/hanne:/bin/bash
kwv:$1$I1/h6uyj$Spk11r0bYTyo9r.sc7nQ..:405:400:Kristian Vilmann:/home/kwv:/bin/bash
</screen>
<para>
Det ser fint ud.
Vi lader nu en bruger prøve telnet fra serveren til klienten.
For en god ordens skyld kontrolleres at brugeren hanne ikke optræder i
filen <filename>/etc/passwd</filename>:
</para>

<indexterm>
 <primary>grep</primary>
</indexterm>
<indexterm>
 <primary>Kommandooversigt</primary>
 <secondary>grep</secondary>
</indexterm>

<screen>
<prompt>[root@omnitech /root]#</prompt> <userinput>grep hanne /etc/passwd</userinput>
</screen>

<para>
Her var der intet svar (nul linjer).
</para>

<indexterm>
 <primary>id</primary>
</indexterm>
<indexterm>
 <primary>Kommandooversigt</primary>
 <secondary>id </secondary>
</indexterm>

<indexterm>
 <primary>pwd</primary>
</indexterm>
<indexterm>
 <primary>Kommandooversigt</primary>
 <secondary>pwd </secondary>
</indexterm>

<indexterm>
 <primary>whoami</primary>
</indexterm>
<indexterm>
 <primary>Kommandooversigt</primary>
 <secondary>whoami </secondary>
</indexterm>

<indexterm>
 <primary>ls -al</primary>
</indexterm>
<indexterm>
 <primary>Kommandooversigt</primary>
 <secondary>ls -al </secondary>
</indexterm>

<indexterm>
 <primary>telnet</primary>
</indexterm>
<indexterm>
 <primary>Kommandooversigt</primary>
 <secondary>telnet </secondary>
</indexterm>

<screen>
<prompt>[hanne@supernaut ~]#</prompt> <userinput>telnet omnitec</userinput>
Trying 192.168.10.126...
Connected to omnitec.strangeparty.dk.
Escape character is '^]'.

Red Hat Linux release 6.1 (Cartman)
Kernel 2.2.12-20 on an i586
login: hanne
Password: 
Last login: Wed Mar 29 13:42:12 from supernaut.strangeparty.dk
<prompt>[hanne@omnitec ~]$</prompt> <userinput>id</userinput>
uid=301(hanne) gid=300(hjemme) groups=300(hjemme)
<prompt>[hanne@omnitec ~]$</prompt> <userinput>pwd</userinput>
/supernaut/hanne
<prompt>[hanne@omnitec ~]$</prompt> <userinput>whoami</userinput>
hanne
<prompt>[hanne@omnitec ~]$</prompt> <userinput>ls -al</userinput>
total 142
drwx------   2 hanne    hjemme       1024 Mar 29 13:13 WebDB/
-rw-r--r--   1 hanne    hjemme      34862 Mar 12 23:24 headbanging.jpg
-rw-r--r--   1 hanne    hjemme      59995 Oct 18 22:16 insoundout.gif
drwxr-xr-x   4 hanne    hjemme       1024 Mar 12 00:10 objectsystem1.0/
-rw-r--r--   1 hanne    hjemme      43971 Mar 21 19:31 sslug.httpd.conf
</screen>

<para>
Det ser rigtigt ud. Læg mærke til at Hannes hjemmekatalog er NFS-monteres
fra serveren, og at hun derfor har samme hjemmekatalog på begge maskiner. 
</para>

<para>
NIS tilbyder en række værktøjer til manipulering af
brugerinformationerne på NIS-serveren: <command>yppasswd</command>,
<command>ypchfn</command> og <command>ypchsh</command>.
</para>

<para>
De fungerer på samme måde som de tilsvarende kommandoer uden yp-præfikset.
Hanne vil gerne skifte sit kodeord:
</para>

<indexterm>
 <primary>yppasswd</primary>
</indexterm>
<indexterm>
 <primary>NIS, The Network Information System</primary>
 <secondary>yppasswd </secondary>
</indexterm>

<screen>
<prompt>[hanne@omnitec ~]$</prompt> <userinput>yppasswd</userinput>
Changing NIS account information for hanne on supernaut.strangeparty.dk.
Please enter old password: <userinput>GAMMELKODE</userinput>
Changing NIS password for hanne on supernaut.strangeparty.dk.
Please enter new password: <userinput>NYKODE</userinput>
Please retype new password: <userinput>NYKODE</userinput>

The NIS password has been changed on supernaut.strangeparty.dk.
</screen>

<para>
Lad os se om det virker:
</para>

<screen>
<prompt>[hanne@omnitec ~]$</prompt> <userinput>telnet supernaut</userinput>
Trying 192.168.10.1...
Connected to supernaut.strangeparty.dk.
Escape character is '^]'.

Red Hat Linux release 6.0 (Hedwig)
Kernel 2.2.14 on an alpha
login: <userinput>hanne</userinput>
Password: <userinput>NYKODE</userinput>
Last login: Wed Mar 29 13:02:19 from omnitec.strangeparty.dk
</screen>

<para>
Fint. Kodeordet er ændret på serveren.
Men hvad med klienten?
</para>

<screen>
<prompt>[hanne@supernaut ~]$</prompt> <userinput>telnet omnitec</userinput>
Trying 192.168.10.126...
Connected to omnitec.strangeparty.dk.
Escape character is '^]'.

Red Hat Linux release 6.1 (Cartman)
Kernel 2.2.12-20 on an i586
login: <userinput>hanne</userinput>
Password: <userinput>NYKODE</userinput>
Last login: Wed Mar 29 13:46:21 from supernaut.strangeparty.dk
</screen>

<indexterm>
 <primary>NIS, The Network Information System</primary>
 <secondary>cd /var/yp </secondary>
</indexterm>

<indexterm>
 <primary>NIS, The Network Information System</primary>
 <secondary>make </secondary>
</indexterm>

<para>
Hvis man som administrator ændrer i adgangskodefilen, opretter eller
sletter en bruger, eller ændrer andet der påvirker NIS, skal man sørge for
at NIS-databaserne er konsistente efter ændringerne:
</para>

<screen>
<prompt>[root@omnitech /root]#</prompt> <userinput>cd /var/yp</userinput>
<prompt>[root@omnitech /root]#</prompt> <userinput>make</userinput>
</screen>

<para>
Og så skal vi lige sørge for at det starter næste gang maskinerne
genstartes: På serveren skal <command>ypserv</command>,
<command>yppasswdd</command> og <command>ypbind</command> startes i
runlevel 3, 4 og 5.
</para>

<screen>
<prompt>[root@supernaut /home/kwv]#</prompt> <userinput>/sbin/chkconfig --list | grep yp</userinput>
ypbind 0:off 1:off 2:off 3:on 4:on 5:on 6:off
yppasswdd 0:off 1:off 2:off 3:on 4:on 5:on 6:off
ypserv 0:off 1:off 2:off 3:off 4:off 5:off 6:off
</screen>

<para>
ypserv starter ikke automatisk. Det får vi den til:
</para>

<screen>
<prompt>[root@supernaut /home/kwv]#</prompt> <userinput>/sbin/chkconfig ypserv on</userinput>
<prompt>[root@supernaut /home/kwv]#</prompt> <userinput>/sbin/chkconfig --list | grep yp</userinput>
ypbind 0:off 1:off 2:off 3:on 4:on 5:on 6:off
yppasswdd 0:off 1:off 2:off 3:on 4:on 5:on 6:off
ypserv 0:off 1:off 2:off 3:on 4:on 5:on 6:off
</screen>

<para>
NIS-domænet skal sættes, både på server og klient. Det gøres i
<filename>/etc/sysconfig/network</filename>:
</para>

<para>
NISDOMAIN=spo
</para>


<para>
På klienten skal ypbind også startes ved boot:
</para>

<screen>
<prompt>[root@supernaut /home/kwv]#</prompt> <userinput>/sbin/chkconfig --list ypbind</userinput>
ypbind 0:off 1:off 2:off 3:on 4:on 5:on 6:off
</screen>

<para>
NIS kan en del mere end beskrevet her. Men dette er normalt det, der er
størst behov for.
</para>

<para>
For mere information:
Linux Network Administrators Guide,
NIS-HOWTO,
Managing NFS & NIS, O'Reilly & Associates,
Manualsiderne fra ypserv- og ypbind-pakkerne. Find dem således: 
</para>

<screen>
<prompt>[hanne@supernaut ~]$</prompt> <userinput>rpm -ql `rpm -qa | grep ^yp` |grep man</userinput>
</screen>
</sect1>


<sect1 ID="appletalk">
<TITLE>AppleTalk</TITLE>
<INDEXTERM><PRIMARY>Apple</PRIMARY><SECONDARY>AppleTalk</SECONDARY></INDEXTERM>
<INDEXTERM><PRIMARY>Mac</PRIMARY><SECONDARY>AppleTalk</SECONDARY></INDEXTERM>

<para>
Linux kan ikke bare forbindes til Apple via ftp, men også via 
almindelig fildeling.
For brugerne af lokalnettet kommer Linux-serveren så til at optræde
som en Mac-server.
</para>

<para>
Det er ikke svært at anvende en Linux-maskine som filserver hvis de
andre klienter i netværket kører Microsoft Windows®, da
Samba-protokollen (som beskrevet i <xref linkend="samba">) følger med
stort set alle distributioner af Linux. Dette er ikke så lige til med
Mac-protokollen, da du selv må downloade denne.  Til at forbinde et
Mac-netværk med en Linux-maskine bruges et program/protokol der hedder
Netatalk. Dette program får på listig vis din Linux-maskine til at se
ud som en Macintosh-filserver. Programmet understøtter to typer af
AppleTalk-protokollen; nemlig Classic AppleTalk og AppleShareIP
(sidstnævnte kaldes også TCP/IP til Mac).
</para>

<para>
Programmet blev oprindeligt udviklet af University of
Michigan's Research Systems Unix Group og understøttede
oprindeligt kun Classic AppleTalk. Sidenhen er det
blevet udviklet og vedligeholdt af Adrian Sun, der
ud over at debugge programmet også har implementeret
understøttelse af AppleShareIP og andre udvidelser. 
</para>

<para>
Netatalk kan hentes fra:
<ULINK 
URL="ftp://ftp.cobaltnet.com/pub/users/asun/release/netatalk-1.4b2+asun2.1.3.tar.gz">
ftp://ftp.cobaltnet.com/pub/users/asun/release/netatalk-1.4b2+asun2.1.3.tar.gz</ULINK>
</para>

<para>
og færdigoversat fra:
<ULINK 
URL="http://thehamptons.com/anders/netaltalk/mirror/netatalk-1.4b2+asun2.1.1.x86-shadow-linux.tar.gz">
http://thehamptons.com/anders/netaltalk/mirror/netatalk-1.4b2+asun2.1.1.x86-shadow-linux.tar.gz</ULINK>
</para>

<para>
Til Debian:
<ULINK 
URL="http://cgi.debian.org/Packages/stable/net/netatalk.html">
http://cgi.debian.org/Packages/stable/net/netatalk.html</ULINK>
</para>

<para>
Til RPM-baserede systemer (SuSE, RedHat, Mandrake):
<ULINK 
URL="ftp://contrib.redhat.com/pub/contrib/libc6/SRPMS/netatalk-1.4b2+asun2.1.3-6.src.rpm">ftp://contrib.redhat.com/pub/contrib/libc6/SRPMS/netatalk-1.4b2+asun2.1.3-6.src.rpm</ULINK>
(husk at køre <command>rpm --rebuild -sti-til-source</command>  for at
oversætte og installere den)
</para>

<para>
 <indexterm>
  <primary>Udpakning af ".tar.gz" filer</primary>
 </indexterm>
 <indexterm>
  <primary>tar.gz-filer</primary>
 </indexterm>
 <indexterm>
  <primary>Kommandooversigt</primary>
  <secondary>Udpakning af ".tar.gz" filer</secondary>
 </indexterm>

 Hvis du har hentet en af <filename>.tar.gz</filename>-filerne, skal du
 gøre sådan her: 
<screen>
<prompt>[root@linus /root]#</prompt> <userinput>tar xzvf &lt;filnavn&gt;.tar.gz</userinput>
...
<prompt>[root@linus /root]#</prompt> <userinput>cd netatalk&lt;tab&gt;&lt;enter&gt;</userinput>
<prompt>[root@linus netatalk]#</prompt> <userinput>make install</userinput>
</screen>
</para>

<para>
 Netatalk "bor" i kataloget <filename>/usr/local/atalk/</filename>.
 Server-binaries og opsætningsfiler ligger i
 <filename>/usr/local/atalk/etc</filename> og userland-binaries i
 <filename>/usr/local/atalk/bin</filename>. Hvis du ikke kan finde
 <command>netatalk</command> efter du har installeret den, så brug kommandoen
 <command>find / -name atalkd</command> for at finde den.
</para>

<para>
For at kunne bruge Classic AppleTalk-protokollen, skal
understøttelsen af denne være slået til i kernen. For
at finde ud af, om den er det, gør du følgende: dmesg |
grep -i apple.  Hvis den ikke er der, skal du oversætte
din kerne om, med dette tilvalg slået til. 
</para>

<para>
Det program der gør AppleTalk-shares tilgængelige i
både Classic AppleTalk og AppleShareIP hedder <command>afpd</command> og
får sin konfiguration fra en fil der hedder <filename>afpd.conf</filename>.
</para>

<para>
Den simpleste <filename>afpd.conf</filename>-fil indeholder
kun ét - (minus), hvilket står for "Denne computer" med alle
standard options koblet til. En lidt mere kompliceret
konfiguration kunne være følgende:
</para>

<programlisting>
- 
MinLinuxMac -port 12000
"Denne Linux Leger Mac" -port 12001
"Der Ude" -port 12000 -address 206.114.89.46
"Guest Volume" -nocleartxt  -loginmesg "Vær venlig ved min gæsteserver !"
"Boksen" -noguest -port 12000
"Det Helligste" -notcp -defaultvol &lt;path&gt; -systemvol &lt;path&gt;
</programlisting>

<para>
Forklaring af konfigurationsfilen:
</para>

<para>
Den første linje kun med en bindestreg gør at
Linux-maskinen laver en server med sit hostnavn.
Den anden linje laver en server ved navn MinLinuxMac på
port 12000.
Den tredje linje laver en server kaldet "Denne Linux
Leger Mac" på port 12001.
Den fjerde linje laver en server kaldet "Der Ude",
bundet på port 12000 og med den virtuelle IP-adresse
206.114.89.46.
</para>

<para>
I næste sektion laver linjen "Guest Volume" -nocleartxt -loginmesg
"Vær venlig ved min gæsteserver !" en dedikeret gæsteserver, der ikke
spørger om adgangskode og som giver login-beskeden "Vær venlig...".
Linjen "Boksen" -noguest -port 12000 laver en volume på port 12000 der
ikke tillader gæsteadgang.  Linjen "Det Helligste" -notcp -defaultvol
&lt;path&gt; -systemvol &lt;path&gt; laver en server der ikke bruger
TCP/IP (kun DDP) og som bruger to alternative konfigurationsfiler i
stedet for de to standardfiler
<filename>AppleVolumes.default</filename> og
<filename>AppleVolumes.system</filename>. Husk at rette i &lt;path&gt;
hvis du vil gøre dette.
</para>

<para>
Lav et Classic AppleTalk-share:
</para>

<para>
For at lave et Classic AppleTalk-share skal du ændre i
filen <filename>/usr/local/atalk/etc/AppleVolumes.system</filename>
Eksempelvis hvis du indsætter linjen <filename>/data/www</filename>
"Webserver" laves der en volume kaldet Webserver, hvis
indhold så vil kunne ses.
</para>

<para>
Den anden ting denne fil styrer, er "type-creator mappings". På
Macintosh består alle filer (ulig på Unix) af to dele. En "resource
fork" og en "data fork". Resource fork'en gemmer på ting som ikoner,
filtyper, og mapping til den applikation der i sin tid blev brugt til
at lave filen.  Siden Linux-filer generelt er en lang liste af
bogstaver i stedet for delt i to forke/forks, skriver netatalk
resource forkene i filer i et katalog kaldet
<filename>.AppleDouble</filename>. Derfor skabes én Macintosh-fil af
to filer på Linux-maskinen; eksempelvis <FILENAME>enfil.txt</FILENAME>
og <FILENAME>.AppleDouble/enfil.txt</FILENAME>.  Denne fil ville så,
hvis det var en tekstfil og Word havde lavet den, skulle have haft
følgende type-creator mapping i <filename>afpd.conf</filename>: .txt
TEXT MSWD for at fortælle <command>afpd</command> at .txt-filer er
TEXT-filer og at det var Microsoft Word der blev brugt til at
fremstille filen. Afpd vil så fortælle dette til
Macintosh-maskiner der støder på filer der ender på .txt og som ikke
er blevet oprettet på en Macintosh-maskine.
</para>

<para>
ATALKD-daemonen:
</para>

<para>
Atalkd er det kerne-interface der bruges til Classic
Appletalk. Det vil agere forbindelse mellem 
AppleTalk-kernemodulet og resten af Classic AppleTalk's
funktioner i netatalk. Den vil sågar også tage sig af
AppleTalk-routing mellem flere netkort. 
</para>

<para>
Atalkd er styret af konfigurationsfilen
atalkd.conf. Den enkleste form for konfigurationsfil
(og også den enkleste måde at konfigurere atalkd på) er
en tom fil. Denne fil vil atalkd så selv overskrive med
nogle ganske fornuftige opsætninger. Det er tilrådeligt
at specificere alle de netkort man har i atalkd.conf-filen.
Hvis man specificerer mere end ét netkort, vil
atalkd selv route AppleTalk-pakker mellem netkortene.
</para>

<para>
Følgende konfiguration kunne overvejes:
</para>

<programlisting>
eth0 -net 153-174 -addr 154.212 -zone "Langt Ude"
eth1 -net 175-200 \adr 182.318 -zone "På Landet" -seed  
</programlisting>

<para>
Hvad betyder så dette? Forklaringen er ret simpel; hver linje i filen
<filename>atalkd.conf</filename> specificerer ét netkort. I dette
eksempel betyder det at eth0 (første netkort i Linux-maskinen) bruges
på et netværk med AppleTalk-adresser mellem 153 og 174 (se eventuelt
afsnittet om TCP/IP for nærmere forklaring om
netværksadressering). Dette netkort (eth0) er her konfigureret til at
bruge AppleTalk-adressen 154.212 og eksisterer i zonen "Langt Ude".
</para>

<para>
Næste linje betyder at det sekundære netkort eth1 
eksisterer på et netværk mellem 175 og 200 med adressen
182.318 og pakker til zonen "På Landet". Derfor vil atalkd agere
router mellem de to netværk. 
Bemærk, at netværksnumrene ikke må overlappe hinanden; ej
heller må der være andre routere på eth1-netværket. Hvis atalkd finder
en anden router end den der er specificeret i filen, vil programmet afslutte
sig selv. Bemærk også, at hvis du har flere end 5 maskiner på netværket,
skal du angive dette over for afpd (se nedenfor) - ellers virker det
bare ikke! Derfor anbefales det at læse afsnittet om TCP/IP - det er
ikke så svært som det umiddelbart ser ud til.
</para>

<para>
Så kommer den sjove del af det hele - vi skal prøve at
starte Netatalk-serveren op!
</para>

<para>
Først skal du finde ud af hvor Netatalks starup-script
ligger, hvis du ikke allerede ved det.
</para>

<para>
Dette kan du gøre sådan her: 
</para>

<programlisting>
find /* -name "*atalk*" -print 
</programlisting>

<para>
eller med                       
</para>

<programlisting>
locate "*atalk*" 
</programlisting>

<indexterm>
 <primary>updatedb</primary>
</indexterm>
<indexterm>
 <primary>Kommandooversigt</primary>
 <secondary>updatedb </secondary>
</indexterm>

<indexterm>
 <primary>locate</primary>
</indexterm>
<indexterm>
 <primary>Kommandooversigt</primary>
 <secondary>locate </secondary>
</indexterm>

<para>
(Husk at køre <command>updatedb</command> som root efter 
installationen af
Netatalk, ellers vil den ikke kunne findes af databasen
af kommandoen <command>locate</command>).
</para>

<para>
Når du så er i det katalog hvor scriptet er, skriver du:
<COMMAND>./rc.atalk start</COMMAND> og venter et par sekunder på at
Netatalk starter op.  Dette vil så starte en filserver der kører
Classic AppleTalk. Kun hvis du har specificeret nogle TCP/IP-adresser
i <filename>afpd.conf</filename>-filen vil en tilsvarende Appletalk
IP-server blive startet også. Atalkd er den der tager længst tid at
starte op, da den først kontrollerer netværket ud før den registrerer
sig selv.  Alternativt kan du nøjes med kun at starte en TCP-server,
hvis du på forhånd har konfigureret en i
<filename>atalkd.conf</filename>-filen. Det gøres sådan her:
</para>

<programlisting>
/usr/local/atalk/etc/afpd -F
/usr/local/atalk/etc/afpd.conf
</programlisting>

<para>
Bemærk! Hvis du skal bruge mere end 5 forbindelser til
Netatalk-serveren skal du angive et antal maksimumforbindelser når du
starter afpd. Det gøres med argumentet -c: <COMMAND>afpd -c
25</COMMAND> Dette vil så give mulighed for 25 forbindelser til
Netatalk-serveren.
</para>

<para>
Hvis denne kommando lykkes uden at brokke sig, så gå hen til en Mac og
åbn "Chooser" (under Apple-menuen i venstre side). Klik på AppleShare
og se om din Netatalk-server er der. Hvis du bruger AppleShareIP skal
du klikke på AppleShareIP-knappen og manuelt indtaste maskinens navn
eller IP-nummer. Hvis alt så er lykkedes vel, vil du blive bedt om at
indtaste din adgangskode.
</para>

<para>
Husk, at du af sikkerhedsmæssige årsager ikke kan logge ind på
filserveren som root, og kun hvis dit brugernavn består af 8 eller færre
tegn. Guest access (gæsteadgang) til filserveren vil være tilladt,
hvis det ikke er blevet forbudt i <filename>afpd.conf</filename>.
</para>

<para>
Hvis det lykkes dig at logge ind, vil du blive præsenteret for en
liste af "volumes" du så kan vælge - og montere. Det er tilrådeligt at
bruge et af de startup-scripts der følger med Netatalk, til at starte
denne med når maskinen booter. Alt afhængigt af hvilken distribution du
bruger, skal du følge fremgangsmåden for hvordan din maskine gør. På en
Red Hat skal du nok kigge på
<filename>/etc/rc.d/rc.local</filename>. Ellers er et andet godt bud
<filename>/etc/init.d</filename>, for at finde ud af hvor dine
startup-scripts befinder sig.
</para>

<para>
Andre ting man kan gøre med Netatalk: 
</para>

<para>
Tovejs-krypteret "password authentication" er understøttet af
Netatalk. Men for at dette skal kunne bruges, må serveren nødvendigvis
vide hvor klartekst-adgangskoderne kan findes henne. Da
systemadgangskoderne er krypterede ved serveren ikke hvad
klartekst-adgangskoderne er, så det skal den have at vide. Ved at
oprette en <filename>.passwd</filename>-fil i brugerens hjemmekatalog med
klartekstadgangskode i kan tovejskryptering opnås (punktummet foran i
filen betyder at den er skjult og vil kun blive vist, hvis man bruger
<command>ls -a</command>).
</para>

<para>
Det ganske usikkert at gemme sine adgangskoder på et så forudsigeligt
sted. Derfor kræver Netatalk at hver <filename>.passwd</filename>-fil
ejes af den pågældende bruger. Filen må kun være læsbar
og skrivbar for denne bruger. I enkle ord skal du en gang for alle
bare gøre sådan med <filename>.passwd</filename>-filen:
</para>

<indexterm>
 <primary>chown</primary>
</indexterm>
<indexterm>
 <primary>Kommandooversigt</primary>
 <secondary>chown </secondary>
</indexterm>

<indexterm>
 <primary>chmod</primary>
</indexterm>
<indexterm>
 <primary>Kommandooversigt</primary>
 <secondary>chmod </secondary>
</indexterm>

<screen>
<prompt>[root@linus /root]#</prompt> <userinput>chown BRUGER.GRUPPE /home/&lt;brugernavn&gt;/.passwd</userinput>
<prompt>[root@linus /root]#</prompt> <userinput>chmod 600 /home/&lt;brugernavn&gt;/.passwd</userinput>
</screen>

<para>
Hvor BRUGER er brugerens gruppe, og GRUPPE er brugerens
standardgruppe.
</para>


<sect2 id="netatalk-print">
<title>Udskrivning via Netatalk</title>

<para>
Netatalk kan ikke kun agere filserver for Mac-maskiner. Den
kan også lave print-spooling og endda printe til
eksisterende AppleTalk-spools. AppleTalk-spooling opnås
med et program der kaldes papd.
</para>

<para>
Vi antager at du allerede har en lokal printer der er sat op under Linux
og som har Mac-drivere installeret.  papd vil så annoncere sig selv på
netværket som et print spool og acceptere jobs fra Mac-maskiner på
netværket. Dette kan lade sig gøre, da printerjobs er
Postscript-filer, som papd så vil føde Linux-printsystem (lpd)
med. Eksempler på hvordan papd sættes op kan findes på:
</para>

<para>
<ULINK URL="http://www.giub.unibe.ch/~eugster/appleprint.html">
http://www.giub.unibe.ch/~eugster/appleprint.html</ULINK>
</para>

<para>
Det modsatte af dette - altså at printe fra en
Linux-maskine til en Macintosh-printer - kan opnås ved
at bruge pap. Se hvordan med kommandoen <command>man pap</command>. 
</para>
</sect2>

<sect2 id="appletalk-andet">
<title>Anden nyttig viden om AppleTalk-server</title>
<indexterm><primary>aecho</primary><secondary>AppleTalk</secondary></indexterm>
<indexterm><primary>getzones</primary><secondary>AppleTalk</secondary></indexterm>
<indexterm><primary>nbplkup</primary><secondary>AppleTalk</secondary></indexterm>

<para>
Lige som på Linux og Microsoft Windows® er der værktøjer til
at pinge maskiner med.  Over TCP/IP findes der
<command>aecho</command> til AppleTalk, der virker ligesom
ping. Kommandoen <command>getzones</command> vil returnere en liste over
de Macintosh-zoner der findes på netværket. Ydermere
vil kommandoen <command>nbplkup</command> uden options returnere en
uddybende liste over alle de AppleTalk services der
findes på det lokale netværk.
</para>

<para>
Der findes mange andre programmer til at bruge med
Netatalk - så vær ikke bange for at gå i gang med at udforske området
- held og lykke !
</para>

<para>
Andre steder på nettet man bør besøge hvis man bruger
Netatalk:
</para>

<para>
The Netatalk HOWTO:
<ULINK URL="http://thehamptons.com/anders/netatalk/">
http://thehamptons.com/anders/netatalk/</ULINK>
</para>

<para>
The Netatalk Faq-O-Matic:
<ULINK URL="http://www.zettabyte.net/fomserve/netatalk/cache/1.html">
http://www.zettabyte.net/fomserve/netatalk/cache/1.html</ULINK>
</para>

<para>
The Original Netatalk pages:
<ULINK URL="http://www.umich.edu/~rsug/netatalk/">
http://www.umich.edu/~rsug/netatalk/</ULINK>
</para>

<para>
The Netatalk Admins list:
<ULINK URL="mailto:netatalk-admins-request@umich.edu">
netatalk-admins-request@umich.edu</ULINK>
</para>

<para>
All registered trademarks and copyrighted names
are courtesy of their respective owners.
The author of this article does not under any
circumstances claim right over or use of the respective
trademarks mentioned in this article.
</para>

<para>
MS Windows® is a trademark of Microsoft® Corporation
Microsoft® is a trademark of Microsoft® Corporation
Macintosh®, AppleTalk and AppleShareIP are trademarks
of Apple® Corporation.
</para>

<!--
Denne artikel er oversat fra engelsk af nedenstående
person. Artiklen er taget fra Linux Format nr. 1, side
67 - 70. 

Written, altered and translated by / skrevet, ændret
og oversat af 
Kim Futtrup Petersen, 
wintersilence@hotmail.com
Tuesday, 18.07.2000
-->
</sect2>
</sect1><!-- appletalk -->


<sect1 id="ring-ind-server">
<!-- Skrevet af Claus Sørensen cs@klid.dk -->
<title>Linux som ring-ind-server</title>
<indexterm>
 <primary>Ring-ind-server</primary>
</indexterm>
<indexterm>
 <primary>Callback-server</primary>
</indexterm>
<indexterm>
 <primary>Dial-in-server</primary>
</indexterm>

<para>
Til fjernadministration kan man sætte sin maskine op, så det er muligt
at ringe ind til serveren og dermed administrere den via modem.
</para>

<para>
Programmerne <command>ppp</command> og <command>mgetty</command>
(eller lignende) skal være installeret på den maskine, som skal kunne
ringes op.
</para>

<para>
Find ud af  hvilken serielport dit modem sidder på. 
Eksterne modemer er typisk tilknyttet enheden 
<filename>/dev/ttyS0</filename> 
(COM1 under Windows) eller <filename>/dev/ttyS1</filename> 
(COM2 under Windows). Interne modemer er typisk tilknyttet enheden 
<filename>/dev/ttyS2</filename>
(COM3 under Windows) eller <filename>/dev/ttyS3</filename>
(COM4 under Windows). 
</para>

<para>
Den fundne enhed skal så linkes til enheden 
<filename>/dev/modem</filename> således:
</para>

<indexterm>
 <primary>ln -s</primary>
</indexterm>
<indexterm>
 <primary>Kommandooversigt</primary>
 <secondary>ln -s </secondary>
</indexterm>

<screen>
<prompt>[root@linus /root]#</prompt> <userinput>ln -s /dev/ttyS0 /dev/modem</userinput>
</screen>

<para>
Tilføj nedenstående linje i konfigurationsfilen 
<filename>/etc/inittab</filename>
</para>

<programlisting>
<userinput>S0:2345:respawn:/usr/sbin/mgetty ttyS0 -D /dev/ttyS0</userinput>
</programlisting>

<para>
Efter den er blevet gemt, opdateres oplysningerne 
med kommandoen <command>init q</command>.
</para>

<para>
For at brugeren der kommer ind skal kunne køre 
<command>pppd</command> skal rettighederne lige 
ændres, så de ændres til SUID:
</para>

<indexterm>
 <primary>chmod</primary>
</indexterm>
<indexterm>
 <primary>Kommandooversigt</primary>
 <secondary>chmod </secondary>
</indexterm>

<screen>
<prompt>[root@linus /root]#</prompt> <userinput>chmod u+s /usr/sbin/pppd</userinput>
</screen>

<para>
Så er turen kommet til tilretning af 
<command>mgetty</command> via dets konfigurationsfiler. 
</para>

<para>
Opret en ny konfigurationsfil 
<filename>/etc/ppp/options.server</filename>
for <command>ppp</command>-serveren med følgende 
indhold:
</para>

<programlisting>
<userinput>-detach
asyncmap 0
modem
crtscts
lock
proxyarp
require-pap
refuse-chap</userinput>
</programlisting>

<para>
Tilføj de loginnavne (client), som skal have mulighed 
for at få adgang til maskinen, samt tilhørende 
adgangskode (secret) i klar tekst. Angiv stjerner for 
tjeneste (server) og IP-adresse i filen 
<filename>/etc/ppp/pap-secrets</filename>
</para>

<programlisting>
# Secrets for authentication using PAP
# client        server  secret                  IP addresses
<userinput>  martin        *       nitram                  *</userinput>
</programlisting>

<para>
Disse loginnavne og adgangskoder skal helst ikke være de samme som for
selve systemet, da de jo står i klar tekst. De skal udelukkende bruges
til at få forbindelse med maskinen, så man kan benytte IP-baserede
tjenester på maskinen. Du bør nok ikke lade
<filename>/etc/ppp/pap-secrets</filename> være læsbar for almindelige
brugere. Kør derfor <command>chmod og-rw /etc/ppp/pap-secrets</command>.
</para>

<para>
Til sidst der i filen 
<filename>/etc/ppp/options.ttyS0</filename> 
angives henholdsvis IP-nummeret for værten og IP-nummeret 
for den maskine der ringer ind:
</para>

<programlisting>
<userinput>192.168.1.1:192.168.1.222</userinput>
</programlisting>

<para>
Vær opmærksom på, at IP-nummeret for den maskine 
som ringer ind, skal være en del af samme subnet 
som værten.
</para>

<para>
Så er det muligt at ringe ind til din maskine. 
</para>

<para>
Denne vejledning er baseret på Linux Gazette #38's 
vejledning "Linux Dialin Server Setup", som er 
langt mere udtømmende: 
<ulink url="http://www.linuxgazette.com/issue38/gentry.html">
http://www.linuxgazette.com/issue38/gentry.html</ulink>
</para>

</sect1>


<sect1 id="linux-x">
<title>Linux som X-server og terminal</title>
<para>
En Linux-maskine kan være en glimrende X-server for andre mindre
grafiske terminaler. Tilsvarende kan en Linux-maskine snildt virke som
en X-terminal. 
</para>

<sect2 id="linux-xserver">
<title>Linux som X-server</title>
<indexterm><primary>xdm</primary></indexterm>
<para>
For at en Linux-maskine kan virke som grafisk login-server,  skal
der køre en X-server på maskinen. Normalt kræver dette, at man kører i
runlevel 5, dvs. man ændrer linjen i <filename>/etc/inittab</filename>
(eksemplet er fra Red Hat)
</para>

<programlisting>
id:3:initdefault:
</programlisting>

<para>
til 
</para>

<programlisting>
id:5:initdefault:
</programlisting>

<para>
og tilsvarende længere nede i samme fil
</para>

<programlisting>
# Run xdm in runlevel 5
# xdm is now a separate service
x:5:respawn:/etc/X11/prefdm -nodaemon
</programlisting>

<para>
ændres til
</para>

<programlisting>
# Run xdm in runlevel 5
# xdm is now a separate service
x:5:respawn:/etc/X11/prefdm
</programlisting>


<para>
I <filename>/etc/X11/xdm/xdm-config</filename> skal man derefter
indsætte et udråbstegn foran linien der starter med 
<literal>DisplayManager.requestPort</literal>.
</para>

<para>
Anvender du Gnomes login-system, så skal du endvidere rette i
<filename>/etc/X11/gdm/gdm.conf</filename>.
</para>

<programlisting>
[xdmcp]
Enable=0
</programlisting>

<para>
rettes til 
</para>

<programlisting>
[xdmcp]
Enable=1
</programlisting>


<para>
og root skal så genstarte i runlevel 5 ved at køre <command>init 5</command>.
Den option <filename>-nodaemon</filename> der blev fjernet gør at
andre maskiner kan koble sig ind på serveren. Der er således noget med
sikkerhed, man bør tænke på. På et mindre lukket netværk
spiller det ingen rolle. Nu har du en X-server, og lad os nu se på en
Linux-klient.
</para>
</sect2>

<sect2 id="linux-xklient">
<title>Linux som X-klient</title>

<para>
Du skal logge ind på din Linux-maskine i runlevel 3 og som root skrive 
<command>/usr/X11R6/bin/X -query SERVER</command>, hvor
<filename>SERVER</filename>  er navnet på din X-server. Denne kommando
kan du evt. så senere indsætte som en del af 
<filename>/etc/inittab</filename>.
</para>

<programlisting>
x:3:respawn:/usr/X11R6/bin/X 2>/var/log/Xlog -dpi 100 -query SERVER
</programlisting>

<para>
hvor SERVER byttes ud med navnet på den maskine der er X-server.
</para>
</sect2>

</sect1>

<sect1 id="admin-cups">
<title>Printserver med CUPS</title>

<para>
En af de virkelig gode ting ved CUPS er at det er rigtig nemt at bruge
i et netværk.
</para>

<para>Du skal sætte alle printerne op på en maskine (serveren), som
beskrevet i "Friheden til at vælge". På den maskine skal du desuden i
<filename>/etc/cups/cupsd.conf</filename> sørge for at der er adgang
til printerne, ved at tilføje linier a la:
<programlisting>
Allow From 192.168.42.0/24  # Erstat med de IP-numre du bruger
</programlisting>
til <command>&lt;Location /&gt;</command>-afsnittet. 
</para>

<para>
På de andre maskiner skal du så installere klientdelen af CUPS (hvis
det er muligt at nøjes med den) på Debian hedder den nødvendige pakke
    <filename>cupsys-client</filename>. Herudover skal du så i
    <filename>/etc/cups/client.conf</filename> tilføje linien
<programlisting>
ServerName server.domæne
</programlisting>
og skulle det spille. For at tjekke om det virker kan du prøve at køre
    <command>lpstat -p</command>, den skulle gerne give dig en liste
    over de tilgængelige printere, der skulle ligne hvad samme
    kommando giver på serveren.
</para>

<para>
Bemærk at CUPS-dæmonen (cupsd) ikke behøver at køre på klienterne!
</para>

</sect1>

<sect1 id="high-availability">
<title>High Availability</title>
<indexterm>
 <primary>High Availability</primary>
</indexterm>

<para>
Der har været meget fokus det sidste år på "High Availailty", dvs.  at
få stor sikkerhed i drift. Typisk ved at have ekstra servere klar, som
automatisk tager over, hvis der er en defekt med en server.
</para>

<para>
Her er nogle gode steder at søge efter information:
</para>

<itemizedlist mark="bullet">
<listitem> 
 <para>
<ulink url="http://www.LinuxVirtualServer.org/">http://www.LinuxVirtualServer.org/</ulink>
 </para>
</listitem>
<listitem>
 <para>
<ulink url="http://linux-ha.org/">http://linux-ha.org/</ulink>
 </para>
</listitem>
<listitem> 
 <para>
<ulink url="http://www-1.ibm.com/servers/esdd/articles/linux_clust/index.html">http://www-1.ibm.com/servers/esdd/articles/linux_clust/index.html</ulink>
 </para>
</listitem>
</itemizedlist>
</sect1>

<sect1 id="LDAP">
<title>LDAP</title>
<indexterm>
 <primary>LDAP</primary>
</indexterm>

<para>
LDAP er en forkortelse for <emphasis>Lightweight Directory Access Protocol</emphasis> og er en database service, hvorved man kan håndtere bruger-information 
effektivt over et stort netværk. Flere informationer kan findes fra
<ulink url="http://linux.oreillynet.com/pub/a/linux/2001/11/08/ldap.html">http://linux.oreillynet.com/pub/a/linux/2001/11/08/ldap.html</ulink> og
<ulink url="http://linux.oreillynet.com/pub/a/linux/2001/11/08/ldap.html">http://linux.oreillynet.com/pub/a/linux/2001/11/08/ldap.html</ulink>.
</para>
</sect1>
</chapter>

