<chapter id="samba"> 
<!-- Michael Rasmussem mir@miras.org og Lars Madsen m@dsen.net -->
<title>Linux som server i Windows-netværk (Samba)</title>
<indexterm><primary>Samba</primary></indexterm>
<indexterm><primary>Filserver for Windows-maskiner</primary></indexterm>
<indexterm><primary>Windows</primary><secondary>fil-deling</secondary></indexterm>


<para>
Selv om denne bog handler om Linux, skal man ikke glemme, at
der findes andre styresystemer. Et af de mere udbredte er Windows -
herunder wfw/95/98/NT/2000, som alle har indbygget muligheden for at
fungere i netværk. Hvis man allerede har et lokalnet med både Linux- og
Windows-computere, kan man med fordel kigge nærmere på Samba.
</para>

<para>
Samba er frit programmel, og kan dermed erhverves og bruges helt gratis. I
Danmark kan Samba lettest hentes fra 
<ulink url="http://sunsite.dk/samba/samba.html">
http://sunsite.dk/samba/samba.html</ulink>,
ellers fra <ulink url="http://www.samba.org/">http://www.samba.org/</ulink>.
</para>

<para> 
Det, SAMBA først og fremmest kan tilbyde, er at fungere som fil- og
printerserver. Derudover kan SAMBA også fungere som Domain Controller for
Windows klienter.
</para>

<para>
Med Samba installeret (og ikke mindst konfigureret) vil
serveren kunne ses, hvis man klikker på "andre computere" (på
engelsk: "network neighbourhood") eller på samme netværk i Windows 95/98/NT.
</para>

<para>
Den letteste måde at installere eller opgradere Samba på er at
bruge en færdig-oversat pakke. Sådanne pakker kan hentes på
<ulink url="http://sunsite.dk/samba/ftp/Binary_Packages/">
http://sunsite.dk/samba/ftp/Binary_Packages/</ulink>,
og de findes til flere
forskellige Linux-distributioner, bl.a. Red Hat, Caldera, Debian,
Slackware og SuSE. Hvis man holder af at oversætte sin kildetekst
selv, kan den hentes her:
<ulink url="ftp://sunsite.dk/pub/UNIX/networking/samba">
ftp://sunsite.dk/pub/UNIX/networking/samba</ulink>.
</para>

<para>
Vi vil dog meget anbefale at bruge en færdigoversat pakke, og vi
vil i eksemplet gå ud fra, at du har Red Hat installeret. Når du har
hentet rpm-pakken, skriver du bare:
</para>

<SCREEN>
<prompt>[root@linus /root]#</prompt> <USERINPUT>rpm -ivh samba-*.i386.rpm</USERINPUT>
</screen>

<sect1 id="Samba-Unix">
<title>Konfigurering af Samba-serveren i Linux</title>

<para>
Når du har fået installeret Samba-serveren, skal du have den
konfigureret. Dette kan gøres på flere måder. I sædvanlig Unix-stil kan
man rette direkte i filen <filename>/etc/smb.conf</filename>. Denne
fil kan virke meget skræmmende, da der er op mod 300 parametre, man
kan sætte. Det skal du dog af to grunde ikke lade dig gå på af: For
det første har de fleste parametre udmærkede forvalgte værdier, så dem
behøver man slet ikke at bekymre sig om. For det andet bliver der
installeret en udmærket standard <filename>/etc/smb.conf</filename>,
som virker uden de store ændringer.
</para>

<para>
 Denne standard
<filename>smb.conf</filename> er desuden meget velkommenteret, hvilket
yderligere letter tilpasning. Her er et eksempel på en lille
<filename>/etc/smb.conf</filename> fil, der ud over at sætte Samba op
som fil- og printerserver også konfigurerer Samba som domænekontroller.
</para>

<screen>
[global]
   workgroup = hjemme

   printing = bsd
   printcap name = /etc/printcap
   load printers = yes

   log file = /var/log/samba-log.%m

   short preserve case = yes
   preserve case = yes

   lock directory = /var/lock/samba
   locking = yes
   strict locking = yes

   security = user

   socket options = TCP_NODELAY

   domain master = yes
   domain logons = yes
; Hvis du vil have Windows klienter med æ,ø og å
   client codepage = 850
   valid chars = æ:Æ ø:Ø å:Å

[homes]
   comment = Home Directories
   read only = no
   create mode = 0750

[deskjet870cxi]
   comment = All Printers
   path = /var/spool/samba
   browseable = yes
   printable = yes
; Set public = yes to allow user 'guest account' to print
   public = no
   writable = no
   create mode = 0700

</screen>

<para>
<emphasis>Tip:</emphasis> I Windows 2000 skal man udføre kommandoen
<command>chcp 850</command> i et terminal-vindue.
Hvis man ikke gør dette på
Windows-maskinerne vil Samba oversætte ø:Ø forkert til o:O i stedet, da
Windows 2000 <emphasis>ikke</emphasis> selv sætter codepagen til 850
men derimod til 457 selvom man sætter sin locale til dansk under
installationen. 
</para>

<para>
For at dine Windows-klienter skal få lov til at logge sig på
Samba-serveren, skal Samba kende til dem - ikke brugerne, men de
enkelte maskiner. For at Samba vil vedkende sig en maskine, skal den
have en Machine Trust Account (MTA), og til dette formål skal man
benytte kommandoen <command>smbpasswd</command>. Samba skelner mellem
de enkelte maskiner vha. et Machine ID, som den henter fra den enkelte
maskine, når den logger på første gang.
</para>

<para>
Sådan tildeles vores Windows-klient en MTA:
Først skal vi i filen <filename>/etc/passwd</filename> tilføje vores
Windows-klient med det navn, som vi har givet den. Se hvordan
senere. Dette gøres på følgende måde:
</para>

<para>
Åbn <filename>/etc/passwd</filename> i en teksteditor, f.eks
<command>pico</command>, og skriv følgende
</para>

<screen>
WS1$:*:801:800:Arbejdsstation 1:/dev/null:/bin/false
WS2$:*:802:800:Arbejdsstation 2:/dev/null:/bin/false
			.
			.
			Osv.	
</screen>


<para>
Bemærk: Der <emphasis>skal</emphasis> oprettes en tilsvarende MTA for
hver Windows-klient, og hvis man f.eks opgraderer sit styresystem,
eller ændrer computernavn, skal denne procedure gentages.
</para>

<para>
Vær opmærksom på, at WS1$ og WS2$ i eksemplet her medfører, at dine
windows-maskiner skal have navnet WS1, WS2 osv., ellers genkendes de ikke.
Dette navn sættes op via "kontrolpanel"->"netværk".
</para>

<para>
På Windows maskinen skal der ikke indgå et "$" tegn i navnet, det tjener
alene til at vise Linux, at der er tale om en maskinkonto i modsætning til
en brugerkonto.
</para>

<para>
Når vi har tilføjet vores Windows-klient i
<filename>/etc/passwd</filename>, skal vi få Samba til at generere
vores MTA. Dette gøres med kommandoen
</para>

<screen>
<prompt>[root@linus /root]#</prompt> <USERINPUT>smbpasswd -a -m WS1</USERINPUT>
</screen>

<para>
Efter vi har afviklet <command>smbpasswd</command>, vil man kunne se
følgende linje i filen <filename>/etc/samba/smbpasswd</filename> (hvor
noget af linjen er forkortet):
</para>

<screen>
WS1$:801:996FE367692....05AA1BE70:[W    ]:LCT-397A3E6E
</screen>

<para>
N.B. Det kan være at <filename>smbpasswd</filename> ligger i
<filename>/etc/</filename>. 
</para>

<para>
Som noget nyt i version 2.x.x har man nu mulighed for at sætte Samba op som
primær domænekontroller for et Windows-netværk med 95-, 98-, ME- og 
NT-klienter. Det vil dog føre for vidt at komme ind på det her. 
Hvis man har mod på at prøve, kan man finde mere
information her:
</para>

<itemizedlist mark="bullet">
<listitem>
 <para>
<ulink 
url="http://sunsite.dk/samba/docs/ntdom_faq/samba_ntdom_faq.html">
http://sunsite.dk/samba/docs/ntdom_faq/samba_ntdom_faq.html</ulink>
 </para>
</listitem>
<listitem> 
 <para>
Samba TNG (<ulink url="http://www.kneschke.de/projekte/samba_tng/">
http://www.kneschke.de/projekte/samba_tng/</ulink>)
 </para>
</listitem>
<listitem> 
 <para>
Doing the NIS/NT Samba 
(<ulink
url="http://www.linuxworld.com/linuxworld/lw-1998-10/lw-10-samba.html">
http://www.linuxworld.com/linuxworld/lw-1998-10/lw-10-samba.html</ulink>)
 </para>
</listitem>
</itemizedlist>

<para>
Sammen med Samba kommer der også et grafisk konfigurationsværktøj, der
hedder <command>swat</command> (Samba Web Administration Tool).  Med
dette værktøj er det muligt at klikke sig gennem opsætningen af Samba.
</para>

<FIGURE ID="swat-fig" FLOAT="1">
<TITLE>Swat
</TITLE>
<GRAPHIC FILEREF="swat.&magic;"  SCALE="60"></GRAPHIC>
</FIGURE>


<para> Her ses et eksempel på, hvordan <command>swat</command> ser ud, jeg
har defineret et "share" (en delt mappe), der hedder spil. I
<filename>smb.conf</filename> ser det således ud:
</para>

<screen>
[spil]
  create mask =  0775
  read only = no
  path = /mnt/hdd/spil/
</screen>

<para>
Hvis man bruger swat, ser det således ud: 
</para>

<FIGURE ID="swatspil-fig" FLOAT="1">
<TITLE>Swat spil
</TITLE>
<GRAPHIC FILEREF="swat_spil.&magic;" SCALE="60"></GRAPHIC>
</FIGURE>


<para>
Her er det kun den øverste del af siden, der er taget med. Det skal bemærkes,
at der findes en del andre indstillinger, der også kan sættes med swat. Den
største fordel ved at benytte swat er, at man har adgang til hjælp.
</para>

<para>
Der findes efterhånden en del andre grafiske
konfigurationsværktøjer. 
<ulink url="http://sunsite.dk/samba/GUI/">
http://sunsite.dk/samba/GUI/</ulink>
indeholder en liste over disse.
</para>

<para>
Inden man kan gå videre til at konfigurere klienterne i ens netværk,
er der yderligere to andre ting, der skal tages stilling til. Den
første beslutning, der skal tages er, hvorvidt man ønsker at benytte
krypterede adgangskoder eller ej. Opsætning af dette og en diskussion
af fordele og ulemper følger i næste afsnit. Den anden beslutning
angår, om man vil benytte TCP/IP eller LAN-manager (Netbios) til
navneopslag. Hvis man vælger LAN-managerløsningen, er konfigureringen
af Samba overstået på Linux-serveren, mens TCP/IP løsningen kræver, at
der installeres DNS på Linux-serveren.
</para>

<para>
Hvordan man installerer DNS på Linux, kan du læse mere om her. Se
<xref linkend="dns-opsaetning">.
</para>

<sect2 id="kryptpass">
<title>Krypterede adgangskoder</title>

<para>
SMB bruger en krypteringsteknik, der ligner standard Unix-kryptering. 
Det er dog kun tilsyneladende, at de to teknikker er ens,
Unix-variationen sender nemlig typisk kodeordet i klar tekst over
netværket, når man skal logge ind. SMB sender i modsætning hertil en
kodet version af adgangskoden.
</para>

<para>
Hvorvidt man vælger at bruge krypterede adgangskoder eller ej, er op til
den enkelte at afgøre, da der er både fordele og ulemper, som listet
nedenfor. Bruger man nyere versioner af Microsoft Windows og NT vil vi dog
anbefale at bruge kryptering, idet man slipper for at skulle
konfigurere alle sine klienter. Som det vil fremgå lidt senere, er det uhyre
enkelt at få Samba til at benytte krypterede adgangskoder.
</para>

<para>
Fordele ved krypterede adgangskoder:
<ITEMIZEDLIST MARK="bullet" SPACING="compact">
<LISTITEM>
<PARA>Sikkerhed. Adgangskoder bliver ikke sendt over netværket i klar tekst.</PARA>
</LISTITEM>


<LISTITEM>
<PARA>Windows 95 med osr2, Windows 98 og NT4.0 SP4 vil som standard kun
tale med en server, der anvender krypterede adgangskoder.</PARA>
</LISTITEM>
</ITEMIZEDLIST>

Ulemper ved krypterede adgangskoder:
<ITEMIZEDLIST MARK="bullet" SPACING="compact">
<LISTITEM>
<PARA>Der skal vedligeholdes endnu en passwd-fil.</PARA>
</LISTITEM>

<LISTITEM>
<PARA>Hvis du allerede bruger services, der sender adgangskoder i klar
tekst (F.eks telnet og ftp), gør det ikke den store forskel, om
SMB også gør det.</PARA>
</LISTITEM>

</ITEMIZEDLIST>
</PARA>

<para>
Windows 98 og Windows NT 4 (sp3 og senere) kræver som standard brug af 
krypterede adgangskoder. Det betyder, at du har to valg:
</para>

<ITEMIZEDLIST MARK="bullet" SPACING="compact">
<LISTITEM>
<PARA>Du konfigurerer Samba til at bruge krypterede adgangskoder.
</PARA>
</LISTITEM>
<LISTITEM>
<PARA>Du ændrer Windows 98/95/NT registry, så de ikke kræver krypterede adgangskoder.
</PARA>
</LISTITEM>
</ITEMIZEDLIST>
</sect2>

<sect2 id="Sambaconfig">
<title>Konfigurering af Samba</title>
<para>
I modsætning til tidligere er Samba i dag født til at kunne håndtere
krypterede adgangskoder. Det eneste man skal gøre, er at tilføje følgende
linje til [global] sektionen i <filename>/etc/smb.conf</filename>
</para>

<screen>
encrypt password = yes
</screen>

<para>
Hvis du gerne vil have flyttet dine Unix-adgangskoder over til Samba,
skal du lave en ny passwd-fil til brug for Samba alene. Der findes
et program, der kan generere en Samba-adgangskodefil 
(<filename>/etc/samba/smbpasswd</filename>) ud fra den
eksisterende Unix-adgangskodefil (<filename>/etc/passwd</filename>):
</para>

<SCREEN>
<prompt>[root@linus /root]#</prompt> <USERINPUT> mksmbpasswd.sh &lt; /etc/passwd &gt; /etc/samba/smbpasswd</USERINPUT>
</SCREEN>

<para>
I SuSE 6.3 er <filename>smbpasswd.sh</filename> placeret i kataloget
<filename>/usr/sbin</filename>, og katalogplaceringen skal med i
kommandoen. Desuden har filen i den distribution ikke rettigheder til
at kunne køres, hvilke den således skal tildeles, før kommandoen udføres.
</para>

<para>
Kommandoen opretter filen til de krypterede adgangskoder, men den opretter 
ikke selve de krypterede adgangskoder. Uanset om du vælger, at brugerne 
skal have samme Samba-adgangskode, som de er tildelt som brugere i dit 
Linux-system, skal du alligevel bagefter tildele dem krypterede 
Samba-adgangskoder ved hjælp af kommandoen <command>smbpasswd</command>.
</para>

<para>
Selv hvis du med linjen <filename>null passwords = yes</filename> i
<filename>/etc/smb.conf</filename> under global-sektion har tilladt, at
Samba-adgangskoden er blankt, skal du alligevel oprette en "blank"
adgangskode med kommandoen <command>smbpasswd</command>.
</para>

<para>
Du bør bruge samba-1.9.18p10 eller senere (2.0.7 er pt. den seneste),
da kryptering er slået til som standard - dette gælder i hvert fald for
Red Hat. Bruger du andre distributioner, bør du tjekke, hvordan Samba
er konfigureret. Hvis du gerne vil oversætte dit eget programmel, skal
du anvende linkerflaget <filename>-lcrypt</filename> til LIBSM. 
</para>
</sect2>
</sect1>

<sect1 id="SambaconfigWin">
<title>Opsætning af Windows 98/NT</title>

<para>
Som udgangspunkt er Windows sat op til at sende krypterede
adgangskoder, så hvis man ikke ønsker kryptering, skal dette fortælles til
Windows, da man ellers ikke vil kunne logge sig på.
</para>

<para>
På Windows 95/98-maskiner skal følgende skrives i
registreringsdatabasen for at få Windows til at undlade at sende
krypterede adgangskoder:
</para>

<screen>
[HKEY_LOCAL_MACHINE\System\CurrentControlSet\Services\VxD\VNETSUP]
"EnablePlainTextPassword"=dword:00000001
</screen>

<para>
Tilsvarende for Windows NT:
</para>

<screen>
[HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\Rdr\Parameters]
"EnablePlainTextPassword"=dword:00000001
</screen>

<para>
Hvis man ikke har mod på at ændre i registreringsdatabasen selv, kan
man kopiere en af følgende filer til sin Windowsmaskine og afvikle dem
fra <command>stifinder</command>:
</para>

<ITEMIZEDLIST MARK="bullet" SPACING="compact">
<LISTITEM><para><filename>Win95_PlainPassword.reg</filename></para></LISTITEM>
<LISTITEM><para><filename>Win98_PlainPassword.reg</filename></para></LISTITEM>
<LISTITEM><para><filename>NT4_PlainPassword.reg</filename></para></LISTITEM>
<LISTITEM><para><filename>Win2000_PlainPassword.reg</filename></para></LISTITEM>
</ITEMIZEDLIST>

<para>
Hvis man afvikler dem, vil ovenstående ændringer automatisk blive tilføjet i
registreringsdatabasen. 
</para>

<para>
En meget udførlig beskrivelse af brugen findes i filen 
<filename>ENCRYPTION.txt</filename>, der følger med Samba-distributionen.
</para>

<sect2 id="configWinClient">
<title>Konfigurering af klienterne</title>

<para>
Du har du konfigureret Samba på Linux-serveren samt besluttet dig for,
om du vil benytte krypterede adgangskoder eller ej, så det eneste du
mangler, er at få Windows-klienterne til at tilslutte sig domænet. I
det følgende afsnit vil vi anvise en løsning på dette. Der knytter sig
følgende forudsætninger til det efterfølgende eksempel:
</para>

<para>
Maskiner i vores netværk:
</para>

<ITEMIZEDLIST MARK="bullet" SPACING="compact">
<LISTITEM><para>test.domain.net; Linux-serveren</para></LISTITEM>
<LISTITEM><para>router.domain.net; Router til Internet</para></LISTITEM>
<LISTITEM><para>WS1.domain.net; Windows-klient</para></LISTITEM>
</ITEMIZEDLIST>


<para>
Indhold af filen <filename>/etc/hosts</filename>
</para>

<screen>
127.0.0.1	localhost.localdomain	localhost
192.168.1.1	test.domain.net		test
172.10.10.1	router.domain.net	router
</screen>


<para>
Indhold af filen <filename>/etc/smb.conf</filename>
</para>

<screen>
[global]
   workgroup = testdomain

   printing = bsd
   printcap name = /etc/printcap
   load printers = yes

   log file = /var/log/samba-log.%m

   short preserve case = yes
   preserve case = yes

   lock directory = /var/lock/samba
   locking = yes
   strict locking = yes

   security = user

   socket options = TCP_NODELAY

   domain master = yes
   domain logons = yes

[homes]
   comment = Home Directories
   read only = no
   create mode = 0750

[deskjet870cxi]
   comment = All Printers
   path = /var/spool/samba
   browseable = yes
   printable = yes
; Set public = yes to allow user 'guest account' to print
   public = no
   writable = no
   create mode = 0700
</screen>


<para>
for at kunne få forbindelse til Samba-serveren, kræves der en fungerende
løsning på navneopslag. Dette kan løses på 2 måder:
</para>


<ITEMIZEDLIST MARK="bullet" SPACING="compact">
<LISTITEM>
<para>
Hosts og Lmhosts - netbios way (har i øvrigt suffixet .sam): I disse filer
skal samba-serveren være nævnt. Når du har foretaget ændringerne i
filerne, skal deres navne ændres til Hosts og Lmhosts - efternavnene
<filename>.sam</filename> skal altså udelades. Se eksempel på disse filer
senere. </para> 
</listitem>

<LISTITEM>
<para>
Sæt Linux-serveren til at køre named - TCP/IP-way, 
og fortæl Windows at den skal bruge 
Linux-serveren som navneserver (DNS). Åbn
indstillinger-&gt;kontrolpanel-&gt;netværk. Åbn 
egenskaber for TCP/IP. Under fanebladet "Gateway" tilføjes
192.168.1.1. Under fanebladet DNS-konfiguration aktiveres DNS, i Vært skrives
maskinens navn WS1 (det skal være det samme navn som blev angivet som
Computernavn i fanebladet identifikation:
Indstillinger-&gt;kontrolpanel-&gt;netværk). Domæne sættes til testdomain.
Feltet Rækkefølge til søgning efter navneserver tilføjes 192.168.1.1
(hvis den står som den første, går det hurtigere).
</para></LISTITEM>
</ITEMIZEDLIST>


<para>
DOMÆNENAVN: Workgroup/domainnavn må ikke være sammenfaldende med
hostnavnet. Hvis samba, som i vores eksempel, kører på hosten
test.domain.net, og har følgende stående i filen
<filename>/etc/hosts</filename>:
</para>

<para>
<screen>
127.0.0.1 localhost.localdomain localhost
192.168.1.1 test.domain.net test
172.10.10.1 router.domain.net router
</screen>
</para>

<para>
er følgende navne ikke tilladt for workgroup/domain:
</para>

<ITEMIZEDLIST MARK="bullet" SPACING="compact">
<LISTITEM><para>localhost.localdomain</para></LISTITEM>
<LISTITEM><para>test.domain.net</para></LISTITEM>
<LISTITEM><para>router.domain.net</para></LISTITEM>
</ITEMIZEDLIST>


<para>
Disse vil formentlig være ulovlige i sig selv, da de indeholder et
forbudt tegn.
</para>

<para>
<ITEMIZEDLIST MARK="bullet" SPACING="compact">
<LISTITEM><para>localhost</para></LISTITEM>
<LISTITEM><para>test</para></LISTITEM>
<LISTITEM><para>router</para></LISTITEM>
</ITEMIZEDLIST>
</para>

<para>
I dette afsnit kommer så vores eksempel på, hvordan filerne
<filename>Hosts</filename> og <filename>Lmhosts</filename> skal se ud.
</para>

<sect3 id="hosts-samba">
<title>Hosts</title>

<para>
For Windows 95/98 gemmes filen som 
<filename>c:\windows\Hosts</filename>.
</para>

<para>
For Windows NT gemmes filen som 
<filename>c:\winnt\system32\drivers\etc\Hosts</filename>.
</para>

<screen>
# Copyright (c) 1998 Microsoft Corp.
#
# This is a sample HOSTS file used by Microsoft TCP/IP stack for Windows98
#
# This file contains the mappings of IP addresses to host names. Each
# entry should be kept on an individual line. The IP address should
# be placed in the first column followed by the corresponding host name.
# The IP address and the host name should be separated by at least one
# space.
#
# Additionally, comments (such as these) may be inserted on individual
# lines or following the machine name denoted by a '#' symbol.
#
# For example:
#
# 102.54.94.97 rhino.acme.com # source server
# 38.25.63.10 x.acme.com # x client host

127.0.0.1 localhost
192.168.1.1 test
172.10.10.1 router
</screen>
</sect3>

<sect3>
<title>Lmhosts</title>


<para>
For Windows 95/98 gemmes filen som 
<filename>c:\windows\Lmhosts</filename>.
</para>

<para>
For Windows NT gemmes filen som 
<filename>c:\winnt\system32\drivers\etc\Lmhosts</filename>.
</para>


<screen>
# Copyright (c) 1998 Microsoft Corp.
#
# This is a sample LMHOSTS file used by the Microsoft Wins Client (NetBios
# over TCP/IP) stack for Windows98
#
# This file contains the mappings of IP addresses to NT computernames
# (NetBIOS) names. Each entry should be kept on an individual line.
# The IP address should be placed in the first column followed by the
# corresponding computername. The address and the comptername
# should be separated by at least one space or tab. The "#" character
# is generally used to denote the start of a comment (see the exceptions
# below).
#
# This file is compatible with Microsoft LAN Manager 2.x TCP/IP lmhosts
# files and offers the following extensions:
#
# #PRE
# #DOM:&lt;domain&gt;
# #INCLUDE &lt;filename&gt;
# #BEGIN_ALTERNATE
# #END_ALTERNATE
# \0xnn (non-printing character support)
#
# Following any entry in the file with the characters "#PRE" will cause
# the entry to be preloaded into the name cache. By default, entries are
# not preloaded, but are parsed only after dynamic name resolution fails.
#
# Following an entry with the "#DOM:&lt;domain&gt;" tag will associate the
# entry with the domain specified by &lt;domain&gt;. This affects how the
# browser and logon services behave in TCP/IP environments. To preload
# the host name associated with #DOM entry, it is necessary to also add a
# #PRE to the line. The &lt;domain&gt; is always preloaded although it will not
# be shown when the name cache is viewed.
#
# Specifying "#INCLUDE &lt;filename&gt;" will force the RFC NetBIOS (NBT)
# software to seek the specified &lt;filename&gt; and parse it as if it were
# local. &lt;filename&gt; is generally a UNC-based name, allowing a
# centralized lmhosts file to be maintained on a server.
# It is ALWAYS necessary to provide a mapping for the IP address of the
# server prior to the #INCLUDE. This mapping must use the #PRE directive.
# In addtion the share "public" in the example below must be in the
# LanManServer list of "NullSessionShares" in order for client machines to
# be able to read the lmhosts file successfully. This key is under
#\machine\system\currentcontrolset\services\lanmanserver\
#  parameters\nullsessionshares
# in the registry. Simply add "public" to the list found there.
#
# The #BEGIN_ and #END_ALTERNATE keywords allow multiple #INCLUDE
# statements to be grouped together. Any single successful include
# will cause the group to succeed.
#
# Finally, non-printing characters can be embedded in mappings by
# first surrounding the NetBIOS name in quotations, then using the
# \0xnn notation to specify a hex value for a non-printing character.
#
# The following example illustrates all of these extensions:
#
# 102.54.94.97 rhino #PRE #DOM:networking #net group's DC
# 102.54.94.102 "appname \0x14" #special app server
# 102.54.94.123 popular #PRE #source server
# 102.54.94.117 localsrv #PRE #needed for theinclude
#
# #BEGIN_ALTERNATE
# #INCLUDE \\localsrv\public\lmhosts &lt;file://\\localsrv\public\lmhosts&gt;
# #INCLUDE \\rhino\public\lmhosts &lt;file://\\rhino\public\lmhosts&gt;
# #END_ALTERNATE
#
# In the above example, the "appname" server contains a special
# character in its name, the "popular" and "localsrv" server names are
# preloaded, and the "rhino" server name is specified so it can be used
# to later #INCLUDE a centrally maintained lmhosts file if the "localsrv"
# system is unavailable.
#
# Note that the whole file is parsed including comments on each lookup,
# so keeping the number of comments to a minimum will improve performance.
# Therefore it is not advisable to simply add lmhosts file entries onto the
# end of this file.

192.168.1.1 test #PRE #DOM:testdomain #net group's DC
</screen>
</sect3>
</sect2>
</sect1>

<sect1 id="videre-samba">
<title>Videre med Samba</title>
<para>
Ud over man-siderne og dokumentationen, der installeres i
<filename>/usr/doc</filename>, findes der en række bøger om Samba. Den 
første bog er ikke
blændende godt redigeret hele vejen igennem, men er ualmindelig rar at
have stående som opslagsværk, hvis du administrerer en server med Samba.
Sidst i bogen er der et rigtig godt kapitel om fejlfinding.
</para>

<para>
John D. Blair: <emphasis>Samba: Integrating UNIX and
Windows</emphasis>, Specialized Systems Consultants, Inc., ISBN:
1-57831-006-7, 290 sider + CDROM
</para>
<para>
Der findes også en glimrende online bog fra O'Reilly, der 
hedder "Using Samba"
<ulink 
url="http://sunsite.dk/samba/oreilly/using_samba/">
http://sunsite.dk/samba/oreilly/using_samba/</ulink> 
skrevet af Robert Eckstein, David Collier-Brown, Peter Kelly
</para>

<para>
En anden virkelig god bog om Samba er efter sigende 
Gerald Carter & Richard Sharpe, <emphasis>Sams Teach Yourself Samba in
24hrs</emphasis>, 
Sams Publishing 1999. ISBN 0-672-31609-9.
</para>

<para>
En godt og kort artikel om Samba som Domain server er at finde
på <ulink url="http://www.freeos.com/articles/3842/">http://www.freeos.com/articles/3842/</ulink>.
</para>

</sect1>
</chapter>
