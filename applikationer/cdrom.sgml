<!-- $Id$ -->
<chapter id="cdrombraending">
<title>Brænding af cd'er</title>
<indexterm><primary>Brænde cd-rom</primary></indexterm>
<indexterm><primary>cd-rom</primary><secondary>brænde</secondary></indexterm>

<para>
Linux understøtter cd-brænding på alle drev fremstillet siden 1999,
hvor en standardisering af cd-brændere slog igennem. Desuden er en
række ældre brændere understøttet; den fulde liste findes på adressen
<ulink
url="http://www.fokus.gmd.de/research/cc/glone/employees/joerg.schilling/private/cdwriters-1.11.html">http://www.fokus.gmd.de/research/cc/glone/employees/joerg.schilling/private/cdwriters-1.11.html</ulink>.
</para>

<para>
De fleste moderne distributioner sørger automatisk for at der kan
brændes cd'er, såfremt der er tilsluttet en brænder under installation
af distributionen.
</para>

<para>
Der findes kun ét egentligt brænderprogram under Linux; det hedder
<command>cdrecord</command> og følger med stort set alle
distributioner. <command>cdrecord</command> er et tekstbaseret program
med en mængde muligheder, så det kan være lidt tungt at danse med.
Derfor findes også en række grafiske programmer, der fungerer som
lettilgængelige overbygninger af <command>cdrecord</command>. Nogle
meget benyttede grafiske programmer er <command>X-CD-Roast</command> og
<command>gcombust</command>.
</para>

<para>
Hvis ikke <command>cdrecord</command> er installeret på dit system, så
start med at gøre dette. Så er det nemt at se om brændersystemet kører
som det skal. Ved at give kommandoen <userinput>cdrecord
-scanbus</userinput> udskrives en liste over de drev, der er genkendt:
</para>

<screen>
<PROMPT>[root@linus /root]#</PROMPT> <USERINPUT>cdrecord -scanbus</USERINPUT>
Cdrecord 1.11a12 (i586-mandrake-linux-gnu) Copyright (C) 1995-2001 Jörg Schilling
Linux sg driver version: 3.1.22
Using libscg version 'schily-0.5'
scsibus0:
        0,0,0     0) 'PIONEER ' 'CD-ROM DR-744   ' '1.02' Removable CD-ROM
        0,1,0     1) 'LITE-ON ' 'LTR-12101B      ' 'LS3J' Removable CD-ROM
        0,2,0     2) *
        0,3,0     3) *
        0,4,0     4) *
        0,5,0     5) *
        0,6,0     6) *
        0,7,0     7) *
</screen>

<para>
Her ses at systemet har fundet to drev. Det første er et almindeligt
cd-rom-drev, det andet er brænderen. Det er ikke umiddelbart muligt at
se forskel, men hvis man kender mærket på sin brænder burde man kunne
finde den i listen. Da <command>cdrecord</command> kan se flere drev,
er det nødvendigt at mærke sig hvilket af dem, der skal anvendes. I
dette tilfælde er det drevet med nummeret
<userinput>0,1,0</userinput>. Sådan et nummer skal altid bruges når
man vil brænde, også hvis brænderen er det eneste drev, man har i
maskinen.
</para>

<para>
I de følgende afsnit vil der blive gennemgået hvad man kan gøre hvis
ens brænder ikke umiddelbart bliver genkendt. Der vil derefter blive
vist et lille udpluk af de nemme grafiske overbygninger til
<command>cdrecord</command>. Endelig bliver det vist hvorledes
<command>cdrecord</command> benyttes fra kommandolinien, til at lave
cd'er med enten data eller musik.
</para>

<para>
En mere detaljeret gennemgang af cd-brænding under Linux findes i
<ulink
url="http://www.linuxdoc.org/HOWTO/CD-Writing-HOWTO.html">http://www.linuxdoc.org/HOWTO/CD-Writing-HOWTO.html</ulink>.
Her er især svar på mange mulige komplikationer, som ikke er dækket i
indeværende tekst.
</para>


<sect1 id="opsaetning-braender-kerne">
<title>Opsætning af brænder på hjemmebygget kerne</title>

<para>
I dette afsnit beskrives hvorledes en Linux-kerne bringes til at
genkende en brænder. Hvis brænderen allerede genkendes med kommandoen
<userinput>cdrecord -scanbus</userinput> som beskrevet ovenfor, kan
dette afsnit derfor springes over. Har man imidlertid selv hentet sin
kerne fra <ulink
url="http://www.kernel.org">http://www.kernel.org</ulink> eller kan
ens distribution af én eller anden grund ikke finde brænderen, så må
man selv til at rode lidt dybere.
</para>

<para>
For <command>cdrecord</command> findes der kun SCSI-brændere. Uanset
hvad, skal man derfor i indstillingerne til kernen aktivere
SCSI-understøttelse. Dette gøres ved under "SCSI support" at aktivere
"SCSI CD-ROM support" og "SCSI generic support". Hvis dette er gjort,
vil man på det kørende system have et bibliotek ved navn
<filename>/proc/scsi/</filename>.
</para>

<para>
Hvis man ejer en SCSI-brænder, så skal man endvidere sørge for at ens
SCSI-controller er understøttet af Linux, så virker
<command>cdrecord</command> uden videre. Dette sker under kernens
indstillinger for "SCSI low-level drivers", hvor man blot vælger det
SCSI-kort, man nu engang ejer.
</para>

<para>
Har man i stedet en IDE-brænder, så skal der sættes IDE-SCSI emulering
op, således at brænderen overfor <command>cdrecord</command> fremstår
som en SCSI-brænder. De fleste brændere er af IDE-typen, og er man i
tvivl hvad man har, så er det ganske sikkert en IDE-brænder.
</para>

<sect2 id="opsaetning-ide-scsi-emulering">
<title>IDE-SCSI emulering</title>

<para>
For at få en IDE-brænder til at fremstå som en SCSI-brænder må man
gøre to ting. Det første er at kernen skal oversættes med support for
ide-scsi, scsi-cdrom, generic scsi og ide-cd. Desuden skal den
hidtidige IDE-understøttelse fjernes, så de to systemer ikke træder
hinanden over tæerne.
</para>

<para>
Det man skal være opmærksom på under kerne-oversættelsen er
menupunkterne "SCSI emulation support" samt "Include IDE/ATAPI CDROM
support" under afdelingen "IDE, ATA and ATAPI Block devices", som igen
findes under "ATA/IDE/MFM/RLL support". Disse valg er i tilgift til
"SCSI CD-ROM support" og "SCSI generic support" som beskrevet ovenfor.
Man kan frit vælge om tingene skal bygges direkte ind i kernen, eller
om de skal laves som moduler. I det følgende er det dog antaget at der
benyttes moduler.
</para>

<para>
Når man har fået bygget sig en kerne med de rette elementer, skal man
sørge for at fjerne den normale IDE-cd-rom understøttelse. Det skal
ske i opstarten af Linux, hvor man skal give parametren
<userinput>hdX=ide-scsi</userinput>, forudsat at ens brænder har
navnet <userinput>hdX</userinput>. Hvis man er i tvivl, hvilket navn,
brænderen har, kan man bruge følgende kommando, som vil udskrive en
liste over de cd-rom-drev (brænder eller ej), der er fundet af Linux:
</para>

<screen>
<PROMPT>[root@linus /root]#</PROMPT> <USERINPUT>
(cd /proc/ide; for d in hd* ; do [ `<$d/media` == 'cdrom' ] && echo $d; done)
</USERINPUT>
hdc
hdd
</screen>

<para>
I dette tilfælde er der altså to drev i maskinen, og man skal tilføje
<userinput>hdc=ide-scsi hdd=ide-scsi</userinput> som parameter til
kernen. Bruger man LILO til at starte Linux skal man ind og ændre i
<filename>/etc/lilo.conf</filename>, hvor der skal tilføjes en
<userinput>append</userinput> linie:
</para>
<indexterm><primary>LILO</primary><secondary>append ekstra device</secondary></indexterm>

<programlisting>
boot=/dev/hda
map=/boot/map
install=/boot/boot.b
prompt
lba32
timeout=50
append="hdc=ide-scsi hdd=ide-scsi"
image=/boot/vmlinuz-2.4.17-6
        label=linux
        root=/dev/hda5
        read-only
</programlisting>

<para>
Efter tilføjelsen køres <command>/sbin/lilo</command> og maskinen skal
så genstartes for at glemme alt om IDE-drevet.
</para>

<para>
Kører du med <command>loadlin</command> (opstart fra DOS/Windows), så 
kan du lave en linie i <command>autoexec.bat</command> med
</para>

<programlisting>
c:\linux\loadlin c:\linux\vmlinuz.244 root=/dev/hdb5 ro hdc=ide-scsi hdd=ide-scsi
</programlisting>

<para>
Hvis du har <command>loadlin.exe</command> i
<filename>c:\linux</filename> og vil bruge en kerne
<filename>vmlinuz.244</filename> med system-roden på
<filename>/dev/hdb5</filename> og du har de to cd-rom-drev
<filename>hdc</filename> og <filename>hdd</filename>.
</para>


<para>
Efter genstart af systemet kan man nu skrive
</para>

<indexterm><primary>modprobe</primary><secondary>cd-rom</secondary></indexterm>
<indexterm><primary>cd-rom</primary><secondary>modprobe</secondary></indexterm>

<screen>
<PROMPT>[root@linus /root]# </PROMPT><USERINPUT>/sbin/modprobe sg</USERINPUT>
<PROMPT>[root@linus /root]# </PROMPT><USERINPUT>/sbin/modprobe ide-scsi</USERINPUT>
</screen>

<para>
Så skulle IDE-SCSI-emuleringen være i orden, og drevene være synlige
via <command>cdrecord -scanbus</command>.
</para>

<para>
Vil man automatisere dette, så man ikke skal skrive
<command>modprobe</command>-linierne efter hver genstart af maskinen,
kan man på mange distributioner finde filen
<filename>/etc/modules</filename>. I denne fil kan man skrive navne på
moduler, som automatisk skal indlæses ved opstart. Man kan altså
tilføje følgende linier og behøver så ikke tænke på at huske at
indlæse modulerne selv:
</para>

<programlisting>
sg
ide-scsi
</programlisting>

<para>
For at kunne bruge det drev, der er lavet IDE-SCSI-emulering på, som
almindeligt cd-rom-drev også, skal der lige laves en sidste lille
ændring. Følgende symlink er sandsynligvis sat.
</para>

<screen>
<PROMPT>[root@linus /root]#</PROMPT> <USERINPUT>ls -l /dev/cdrom</USERINPUT>
lrwxrwxrwx    1 root     root            4 Dec 30 22:03 /dev/cdrom -> hdb
</screen>

<para>
Eftersom der nu er lavet en IDE-SCSI-emulering, så eksisterer
cd-drevet ikke længere på IDE-bussen på systemet, men på den emulerede
SCSI-bus. Derfor har den også fået et nyt device, nemlig
<filename>/dev/scd0</filename> (tallet nul er dog lidt afhængigt af om
der er andre SCSI-enheder i systemet), og så skal
<filename>/dev/cdrom</filename> også ændres til at pege det korrekte
sted hen.
</para>

<screen>
<PROMPT>[root@linus /root]#</PROMPT> <USERINPUT>rm /dev/cdrom</USERINPUT>
<PROMPT>[root@linus /root]#</PROMPT> <USERINPUT>ln -s /dev/scd0 /dev/cdrom</USERINPUT>
<PROMPT>[root@linus /root]#</PROMPT> <USERINPUT>ls -l /dev/cdrom</USERINPUT>
lrwxrwxrwx  1 root root 4 Dec 30 22:03 /dev/cdrom -> /dev/scd0
</screen>

</sect2>

</sect1>


<sect1 id="X-CD-Roast">
<title>X-CD-Roast</title>
<indexterm><primary>X-CD-Roast</primary></indexterm>
<indexterm><primary>cd-rom</primary><secondary>brændeprogram, X-CD-Roast</secondary></indexterm>

<para>
På <ulink
url="http://www.xcdroast.org">http://www.xcdroast.org</ulink> kan du
finde X-CD-Roast. Få fat i den og installér den. Skal man kunne brænde
cd-rom'er uden at være root bliver man nødt til at sætte suid-bitten på
<filename>xcdroast</filename>. Dette gøres:
</para>

<screen>
<PROMPT>[root@linus /root]# </PROMPT><USERINPUT>which xcdroast</USERINPUT>
/usr/local/bin/xcdroast
<PROMPT>[root@linus /root]# </PROMPT><USERINPUT>chmod +s /usr/local/bin/xcdroast</USERINPUT>
</screen>

<para>
Så skulle det være i orden. Derefter startes
<command>xcdroast</command> hvorefter man lige skal svare på en
en ret morsom "disclaimer".
</para>


<FIGURE ID="xcdroast1-fig" FLOAT="1">
<TITLE>X-CD-Roast</TITLE>
<GRAPHIC FILEREF="xcdroast1.&magic;"  SCALE="50"></GRAPHIC>
</FIGURE>

<para>
Det antages nu at cd-rom-brænderen er sat op til at virke. Det testes
med "Setup".  Under "CD Setup" vælges brænderen som cd-writer-device,
og speed sættes. Eksisterer brænderen ikke under dette punkt, så
skyldes det, at brænderen enten ikke er tilsluttet ordentligt (scsi)
eller at det er en ide-brænder som kræver en
ide-scsi-emuluering. Dette ses i sidste afsnit.  Under "HD Setup"
vælges et image-mount-point (der hvor du monterer dit image).  Her kan
man vælge, hvis man har en hel partition dedikeret til cd-images eller
lignende, at den skal bruge dette. Det er meget praktisk at der mindst
er plads til en enkelt hel cd på den valgte placering. Det er på denne
plads i filsystemet at xcdroast lægger de rippede images.  Under
"Misc" og "Defaults", kan sættes ting som lyd, vinduernes placering,
osv. Disse er dog ikke vigtige for brændingen. Derefter vælges "Save"
og "Done". Nu skulle de øvrige knapper ikke være grå længere, men alle
skulle kunne bruges.  Så afhænger det af hvad man skal brænde. Under
"Copy Data CD" ligger alle de operationer man skal kunne bruge på en
hel cd.
</para>

<FIGURE ID="xcdroast2-fig" FLOAT="1">
<TITLE>X-CD-Roast</TITLE>
<GRAPHIC FILEREF="xcdroast2.&magic;"  SCALE="50"></GRAPHIC>
</FIGURE>

<FIGURE ID="xcdroast0-fig" FLOAT="1">
<TITLE>X-CD-Roast</TITLE>
<GRAPHIC FILEREF="xcdroast0.&magic;"  SCALE="50"></GRAPHIC>
</FIGURE>

<para>
Det skal lige bemærkes at X-CD-Roast bruger <filename>.raw</filename> i
stedet for <filename>.iso</filename> som endelse. Dette ligger kun i
navnet, ikke andet. Skal man derfor bruge det rippede image til noget
hvor denne endelse er vigtig, kan man bare lave et symlink med det
andet navn. De rippede (eller andre) images skal dog have endelse
<filename>.raw</filename> for at X-CD-Roast vil kendes ved dem. Der er
heller ikke noget krav til at de faktisk skal ligge i
<filename>/image</filename>-kataloget:
</para>

<screen>
<PROMPT>[root@linus /root]#</PROMPT> <USERINPUT>ls -l</USERINPUT>
total 1
lrwxrwxrwx 1 root root   38 Jun 14 20:32 Mandrake-7.1-ext.raw -> /var/ftp/pub/iso/Mandrake-7.1-ext.iso
lrwxrwxrwx 1 root root   39 Jun 14 19:32 Mandrake-7.1inst.raw -> /var/ftp/pub/iso/Mandrake-7.1-inst.iso
lrwxrwxrwx 1 root root   32 Apr  3 19:19 Redhat61.raw -> /var/ftp/pub/iso/RedHat-6.1.iso
lrwxrwxrwx 1 root root   32 Apr  3 19:19 Redhat62.raw -> /var/ftp/pub/iso/RedHat-6.2.iso
drwxr-xr-x 2 root root 1024 Feb 29 20:26 tmp
</screen>

<para>
Under "Copy Audio CD" er der samme features som ved data. Dette virker
bare på audio-cd'er i stedet:
</para>

<FIGURE ID="xcdroast3" FLOAT="1">
<TITLE>X-CD-Roast</TITLE>
<GRAPHIC FILEREF="xcdroast3.&magic;"  SCALE="50"></GRAPHIC>
</FIGURE>

<para>
Skal man nu selv til at lægge et filsystem ud på cd, gøres det under punktet
"Master CD". Under Master from/to kan man nu vælge
den del af filsystemet man ønsker at brænde ud. Følgende valg vil lave
et master image med <filename>/home</filename> hvor
<filename>/home/ftp</filename> ikke er på. Vælg "Master Image" og
derefter "Write Image", så er du i gang.
</para>


<FIGURE ID="xcdroast4" FLOAT="1">
<TITLE>X-CD-Roast</TITLE>
<GRAPHIC FILEREF="xcdroast4.&magic;"  SCALE="50"></GRAPHIC>
</FIGURE>

<para>
Mere om X-CD-Roast og opsætning af brænder
<filename>/usr/local/xcdroast-0.96ex/README*</filename> eller hvor du
nu ellers installerede <command>xcdroast</command>.
</para>
</sect1>

<sect1 id="cdrecord">
<title>Brænde cd-rom med cdrecord</title>
<!-- Skrevet af Gert Holtoft <holtoft@get2net.dk> -->
<indexterm><primary>cdrecord</primary></indexterm>
<indexterm><primary>cd-rom</primary><secondary>brændeprogram, cdrecord</secondary></indexterm>

<para>
Det bliver nu gennemgået, hvorledes man kan brænde en cd udelukkende
ved hjælp af <command>cdrecord</command>, altså uden en grafisk
overbygning. Det forudsættes at brænderen er sat op og virker. Vi kan
derfor, som omtalt i kapitlets indledning, finde brænderens nummer ved
hjælp af kommandoen <command>cdrecord -scanbus</command>.
</para>

<screen>
<PROMPT>[root@linus /root]#</PROMPT> <USERINPUT>cdrecord -scanbus</USERINPUT>
Cdrecord 1.11a12 (i586-mandrake-linux-gnu) Copyright (C) 1995-2001 Jörg Schilling
Linux sg driver version: 3.1.22
Using libscg version 'schily-0.5'
scsibus0:
        0,0,0     0) 'PIONEER ' 'CD-ROM DR-744   ' '1.02' Removable CD-ROM
        0,1,0     1) 'LITE-ON ' 'LTR-12101B      ' 'LS3J' Removable CD-ROM
        0,2,0     2) *
        0,3,0     3) *
        0,4,0     4) *
        0,5,0     5) *
        0,6,0     6) *
        0,7,0     7) *
</screen>

<para>
Brænderen har i dette tilfælde nummeret <userinput>0,1,0</userinput>,
og dette nummer bruges i de følgende eksempler, hvor der angives
<userinput>dev=0,1,0</userinput>. Der skal muligvis skiftes ud med et
andet nummer, som man selv kan finde med <command>cdrecord
-scanbus</command>.
</para>

<sect2 id="cdrom-skrivning">
<title>Skrivning og brænding af et data-image</title>

<para>
Læg alle libs og filer i et bibliotek (eks. <filename>/test</filename>)
Vedtag et navn for dit cd-image (f.eks. <filename>mine_ting</filename>).
</para>

<para>
Lav dit cd-rom-image med <command>mkisofs</command>:
</para>

<screen>
<PROMPT>[root@linus /test]#</PROMPT> <USERINPUT>mkisofs  -r  -o  mine_ting  /test/</USERINPUT>
</screen>


<para>
Ønskes et mere Windows-venligt image, bruges -J option (Joliet)
</para>

<screen>
<PROMPT>[root@linus /test]#</PROMPT> <USERINPUT>mkisofs  -r  -J  -o  mine_ting /test/</USERINPUT>
</screen>

<para>
Test indholdet med følgende kommando:
</para>

<screen>
<PROMPT>[root@linus /test]#</PROMPT> <USERINPUT>mount -t iso9660 -o ro,loop=/dev/loop0  mine_ting /mnt</USERINPUT>
</screen>

<para>
I <filename>/mnt</filename> kan indholdet checkes. Afmontér dernæst
med kommandoen <command>umount mine_ting /mnt</command>.
</para>
</sect2>

<sect2 id="braende-cdrom">
<title>Cd-rom brændes</title>
	
<para>
Du kan nu brænde din cd-rom med kommandoen:
</para>

<indexterm><primary>cdrecord</primary></indexterm>

<screen>
<PROMPT>[root@linus /test]#</PROMPT> <USERINPUT>cdrecord -v speed=2 dev=0,1,0 -data mine_ting</USERINPUT>
</screen>

<para>
Man kan også være smart og kombinere <command>mkisofs</command> og
<command>cdrecord</command> via en fifo-fil (dvs. en bufferfil, så man
kommer aldrig til at fylde en hel cd-rom på harddisken):
</para>

<screen>
<PROMPT>[root@linus /test]#</PROMPT> <USERINPUT>mkfifo image.iso</USERINPUT>
<PROMPT>[root@linus /test]#</PROMPT> <USERINPUT>mkisofs -r -J -o image.iso STI_TIL_DATA  &</USERINPUT>
<PROMPT>[root@linus /test]#</PROMPT> <USERINPUT>cdrecord -v dev=0,1,0 -eject speed=4 -data image.iso</USERINPUT>
<PROMPT>[root@linus /test]#</PROMPT> <USERINPUT>rm image.iso</USERINPUT>
</screen>

<para>
I dette eksempel skal du selv rette <filename>STIL_TIL_DATA</filename>
til der hvor dine data-filer ligger. Til
<command>cdrecord</command>-kommandoen anvendes 4 gange
skrivehastighed og cd-rom'en skubbes ud efter skrivning (-eject).
</para>

<para>
En langt mere interessant metode er at oprette en fil på 650/700 Mb
(alt efter mediestørrelse), som så fyldes med diverse ting og sager og
derefter brændes som et iso-image.
</para>

<para>
Oprettelse af filen  <filename>test.iso</filename>:
</para>

<screen>
<PROMPT>[root@linus /test]#</PROMPT> <USERINPUT>dd if=/dev/zero of="test.iso" bs=1024k count=650/700</USERINPUT>
</screen>

<para>
Opret et ext2-filsystem på denne fil:
</para>

<screen>
<PROMPT>[root@linus /test]#</PROMPT> <USERINPUT>/sbin/mke2fs -b 2048 test.iso</USERINPUT>
</screen>

<para>
Til spørgsmålet "test.iso is not a block device", skal du bare sige
"y" for "yes - proceed anyway".
</para>

<para>
Montér filen med:	
</para>

<screen>
<PROMPT>[root@linus /test]#</PROMPT> <USERINPUT>mount -t ext2 -o loop=/dev/loop1 test.iso /mnt</USERINPUT>
</screen>
	
<para>
Kopiér hvad du har lyst til, til <filename>/mnt</filename> og afmontér
den med kommandoen <command>umount test.iso /mnt</command>.
</para>


<para>
Du kan nu brænde en cd-rom med kommandoen:
</para>


<indexterm>
 <primary>cdrom</primary>
 <secondary>brænde</secondary>
</indexterm>

<indexterm>
 <primary>cdrecord</primary>
</indexterm>


<screen>
<PROMPT>[root@linus /test]#</PROMPT> <USERINPUT>cdrecord -v speed=2 dev=0,1,0 -data test.iso</USERINPUT>
</screen>


<para>
Det er jo dejligt at kunne redigere frit i et "iso-image" der jo kun
er "read only". Den sidste gode ting med data-medier er direkte og rå
kopiering fra cd-rom (her <filename>/dev/hdb</filename>) til brænder. 
Kommandoen er:
</para>


<screen>
<PROMPT>[root@linus /test]#</PROMPT> <USERINPUT>cdrecord -v dev=0,1,0 speed=2 -isosize /dev/hdb</USERINPUT>
</screen>



<para>
Skulle kildemediet være større end modtagermediet, kommer der automatisk en
fejlmelding fra cdrecord, og der bliver ikke brændt noget.
Denne detalje virker ikke med en musik-cd.
</para>

<indexterm><primary>cd-rom</primary><secondary>brændeprogram, cdparanoia</secondary></indexterm>
<indexterm><primary>musik-cd</primary><secondary>cdparanoia</secondary></indexterm>
<indexterm><primary>cdparanoia</primary></indexterm>
</sect2>

<sect2 id="musik-cd">
<title>Musik cd brændes</title>

<para>
Hvis man vil lave en musik cd, som kan afspilles i et normalt
stereoanlæg, skal man først sørge for at den musik, man ønsker på sin
cd, findes på harddisken i wav-format; der skal være én fil for hvert
nummer, man vil have på den færdige cd.
</para>

<para>
Hvis udgangspunktet for cd'en er komprimeret musik i form af mp3-
eller ogg-filer, skal disse derfor først laves om til wav-filer. De
fleste programmer til at afspille komprimerede filer har mulighed for
at lave en wav-fil i stedet for at afspille lyden. Hvis man for
eksempel har filen <filename>Hestevise.mp3</filename> kan den laves om
til <filename>Hestevise.wav</filename> ved hjælp af programmet
<command>mpg123</command>:
</para>

<screen>
<prompt>[tux@linus musik]$</prompt> <userinput> mpg123 -w Hestevise.wav Hestevise.mp3</userinput>
</screen>

<para>
På tilsvarende vis kan filen <filename>Ulilang.ogg</filename> laves om
til <filename>Ulilang.wav</filename> ved hjælp af
<command>ogg123</command>:
</para>

<screen>
<prompt>[tux@linus musik]$</prompt> <userinput>ogg123 -d wav -f Ulilang.wav Ulilang.ogg</userinput>
</screen>

<para>
Denne konvertering til wav-filer skal gøres for hver enkelt nummer,
der skal med på cd'en.
</para>

<para>
Hvis musikken, der skal brændes, forefindes på en musik cd i forvejen
(og der altså skal laves en kopi) kan programmet
<command>cdparanoia</command> bruges til at danne de nødvendige
wav-filer ud fra original cd'en. Med originalen i cd-rom-drevet kan
man med følgende kommando få de enkelte numre gemt i filerne
<filename>track01.cdda.wav</filename>,
<filename>track02.cdda.wav</filename> og så videre. Operationen kan
tage lang tid; dette afhænger meget af hvilken model cd-rom-drev, der
anvendes.
</para>

<screen>
<prompt>[tux@linus musik]$</prompt> <userinput>cdparanoia -B 1-</userinput>
</screen>

<para>
Hvis ikke hele cd'en skal kopieres, kan man også nøjes med at overføre
et enkelt nummer. For eksempel kan nummer fire dannes i filen
<filename>track04.cdda.wav</filename> med kommandoen
<command>cdparanoia -B 4</command>. Det kan være en god idé at give
filerne et mere sigende navn når de er blevet overført.
</para>

<!-- Indsæt noget om "volume normalization" her -->

<para>
Når alle de numre, der skal på musik cd'en, ligger som wav-filer, er
de klar til at blive brændt. Da alle filerne nu er wav-filer, er det
herefter ligegyldigt hvorvidt filerne oprindeligt kom fra komprimerede
mp3- eller ogg-filer, fra en eller flere cd'ere, eller en kombination
af det hele. Wav-filerne kan brændes til en cd med følgende kommando:
</para>

<screen>
<PROMPT>[root@linus musik]#</PROMPT> <USERINPUT>cdrecord speed=2 dev=0,1,0 track01.cdda.wav track02.cdda.wav</USERINPUT>
</screen>

<para>
Hver enkelt musikfil, som skal med på cd'en, skal angives i denne
kommando. I dette eksempel vil cd'en derfor komme til at bestå af blot
to numre. På den færdige cd kommer numrene til at ligge i samme
rækkefølge, som man angiver filnavnene i. Da numrenes rækkefølge ofte
har betydning er det derfor ofte ikke nok blot at angive filnavnene;
rækkefølgen af de enkelte filnavne må også overvejes.
</para>

<para>
Normalt bliver der indsat en pause på cirka to sekunder mellem hvert
nummer på cd'en. Dette er ofte intet problem, men hvis man laver en
kopi af en cd hvor de enkelte numre glider sammen, kan pausen i kopien
være meget irriterende. Dette problem gør sig især gældende ved
live-optagelser. Pausen mellem numrene kan undgås ved at bruge "disk
at once" brænding, hvor hele cd'en brændes i én køre, modsat normal
"track at once" brænding, hvor de enkelte numre brændes individuelt.
"Disk at once" brænding aktiveres ved hjælp af <command>-dao</command>
og det tidligere eksempel ser så ud som følger:
</para>

<screen>
<PROMPT>[root@linus musik]#</PROMPT> <USERINPUT>cdrecord speed=2 dev=0,1,0 -dao track01.cdda.wav track02.cdda.wav</USERINPUT>
</screen>


<para>
Ud over manualerne til de anvendte programmer (<command>man
cdrecord</command>, <command>man mkisofs</command> og <command>man
cdparanoia</command>) er CD-Writing-HOWTO <ulink
url="http://sunsite.dk/ldp/HOWTO/CD-Writing-HOWTO.html">http://sunsite.dk/ldp/HOWTO/CD-Writing-HOWTO.html</ulink>
en god resurse omkring brænding af cd'ere.
</para>

</sect2>

</sect1>

</chapter>

