<!-- $Id$ -->
<chapter id="docbook">
<title>DocBook</title>

<para>
DocBook er et sæt af stylesheets, som beskriver hvordan man laver en
bog, artikel eller lignende ud af tekstfiler. DocBook er ligesom
LaTeX således <emphasis>ikke</emphasis> et grafisk miljø hvor man
skriver og kan se resultatet grafisk som det er tilfældet med Word,
WordPerfect eller StarOffice. Den store fordel med DocBook er at der
er gode værktøjer til at oversætte DocBook til HTML, PostScript, RTF
og PDF og få et pænt og ensartet resultat.
</para>

<para>
Før vi tager fat på installation og en teknisk gennemgang af det
"sprog" man skal skrive i - med en vilkårlig teksteditor - så er der i 
<xref linkend="docbook-ex1"/> et eksempel på lidt tekst skrevet i
DocBook. Som det kan ses så er det kildeteksten til teksten ovenfor som
er vist. DocBook minder meget om at skrive HTML-kode - dvs. koderne 
afgrænses som &lt;KODEN&gt;.
</para>

<para>
Grunden til at denne bogserie er skrevet i DocBook er at det var sjovt at
prøve. Det har vist sig at det fungerer godt med automatiske
krydshenvisninger; det er nemt at håndtere store bogværker på denne
måde.
Da alle filerne der skrives i "ren ASCII" (tekst-filer), kan flere
personer nemmere redigere i de samme filer samtidigt, og disse 
ændringer kan så blandes sammen med <command>patch</command> kommandoen.
</para>

<example id="docbook-ex1">
<title>Eksempel på DocBook kode</title>
<indexterm><primary>DocBook, eksempel på kode</primary></indexterm>
<programlisting>
&lt;chapter id="docbook"&gt;
&lt;title&gt;DocBook&lt;/title&gt;

&lt;para&gt;
DocBook er et sæt af stylesheets, som beskriver hvordan man laver en
bog, artikel eller lignende ud af tekstfiler. DocBook er ligesom
LaTeX således &lt;emphasis&gt;ikke&lt;/emphasis&gt; et grafisk miljø hvor man
skriver og kan se resultatet grafisk som det er tilfældet med Word,
WordPerfect eller StarOffice. Den store fordel med DocBook er at der
er gode værktøjer til at oversætte DocBook til HTML, PostScript, RTF
og PDF og få et pænt resultat.
&lt;/para&gt;
</programlisting>

</example>

<sect1 id="docbook-Installation">
<title>Installation af Docbook værktøjer</title>
<indexterm><primary>installation</primary></indexterm>

<para>
En engelsk installationsvejledning kan findes på følgende URL;
</para>

<para>
<ulink
url="http://www.tldp.org/HOWTO/mini/DocBook-Install/index.html">http://www.tldp.org/HOWTO/mini/DocBook-Install/index.html</ulink>.
Nedenfor er en kort vejledning på dansk.
</para>

<para>
Man kan som regel installere docbook systemet ved under
system-installation (eller system-opgradering) at medtage
"document processing".
</para>


<para>
På Mandrake 9.1 er det ret enkelt at få DocBook værktøjerne til at virke.
Installer følgende pakker med <command>urpmi</command> (efterfulgt af 
følgende navne). Dette gøres som root.
</para>

<screen>
docbook-dtd412-xml
docbook-style-dsssl
docbook-dtd41-sgml
docbook-style-xsl
docbook-dtd30-sgml
docbook-dtd42-xml
docbook-utils-pdf
docbook-dtd31-sgml
docbook-utils
openjade
jadetex
libopenjade0
</screen>


<para>
Hvis du bruger en af de distributioner,
som har det hele med, kan du afprøve installationen ved for eksempel at
bruge docbook-eksemplet, der kan hentes fra bogens hjemmeside under
eksempler, eller med <xref linkend="dokumentation-hallo-hallo"/>
hallo-bog eksemplet her.
</para>

<example  id="dokumentation-hallo-hallo">
<title>Hallo-hallo-bog</title>
<programlisting>

&lt;!DOCTYPE book PUBLIC "-//OASIS//DTD DocBook V4.1//EN">

&lt;book id="index" lang="da">

&lt;chapter id="hellobog-minikapitel">&lt;title>Sgml-afprøvning&lt;/title>
&lt;sect1 id="hellobog-minisect">
&lt;title>Hallo, hallo!&lt;/title>

&lt;para>
Hallo, Verden! Hallo, hallo! Her kommer indholdet i den nye bog.
Disse linjer ender med at blive en paragraf i den færdige bog.
For at kunne se, hvordan linjeombrydning fungerer, er denne
paragraf lidt længere end de berømte ord, Hello, World! 
&lt;/para>

&lt;para>
Hvis du vil se et lidt længere eksempel med flere elementer og et
billede, kan du hente og udpakke docbook-eksemplet fra bogens
hjemmeside.
&lt;/para>

&lt;/sect1>
&lt;/chapter>
&lt;/book>
</programlisting>
</example>

<para>
Du kan selvfølgelig også afprøve systemet ved at bruge
sgml-filerne til andre bøger i denne serie. Så skal du huske at
flytte billederne ned fra *_images/ directory'et til directory'et
med .sgml filerne, husk at rette magic.sgml, så der står
<emphasis>png</emphasis> i stedet for eps. 
</para>

<para>
Når man står i directory'et med .sgml filerne og skriver følgende
kommando, skal systemet generere en .pdf fil.
</para>

<screen>
<prompt>[root@MinMaskine RPMS]#</prompt> <userinput>db2pdf bog.sgml</userinput>
</screen>

<para>
Og hvis det fungerer er alt jo godt
<footnote><para>Mandrake 9.x og SuSE 8.1 samt Red Hat 8.0 kører
med det samme, hvis du har valgt de relevante pakker. Vi kan
ikke anbefale Red Hat 7.0, 7.1 og 7.2, da der har været mange
problemer med at få deres docbook output til at fungere. Fejlene
er rettede i senere versioner, så Red Hat 7.3 og 8.x fungerer uden
problemer - og hvis man hellere vil baglæns, så kan man stadig få
Red Hat 6.2 - docbook pakker til at fungere på en intel-baseret
Linux.</para></footnote>
</para>

<para>
Hvorfor ikke installere det hele selv fra source? Det kan man
selvfølgelig godt, men der er så mange pakker, der skal spille
sammen, så det er faktisk ret svært og måske grænser det til
spild af tid, når nu andre har gjort det for en. Men - hvis du
prøver, vil vi gerne høre resultatet.
</para>

<para>
Hvis du kører Red Hat-8.0, Mandrake-9.0, eller SuSE kan du regne
med, at tingene fungerer med det samme, du har installeret.
</para>


<para>
Man kan med for eksempel Red Hat bruge en fil-manager til at kigge på
CD-Rom RPM-filerne, og så installere med point-and-click. 
</para>

<para>
Du kan også hente docbook pakker ved at følge links fra linuxdoc
(se ovenfor) eller hente RPM-pakker fra Red Hat. Hvis du gør det,
så skal du ikke bruge installations-CD'erne og får ofte en nyere
version ud af det. Med undtagelse af openjade*rpm skulle der ikke
være noget i vejen for at bruge nyere pakker på en ældre
installation. Se i øvrigt afsnittet i Sysadm-bogen om
pakke-administration.
<ulink url="http://&linuxbogurl;/admin/bog/rpm.html">&linuxbogurl;/admin/bog/rpm.html</ulink>
</para>

<para>
Med installations - CD'er er fremgangsmåden som følger:
</para>
<para>
Man "mounter" den første CD. Hvis ikke desktoppen selv gør det
(hvis man ikke har slået det fra) så skal man på en kommandolinje
skrive:
</para>

<screen>
<prompt>[root@MinMaskine RPMS]#</prompt> <userinput>mount /dev/cdrom </userinput>
<prompt>[root@MinMaskine RPMS]#</prompt> <userinput>cd /mnt/cdrom/Red Hat/RPMS </userinput>
</screen>

<para>
Kommandoen "cd /mnt/cdrom/Red Hat/RPMS" gør, at man "står" i det
katalog (directory) hvor pakkerne ligger. Nu kan vi installere, kør:
</para>

<itemizedlist mark="bullet">
<listitem>
 <para>
Red Hat 7.3 - cd-rom 1:
 </para>

<screen>
<prompt>[root@MinMaskine RPMS]#</prompt> <userinput>rpm -Uvh --nodeps docbook*.rpm</userinput>
<prompt>[root@MinMaskine RPMS]#</prompt> <userinput>rpm -Uvh --nodeps sgml-common-*.rpm</userinput>
</screen>

<para>
Kommandolinjetilvalget "<literal>--nodeps</literal>" er brugt
her for at undgå et
stop, hvis du kommer til at installere i forkert rækkefølge.
Det skyldes RPM-kontrol af, om forudsætninger for anvendelse af
et stykke software er til stede. Det kan du læse mere om i
administrations-bogen.
</para>

<para>
Skift til CD nummer to:
</para>

<screen>
<prompt>[root@MinMaskine RPMS]#</prompt> <userinput>cd / </userinput>
<prompt>[root@MinMaskine RPMS]#</prompt> <userinput>umount /dev/cdrom </userinput>
<prompt>[root@MinMaskine RPMS]#</prompt> <userinput>mount /dev/cdrom </userinput>
<prompt>[root@MinMaskine RPMS]#</prompt> <userinput>cd - </userinput>
</screen>

</listitem>

<listitem> 

 <para>
Red Hat 7.3 - cd-rom 2:
 </para>

<screen>
<prompt>[root@MinMaskine RPMS]#</prompt> <userinput>rpm -Uvh --nodeps openjade*.rpm</userinput>
<prompt>[root@MinMaskine RPMS]#</prompt> <userinput>rpm -Uvh --nodeps jadetex*.rpm</userinput>
<prompt>[root@MinMaskine RPMS]#</prompt> <userinput>rpm -Uvh --nodeps docbook*.rpm</userinput>
<prompt>[root@MinMaskine RPMS]#</prompt> <userinput>rpm -Uvh --nodeps tetex*.rpm</userinput>
</screen>

</listitem>

<listitem> 

 <para>
Red Hat 7.3 - cd-rom 3, hvis du vil have tetex dokumentationen med:
 </para>

<screen>
<prompt>[root@MinMaskine RPMS]#</prompt> <userinput>rpm -Uvh tetex*.rpm</userinput>
</screen>

</listitem>
</itemizedlist>

 <para>
Princippet er det samme for andre RPM-baserede systemer (fx.
Mandrake). SuSE Yast2 og DEBIAN apt-get følger samme principper
som RPM, men har helt andre kommandolinjetilvalg og kræver
andre opsætningsfiler. Til gengæld kan man med en hurtig
internetforbindelse her gratis drage fordel af, at apt-get kan
have en liste af servere, hvorfra friske pakker kan hentes.
</para>

<para>
Se afsnit om administration af softwarepakker i sysadm-bogen
eller på <ulink url="http://www.rpm.org">http://www.rpm.org</ulink>.
</para>

<para>
Dette burde være nok til at installere pakkerne. Hvis du har
problemer efter installationen, kan du følge vejledningen fra
Norman Walsh, som du kan finde her.  <ulink
url="http://docbook.sourceforge.net/projects/dsssl/">
http://docbook.sourceforge.net/projects/dsssl/</ulink>
</para>

<para>
Norman Walsh har skrevet de "modulære docbook-style sheets". Hans
anvisninger er jo de korrekte for fejlfinding af en installation,
men på den anden side, hvis der er problemer, og man har mulighed
for at installere pakkerne fra en nyere version af sit system, så
er det som regel en hurtigere løsning.
</para>

<para>
Grunden til, at vi skriver så meget om, hvad man skal gøre i
tilfælde af fejl, er selvfølgelig, at vi er nogle stykker, som
har kæmpet mod underlige fejl og har haft svært ved at finde en
udvej; vi vil gerne hjælpe, hvis du sender en mail.
</para>

<para>
Se evt. også <ulink url="http://hvdkooij.xs4all.nl/docs-docbook.cms">http://hvdkooij.xs4all.nl/docs-docbook.cms</ulink>.
</para>

<para>
Der er en enkelt pakke man nok skal opdatere - læs mere på
<ulink url="http://www.redhat.com/support/errata/RHEA-2001-167.html">http://www.redhat.com/support/errata/RHEA-2001-167.html</ulink>.
</para>

</sect1>



<sect1 id="docbook-igang">
<title>Igang med Docbook</title>

<para>
Når man skal igang med docBook er det nemmest at have en model,
en tom ramme, som man så kan starte med at skrive i med det
samme. Du kan for eksempel fjerne alle paragraffer i eksemplet, som følger
med denne bog, og skrive i de rensede filer. <!--TODO: Lav en tom
ramme til den stakkels begynder! -->
</para>

<para>
DocBook-dokumentationen ligger på <ulink
url="http://www.oasis-open.org/docbook/">http://www.oasis-open.org/docbook/</ulink>. 
Her kan du finde information om alle de elementer, som kan anvendes. Desværre
må man sige, at det er en ringe hjælp for dem som skal igang med at
skrive for første gang. Det skal denne bog råde bod på. Først ser
vi på et par af de vigtigste SGML-elementer og senere hvordan man bruger
dem til at lave et helt dokument.
</para>

<para>
Det første vi skal vide er at alle elementer åbnes og lukkes med et mærke.
&Aring;bningsmærket starter med &lt; fulgt af elementets navn, eventuelle
atributter og til sidst &gt;.  Afslutningsmærket er blot &lt;/ fulgt af elementets navn og &gt;.
Et eksempel er <literal>&lt;command&gt;</literal>ls -l<literal>&lt;/command&gt;</literal> som markerer at strengen "<literal>ls -l</literal>" er en kommando.
</para>

<indexterm><primary>&gt;</primary></indexterm>
<indexterm><primary>&lt;</primary></indexterm>

<para>
Ud over at &lt; har speciel betydning, så har &amp; også speciel
betydning. Det betyder, at du ikke kan skrive <literal>&lt;</literal> og <literal>&amp;</literal>
<emphasis>direkte</emphasis> i din tekst, men i stedet må man skrive
<literal>&amp;lt;</literal> og <literal>&amp;amp;</literal> (Du
kan så vælge også at skrive &gt; som &amp;gt; - men det er ikke
tvungent). Tegn, som ikke opfører sig almindeligt, kaldes
<emphasis>metategn</emphasis>.
</para>



<sect2 id="docbook-para">
<title>Tekstblokke - para</title>
<indexterm><primary>para</primary></indexterm>
<indexterm><primary>SGML-elementer</primary><secondary>para</secondary></indexterm>
<para>
Alle tekstblokke skal indkapsles med <command>&lt;para&gt;</command>
og <command>&lt;/para&gt;</command>. Linjedeling overlades til
docbook-formateringsprogrammerne. Hvis man skriver et linjeskift
midt i en &lt;para&gt; blok, ignorerer docbook-programmerne det.
</para>

<para>
Hvis man vil have linjeskift, må man slutte paragraffen og enten
starte en ny paragraf, en liste, en SCREEN, eller, hvis man
foretrækker det, skrive al sin tekst som programlisting, så får
man docbook til at acceptere ren asciitekst, "typewriter-style".
</para>

<indexterm><primary>&lt;br&gt;</primary><secondary>DocBook</secondary></indexterm>
<para>
Der findes ikke en &lt;br&gt;-konstruktion som man kender det fra HTML.
</para>

<!-- Man kan kun få linjedeling ved at
lade SGML gøre dette automatisk eller 
stoppe blokken og starte en ny.-->


<example>
<title>para</title>
<programlisting>
&lt;para&gt;
Dette er en tekstblok.
&lt;/para&gt;

&lt;para&gt;
Dette er en anden tekstblok, som starter på ny linje.
&lt;/para&gt;
</programlisting>

<para>
Dette kommer til at se ud som: 
</para>

<para>
Dette er en tekstblok.
</para>

<para>
Dette er en anden tekstblok, som starter på ny linje.
</para>
</example>

<sect3 id="docbook-command">
<title>Kommandoer - command</title>
<indexterm><primary>SGML-elementer</primary><secondary>command</secondary></indexterm>
<indexterm><primary>command</primary></indexterm>
<para>
I en <command>&lt;para&gt;</command> block skal man
måske indikere at nu kommer der en kommando, som kan
køres. 
</para>

<example>
<title>command</title>
<programlisting>
I Linux kan man skrive &lt;command&gt;find / -name
"*.htm?"&lt;/command&gt; for at finde HTML-filer.
</programlisting>

<para>
Dette kommer til at se ud som:
</para>

<para>
I Linux kan man skrive <command>find / -name
"*.htm?"</command> for at finde HTML-filer.
</para>
</example>

</sect3>

<sect3 id="docbook-filename">

<title>Filer - filename</title>
<indexterm><primary>filename</primary></indexterm>
<indexterm><primary>SGML-elementer</primary><secondary>filename</secondary></indexterm>
<para>
For at indikere et filnavn i en
<command>&lt;para&gt;</command> kan man bruge
<command>&lt;filename&gt;</command>
</para>

<example>
<title>filename</title>

<programlisting>
Linux har altid filen &lt;filename&gt;/etc/password&lt;/filename&gt;.
</programlisting>

<para>
Dette kommer til at se ud som:
</para>

<para>
Linux har altid filen <filename>/etc/password</filename>.
</para>
</example>
</sect3>

<sect3 id="docbook-emphasis">
<title>Skråskrift - emphasis</title>
<indexterm><primary>emphasis</primary></indexterm>
<indexterm><primary>SGML-elementer</primary><secondary>emphasis</secondary></indexterm>

<para>
For at markere en del af sætningen med kursiv skrift i en
<command>&lt;para&gt;</command> kan man bruge
<command>&lt;emphasis&gt;</command>
</para>

<example>
<title>emphasis</title>

<programlisting>
Linux giver &lt;emphasis&gt;mange&lt;/emphasis&gt; muligheder.
</programlisting>

<para>
Dette kommer til at se ud som:
</para>

<para>
Linux giver <emphasis>mange</emphasis> muligheder.
</para>
</example>

</sect3>

<sect3 id="docbook-ulink">

<title>URL - ulink</title>
<indexterm><primary>ulink</primary></indexterm>
<indexterm><primary>SGML-elementer</primary><secondary>ulink</secondary></indexterm>
<para>
For at markere en URL i en
<command>&lt;para&gt;</command> kan man bruge
<command>&lt;ulink&gt;</command>
</para>

<example>
<title>ulink</title>

<programlisting>
Læs om SSLUG på
&lt;ulink url="http://www.sslug.dk"&gt;SSLUG's hjemmeside http://www.sslug.dk&lt;/ulink&gt;. Der er
mange aktiviteter.
</programlisting>

<para>
Dette kommer til at se ud som:
</para>

<para>
Læs om SSLUG på
<ulink url="http://www.sslug.dk">SSLUG's hjemmeside http://www.sslug.dk</ulink>. Der er
mange aktiviteter.
</para>
</example>

</sect3>

</sect2>



<sect2 id="docbook-programlisting">
 <title>Vise kildetekst og skærmbilleder - programlisting og screen</title>

 <indexterm>
  <primary>programlisting</primary>
 </indexterm>

 <indexterm>
  <primary>screen</primary>
 </indexterm>

 <indexterm>
  <primary>SGML-elementer</primary>
  <secondary>programlisting</secondary>
 </indexterm>

 <indexterm>
  <primary>SGML-elementer</primary>
  <secondary>screen</secondary>
 </indexterm>

 <para>
  Har man brug for at vise noget kildetekst bør man sætte det ind i et
  "programlisting"-element. Hvis man derimod vil vise noget der står på
  skærmen bør man sætte det ind i et "screen"-element. Både i
  "programlisting"- og "screen"-elementer følger linjeskiftene i uddata
  (selvfølgelig) linjeskiftene i SGML/XML-koden.
 </para>

<!--
   Det er noget vrøvl at "programlisting"- og "screen"-elementer ikke
   kan stå indeni "para"-elementer.
-->

 <example>
  <title>programlisting</title>

  <para>
   Koden:

<programlisting>
&lt;para&gt;
Nu vil jeg vise lidt Perl-kode
&lt;/para&gt;

&lt;programlisting&gt;
#!/usr/bin/perl -i.bak -p
s/Microsoft/Linux/g;
&lt;/programlisting&gt;
</programlisting>

  vil resultere i disse uddata:
 </para>

<para>
Nu vil jeg vise lidt Perl-kode
</para>

<programlisting>
#!/usr/bin/perl -i.bak -p
s/Microsoft/Linux/g;
</programlisting>
 </example>

 <sect3 id="docbook-screen">
  <title>Elementer i "screen"-elementet</title>

  <indexterm>
   <primary>prompt</primary>
  </indexterm>

  <indexterm>
   <primary>userinput</primary>
  </indexterm>

  <indexterm>
   <primary>SGML-elementer</primary>
   <secondary>prompt</secondary>
  </indexterm>

  <indexterm>
   <primary>SGML-elementer</primary>
   <secondary>userinput</secondary>
  </indexterm>

  <para>
   For at kunne skelne mellem hvad et program udskriver og hvad brugeren
   taster, så anvender jeg et par Docbook elementer inden i
   "screen"-elementet. "prompt" bruges til spørgsmål til brugeren og
   "userinput" bruges til det brugeren indtaster.
  </para>

  <example>
   <title>"prompt" og "userinput" i et "screen"-element</title>

<programlisting>
&lt;programlisting&gt;
&lt;prompt&gt;[root@tyge /root]# &lt;/prompt&gt; &lt;userinput&gt;ls -al /etc/passwd&lt;/userinput&gt;
-rw-r--r-- 1 root root 649 jun 16 21:54 /etc/passwd 
&lt;/programlisting&gt;
</programlisting>

   <para>
    Dette kommer til at se ud som:

<programlisting>
<prompt>[root@tyge /root]# </prompt> <userinput>ls -al /etc/passwd</userinput>
-rw-r--r-- 1 root root 649 jun 16 21:54 /etc/passwd 
</programlisting>
   </para>
  </example>
 </sect3>
</sect2>

<sect2 id="docbook-tabeller-etc">
<title>Tabeller, figurer, kommentarer og lister</title>

<sect3 id="docbook-table">

<title>Tabeller - tabel</title>
<indexterm><primary>table</primary></indexterm>
<indexterm><primary>SGML-elementer</primary><secondary>table</secondary></indexterm>
<para>
Tabeller laves med
<command>&lt;table&gt;</command>. Bemærk at denne ikke må
være inden i en <command>&lt;para&gt;</command>. I
eksemplet skal med <command>cols=</command> angives
antallet af søjler. Indrykningen har ingen betydning for
resultatet, og anvendes alene til at man selv har
overblik over koderne. Igen bemærkes, at det er
ligegyldigt om man anvender store eller små bogstaver.
</para>

<example>
<title>table</title>

<programlisting>
&lt;TABLE id="db-firmaet"&gt;
&lt;TITLE&gt;Firma-tabel&lt;/TITLE&gt;
&lt;TGROUP cols=3 align="char"&gt;
&lt;THEAD&gt;
  &lt;ROW&gt;
   &lt;ENTRY&gt;FirmaNavn&lt;/ENTRY&gt;
   &lt;ENTRY&gt;Vej&lt;/ENTRY&gt;
   &lt;ENTRY&gt;PostNr&lt;/ENTRY&gt;
  &lt;/ROW&gt;
&lt;/THEAD&gt;
&lt;TBODY&gt;
&lt;ROW&gt;
 &lt;ENTRY&gt;Vagabondos&lt;/ENTRY&gt;
 &lt;ENTRY&gt;Tagensvej 100&lt;/ENTRY&gt;
 &lt;ENTRY&gt;2200&lt;/ENTRY&gt;
&lt;/ROW&gt;
&lt;ROW&gt;
 &lt;ENTRY&gt;DKUUG&lt;/ENTRY&gt;
 &lt;ENTRY&gt;Fruebjergvej 3&lt;/ENTRY&gt;
 &lt;ENTRY&gt;2100&lt;/ENTRY&gt;
&lt;/ROW&gt;
&lt;ROW&gt;
 &lt;ENTRY&gt;Niels Bohr Institutet&lt;/ENTRY&gt;
 &lt;ENTRY&gt;Blegdamsvej 17-21&lt;/ENTRY&gt;
 &lt;ENTRY&gt;2100&lt;/ENTRY&gt;
&lt;/ROW&gt;
&lt;/TBODY&gt;
&lt;/TGROUP&gt;
&lt;/TABLE&gt;
</programlisting>

<para>
Dette kommer til at se ud som:
</para>
</example>

<table id="db-firmaet">
<title>Firma-tabel</title>
<tgroup cols="3" align="char">
<thead>
 <row>
  <entry>FirmaNavn</entry>
  <entry>Vej</entry>
  <entry>PostNr</entry>
 </row>
</thead>
<tbody>
<row>
 <entry>Vagabondos</entry>
 <entry>Tagensvej 100</entry>
 <entry>2200</entry>
</row>
<row>
 <entry>DKUUG</entry>
 <entry>Fruebjergvej 3</entry>
 <entry>2100</entry>
</row>
<row>
 <entry>Niels Bohr Institutet</entry>
 <entry>Blegdamsvej 17-21</entry>
 <entry>2100</entry>
</row>
</tbody>
</tgroup>
</table>

<para>
Bemærk at vi har anført <filename>id="label"</filename> sammen
med <command>&lt;table&gt;</command>. Det er for at
kunne krydsreferere til tabellen fra et sted i teksten.
</para>

<para>
Det skal bemærkes, at man med <command>&lt;colspec&gt;</command>
kan lave en del bedre formattering af tabeller, såsom farvelægning af
celler og andre fikse ting som bredde af tabeller, 
kolonner etc. 
</para>

</sect3>

<sect3 id="docbook-figure">

<title>Figurer - figure</title>
<indexterm><primary>figure</primary></indexterm>
<indexterm><primary>SGML-elementer</primary><secondary>figure</secondary></indexterm>
<indexterm><primary>magic</primary></indexterm>

<para>
Figurer kan inkluderes i Docbook-dokumenter. Selvom
det anføres at en lang række grafik formater er
understøttet, så gælder det i praksis ikke, hvis man
skal kunne oversætte både til HTML, PDF og Postscript.
Vi anbefaler PNG-format til billeder, da dette er generelt
understøttet.
</para>

<example>
<title>figure</title>

<programlisting>
&lt;FIGURE id="linustorvalds-fig" float="1"&gt;
&lt;TITLE&gt;Linus Torvalds&lt;/TITLE&gt;
&lt;GRAPHIC fileref="linus.&amp;magic;"  scale="60"&gt;&lt;/GRAPHIC&gt;
&lt;/FIGURE&gt;
</programlisting>

<para>
Dette kommer til at se ud som:
</para>

</example>

<figure id="linustorvalds-fig" float="1">
<title>Linus Torvalds</title>
<graphic fileref="linus.&magic;"  scale="60"></graphic>
</figure>

<para>
Bemærk at vi igen her har sat <command>id="label"</command> ind under
<command>&lt;figure id="linustorvalds-fig" float="1"&gt;</command> for at
kunne krydsreferere til figuren. Du skal selv skalere billedet (i PDF og
Postscript udskrift via <command>scale</command>-parameteren.
</para>

<indexterm><primary>Scale parameteren</primary></indexterm> 
<para> 
Det kan være lidt vanskeligt at gennemskue, hvor stort ens billede
bliver, når man har taget et screenshot og det skal med i ens bog. Det
kan også være lidt svært at regne ud hvor store billeder man skal
lave.Her følger en gennemgang af hvordan man kan forudsige lidt om
skaleringen, så man kan forstå hvad der sker og hvordan
<command>scale</command>-paremeteren skal bruges.  
</para>

<indexterm><primary>dpi</primary></indexterm> 
<para> 
Det er formentlig velkendt at alle billeder har en opløsning i pixels,
det vi som regel forstår som størrelsen af et billede. Et skærmskud
kan f.eks. være 900x600 pixels. Hvis man ser det billede på to
forskellige computere, hvor den ene har en 20" skærm med en opløsning
på 1024x768 og den anden har en 15" skærm med en opløsning på
1024x768, vil det samme billede have to meget forskellige størrelser,
når de ses på skærmen. Det er vi vant til og tager ikke så højtideligt
&ndash; typisk kan vi forstørre eller formindske billedet for at se
det bedre alligevel.
</para>

<para>
Det er meget værre hvis vi taler om udskrivning. Hvis vi fulgte samme
metode som for skærme &ndash; hvor hver af billedets pixels optager
een pixel på skærmen &ndash; ville et billede på 900 pixels bredde
være 3 tommer bredt på en 300 dpi printer (en printers dpi bestemmer
hvor mange (evt. farvede) prikker den kan lave pr. tomme/cm) og 1.5
tomme bredt på en 600 dpi printer. Det er ikke særligt ønskeligt. For
at imødekomme det, taler man også om et billedes opløsning pr. enhed,
typisk pixels pr. centimeter, eller pixels pr. tomme (det sidste er
det der kaldes dpi).
</para>

<para>
Afhængigt af hvordan du har lavet dit billede (og hvilket format det
er) har det allerede en dpi størrelse. Nogen programmer tillader dig
at se og ændre denne størrelse (f.eks. <command>gimp</command> med jpg
billeder). Men, de fleste billeder har ikke et tal indbygget, og
derfor antager Docbook en standard værdi, når den skal lave dit
billede om til noget der kan skrives ud på en printer
(f.eks. postscript eller pdf). Denne standardværdi er, så vidt jeg
ved, 72 dpi.
</para>

<para>
Lad os tage et eksempel.  Antag at du har et 900 pixel bredt billede
og du vil skrive det ud på en 300 dpi printer (eller en fil med
indbygget antagelse om opløsningen, som f.eks. postscript eller
pdf). Docbook antager at billedet er 72 dpi, derfor skaleres billedet
først op med printerdpi/billededpi = 300/72 ~= 4.2, dvs. at billedet
bliver ca. 3750 pixels bredt eller 12.5 tommer, eller ca. 31 cm. Det
er jo alt for stort til en A4 side, så her kommer scale parameteren
ind. Vi bruger scale parameteren til at sætte det til 40%, så bliver
det 1500 pix, 5 tommer eller ca.  13 cm, som passer fint på docbook
siden. Det endelige billedes opløsning bliver 1500/5 = 300 dpi &ndash;
lige som det skal være. Når Docbook laver f.eks. HTML, sker der dog
ingen skalering. Her vil billedet stadig være 900 pixels bredt.
</para>

<para>
Så, hvor stort skal ens billede være? Det vigtigeste er at undgå
nedskalering &ndash; det er bedre at skulle skalere op på papir, end
ned, fordi der uundgåeligt går detaljer tabt ved nedskalering.  Så,
hvornår bliver der skaleret ned? Hvis man har 15 cm plads, har man
typisk plads til mindst 15/2.54*300 pixels = 1771 pixels. Billeder
mindre end det, bliver skaleret op, mens billeder større bliver
skaleret ned. Hvis man udskriver på 600 dpi, har man selvklart plads
til det dobbelte. Men, det er nok ikke smart at lave billeder meget
større end 1000 pixels, da de kan blive meget store på skærme med en
lav opløsning.
</para>

<para>
Hvis man vil lave små billeder, så lav dem små til at starte med, lad
være med at brug gimp eller lignende til at resample dem med: de
bliver alligevel resamplet når de skal skrives ud/vises og på webben
betyder det ingenting.
</para>

<para>
Hvis du gerne vil regne ud hvad din <command>scale</command>-parameter
skal være, for at optage en bestemt bredde, kan du bruge den her
formel: "scale = ønsket bredde i tommer * billeddpi / billedbredde i
pixels". Her kan du antage at billeddpi er 72 hvis du ikke ved
andet. Det er måske lidt nemmere i centimeter for os danskere, og så
bliver det 72 dpi (ca) = 28.3 punkter pr. centimeter. Så bliver
formlen: "scale = ønsket bredde i cm * 28.3 / billedebredde i
pixels". Et eksempel; vi ønsker at et 900 pixels billede skal være 15
cm bredt ved udskrift, så vi får "scale = 15 * 28.3 / 900 =
0.47". <command>scale</command>-parameteren skal altså sættes til 47%.
På webben bliver scale parameteren ignoreret, og brugeren får et 900
pix bredt billede. Det kan han så se det hele af, og skalere ned eller
bruge scrollbars.  
</para>

<para>
Hvad nu med &amp;magic;? Der er et problem med grafik - hvis man alene
laver PDF og HTML-filer, så kan man anføre at det er en
<filename>.png</filename> fil eller lignende. Skal man også lave
PostScript, så skal man anvende <filename>.eps</filename>-filer. Der
skal en konvertering af billederne til. En nem måde at styre
magic-variablen er at tilføje denne i den hoved-sgml-fil man laver
</para>

<programlisting>
&lt;!ENTITY % magic-entities SYSTEM "magic.sgml"&gt;
  %magic-entities;  &lt;!-- This is where we include it --&gt;
</programlisting>

</sect3>

<sect3 id="docbook-footnote">
<title>Fodnoter</title>
<indexterm><primary>footnote</primary></indexterm>
<indexterm><primary>SGML-elementer</primary><secondary>footnote</secondary></indexterm>
<para>
Skal du lige lave en fodnote i din SGML-fil skal du prøve dette
</para>

<programlisting>
&lt;para&gt;
Denne tekst er til almindelig brug
&lt;footnote id="fodid"&gt;
&lt;para&gt;
Denne tekst ender som fodnote.
&lt;/para&gt;
&lt;/footnote&gt;
&lt;/para&gt;
</programlisting>

<para>
Som eksempler bliver dette til
</para>


<para>
Denne tekst er til almindelig brug
<footnote id="fodid">
<para>
Denne tekst ender som fodnote.
</para>
</footnote>
</para>


</sect3>

<sect3 id="docbook-sidebar">
<title>Info-boks</title>
<indexterm><primary>sidebar</primary></indexterm>
<indexterm><primary>SGML-elementer</primary><secondary>sidebar</secondary></indexterm>
<para>
Skal du lave en info-boks findes tagget "sidebar".
</para>

<programlisting>
&lt;sidebar&gt;
&lt;para&gt;
Det er da ikke særlig svært at se hvordan man laver en 
"sidebar". 
&lt;/para&gt;
&lt;/sidebar&gt;
</programlisting>

<sidebar>
<para>
Det er da ikke særlig svært at se hvordan man laver en 
"sidebar". 
</para>
</sidebar>

</sect3>








<sect3 id="docbook-kommentarer">
<title>Kommentarer</title>
<indexterm><primary>&lt;!-- kommentar --&gt;</primary></indexterm>
<indexterm><primary>SGML-elementer</primary><secondary>&lt;!-- kommentar --&gt;</secondary></indexterm>
<para>
Skal du lige lave en kommentar i din SGML-fil som ikke kommer med ud i
HTML, PDF og Postscript-filerne, så kan du anvende.
</para>

<programlisting>
&lt;!-- Dette er en kommentar --&gt;
</programlisting>

<para>
Bemærk at der er to minus-tegn efter hinanden. I udprintning vil de se
ud som ét langt minustegn.
</para>
</sect3>

<sect3 id="docbook-xref">

<title>Referencer - id og xref </title>
<indexterm><primary>id</primary></indexterm>
<indexterm><primary>xref</primary></indexterm>
<indexterm><primary>SGML-elementer</primary><secondary>id</secondary></indexterm>
<indexterm><primary>SGML-elementer</primary><secondary>xref</secondary></indexterm>
<para>
Vi har allerede set at vi kan give en tabel og en figur en
label. Dette gjorde vi med <command>id="label"</command>. Tilsvarende
kan vi referere til den label i en tekstblok et andet sted ved at
bruge <command>&lt;xref&gt;</command>. Bemærk at denne kommando
<emphasis>ikke</emphasis> har en tilsvarende
<command>&lt;/xref&gt;</command>. Lad i øvrigt være med at bruge
danske bogstaver, mellemrum og understregning
(eng. underscore). Grunden er at værdien af "ID" bruges til 
filnavne - og her kan man ikke tillade de nævnte tegn.
</para>

<example>
<title>id og xref</title>

<programlisting>
Vi kan referere til den forrige figur, altså 
&lt;xref linkend="linustorvalds-fig"/&gt; eller tabellen 
&lt;xref linkend="db-firmaet"/&gt; uden at tænke på hvilket
nummer de har. Vi anvender blot deres label.
</programlisting>

<para>
Dette kommer til at se ud som:
</para>

<para>
Vi kan referere til den forrige figur, altså 
<xref linkend="linustorvalds-fig"/> eller tabellen 
<xref linkend="db-firmaet"/> uden at tænke på hvilket
nummer de har. Vi anvender blot deres label.
</para>
</example>

</sect3>

<sect3 id="docbook-itemizedlist">
<title>Lister - itemizedlist og orderedlist</title>
<indexterm><primary>lister</primary></indexterm>
<indexterm><primary>SGML-elementer</primary><secondary>itemizedlist</secondary></indexterm>
<indexterm><primary>SGML-elementer</primary><secondary>orderedlist</secondary></indexterm>


<para>
Ofte har man brug for at lave en liste. I Docbook er der
flere muligheder, jeg bruger dog kun en type med enkle
punkter
</para>

<example>
<title>itemizedlist</title>

<programlisting>
&lt;itemizedlist mark="bullet"&gt;
&lt;listitem&gt;
 &lt;para&gt;
  Første punkt i listen skriver jeg her.
 &lt;/para&gt;
&lt;/listitem&gt;
&lt;listitem&gt; 
 &lt;para&gt;
  Andet punkt i listen skriver jeg derefter her.
 &lt;/para&gt;
&lt;/listitem&gt;
&lt;/itemizedlist&gt;
</programlisting>

<para>
Dette kommer til at se ud som:
</para>


<itemizedlist mark="bullet">
<listitem>
 <para>
  Første punkt i listen skriver jeg her.
 </para>
</listitem>
<listitem> 
 <para>
  Andet punkt i listen skriver jeg derefter her.
 </para>
</listitem>
</itemizedlist>
</example>

<para>
Tilsvarende til <command>&lt;itemizedlist&gt;</command>
kan man lave lister, som er nummererede.
</para>

<example>
<title>orderedlist</title>

<programlisting>
&lt;orderedlist&gt;
&lt;listitem&gt;
 &lt;para&gt;
  Første punkt i listen skriver jeg her.
 &lt;/para&gt;
&lt;/listitem&gt;
&lt;listitem&gt; 
 &lt;para&gt;
  Andet punkt i listen skriver jeg derefter her.
 &lt;/para&gt;
&lt;/listitem&gt;
&lt;/orderedlist&gt;
</programlisting>

<para>
Dette kommer til at se således ud
</para>

<orderedlist>
<listitem>
 <para>
  Første punkt i listen skriver jeg her.
 </para>
</listitem>
<listitem> 
 <para>
  Andet punkt i listen skriver jeg derefter her.
 </para>
</listitem>
</orderedlist>
</example>


</sect3>
</sect2>



<sect2 id="docbook-sect2">

<title>Opdeling af dokument</title>
<indexterm><primary>sect</primary></indexterm>
<indexterm><primary>chapter</primary></indexterm>
<indexterm><primary>SGML-elementer</primary><secondary>sect</secondary></indexterm>
<indexterm><primary>SGML-elementer</primary><secondary>chapter</secondary></indexterm>
<para>
En bog inddeles i kapitelniveauer med
<command>&lt;chapter&gt;</command>, og tilsvarende lavere niveauer
<command>&lt;sect1&gt;</command>, <command>&lt;sect2&gt;</command>, og
<command>&lt;sect3&gt;</command>. Opdelingen afspejler ikke
nødvendigvis de filer man skriver. For hver ny inddeling
<emphasis>skal</emphasis> man have et <command>&lt;title&gt;&lt;/title&gt;</command>
til at anføre titel.
</para>

<para>
En artikel har samme inddelinger, pånær
<command>&lt;chapter&gt;</command>, og første inddelingsniveau er 
<command>&lt;sect1&gt;</command>.
</para>

<para>
Hver af de elementer kan tage en <command>id="label"</command>, som man kan
bruge til at referere til.
</para>

<example>
<title>Opdeling</title>

<programlisting>
&lt;sect2 id="introduktion"&gt;
&lt;title&gt;Dette er en introduktion&lt;/title&gt;
 &lt;para&gt;
  Tekst kommer her i en para-blok og bemærkede du at afsnittet har
  label "introduktion"?
 &lt;/para&gt;
 &lt;para&gt;
  Havde det været en bog, skulle vi starte med chapter og sect1, men
  men det er jo et eksempel :-)
 &lt;/para&gt;
 &lt;para&gt;
  Læs mit næste afsnit i &lt;xref linkend="naeste-inddeling"/&gt;.
 &lt;/para&gt;

 &lt;sect3 id="naeste-inddeling"&gt;
 &lt;title&gt;Dette er næste inddeling&lt;/title&gt;
   &lt;para&gt;
    Her er et underafsnit. Du skal bemærke, at jeg ikke bruger æ, ø og
    å i labels. Det giver ellers problemer med HTML-filnavne.
   &lt;/para&gt;
   &lt;para&gt;
   Bemærk at &lt;command&gt;&amp;lt;!-- Dette er en kommentar --&amp;gt;&lt;/command&gt; kan 
   bruges til at angive en kommentar som ikke vises
   &lt;/para&gt;
 &lt;/sect3&gt;
&lt;/sect2&gt; &lt;!-- Denne afslutning skal man huske --&gt;
</programlisting>

<para>
Dette kommer til at se ud som:
</para>
</example>

<sect3 id="docbook-introduktion">
<title>Dette er en introduktion</title>
 <para>
  Tekst kommer her i en para-blok og bemærkede du at afsnittet har
  label "introduktion"?
 </para>
 <para>
  Havde det været en bog, skulle vi starte med chapter og sect1, men
  det er jo et eksempel :-)
 </para>
 <para>
  Læs mit næste afsnit i <xref linkend="docbook-naeste-inddeling"/>.
 </para>

 <sect4 id="docbook-naeste-inddeling">
 <title>Dette er næste inddeling</title>
   <para>
    Her er et underafsnit. Du skal bemærke, at jeg ikke bruger æ, ø og
    å i labels. Det giver ellers problemer med HTML-filnavne.
   </para>
   <para>
   Bemærk at <command>&lt;!-- Dette er en kommentar --&gt;</command> kan 
   bruges til at angive en kommentar som ikke vises
   </para>
 </sect4>
</sect3> <!-- Denne afslutning skal man huske -->

<sect3 id="docbook-Startfilen">
<title>Start filen</title>
<para>
Nu har vi set på inddelinger af dokumentet og hvordan man laver
tabeller, figurer, viser kildetekst og URL'er.
</para>

<para>
Lad os antage at man har lavet tre kapitler med hver deres
<command>&lt;chapter id="label-for-kapitel"&gt;</command>, som er gemt
i tre filer <filename>introduktion.sgml</filename>,
<filename>linux.sgml</filename> og
<filename>konklusion.sgml</filename>. Her er så en opskrift på at lave
hoved-filen som binder det hele sammen. 
</para>

<para>
Forfattere angives i <command>&lt;AUTHORGROUP&gt;</command> og titler
som tidligere vist i <command>&lt;title&gt;</command>.
</para>

<programlisting>
&lt;!doctype book PUBLIC "-//OASIS//DTD DocBook V3.1//EN" [
 &lt;!entity intro SYSTEM "introduktion.sgml"&gt; &lt;!-- Filnavn ej lig id --&gt;
 &lt;!entity Linux SYSTEM "linux.sgml"&gt; &lt;!-- Filnavn ej lig id --&gt;
 &lt;!entity konklusion SYSTEM "konklusion.sgml"&gt; &lt;!-- Filnavn her lig id --&gt;
]&gt;

&lt;book id="index" lang="da"&gt; &lt;!-- med lang="da" vælges
den danske docbook-localization fil, altså man får danske ord
for chapter, section, content, appendix, index m.v. --&gt;
&lt;bookinfo&gt;
 &lt;title&gt;Bog titel kommer her&lt;/title&gt;
 &lt;subtitle&gt;Her er en undertitel&lt;/subtitle&gt;

 &lt;AUTHORGROUP&gt;

 &lt;AUTHOR&gt;
   &lt;FIRSTNAME&gt;Peter&lt;/FIRSTNAME&gt;
   &lt;SURNAME&gt;Toft&lt;/SURNAME&gt;
 &lt;/AUTHOR&gt;

 &lt;AUTHOR&gt;
   &lt;FIRSTNAME&gt;Hans&lt;/FIRSTNAME&gt;
   &lt;SURNAME&gt;Schou&lt;/SURNAME&gt;
 &lt;/AUTHOR&gt;

 &lt;/AUTHORGROUP&gt;
 &lt;COPYRIGHT&gt;
   &lt;YEAR&gt;2002&lt;/YEAR&gt;
   &lt;HOLDER&gt;Peter Toft og mange andre under
   "&Aring;DL" licensen&lt;/HOLDER&gt;
 &lt;/COPYRIGHT&gt;

 &lt;ABSTRACT&gt;
  &lt;PARA&gt;
   Her skriver vi et kort abstract.
  &lt;/PARA&gt;
 &lt;/ABSTRACT&gt;
&lt;/bookinfo&gt;

&lt;!-- Følgende linje skaber automatisk en indholdsfortegnelse --&gt;
&lt;toc id="toc"&gt;&lt;/toc&gt; 
&amp;intro;
&amp;Linux;
&amp;konklusion;
&lt;/book&gt;
</programlisting>

<para>
I hovedet af filen erklæres hvilke eksterne filer, vil skal læse
ind. Hver af disse får en label (intro, Linux og konklusion) som vi
anvender til sidst i filen med et &amp; foran. Der er her til sidst vi
angiver den rækkefølge filerne indsættes i.
</para>

<para>
Bemærk at kommandoerne <command>&lt;toc&gt;&lt;/toc&gt;</command>
bruges til at få genereret en indholdsfortegnelse. Dette kræver intet
andet end den linje.
</para>

</sect3>


<sect3 id="docbook-entity">
<title>Entities</title>
<indexterm><primary>entity</primary></indexterm>
<indexterm><primary>SGML-elementer</primary><secondary>entity</secondary></indexterm>
<para>
Vi har i <xref linkend="docbook-Startfilen"/> allerede set ordet
<command>entity</command> anvendt. Denne bruges til at definere enten
en forkortelse eller at inkludere en anden fil. Vi så tidligere at tre
filer blev defineret og her er vist samme definitioner samt at en
forkortelse "pto" er sat til "Peter Toft". 
</para>

<programlisting>
 &lt;!entity intro SYSTEM "introduktion.sgml"&gt; &lt;!-- Filnavn ej lig id --&gt;
 &lt;!entity Linux SYSTEM "linux.sgml"&gt; &lt;!-- Filnavn ej lig id --&gt;
 &lt;!entity konklusion SYSTEM "konklusion.sgml"&gt; &lt;!-- Filnavn her lig id --&gt;
 &lt;!entity pto "Peter Toft"&gt; 
</programlisting>


<para>
Når man ønsker indholdet af <filename>introduktion.sgml</filename>, så
skriver man blot <command>&amp;intro;</command>, tilsvarende 
<command>&amp;Linux;</command> og
<command>&amp;konklusion;</command>. Skal man bruge teksten "Peter
Toft", så er det nemmere at bruge <command>&amp;pto;</command>.
</para>

</sect3>

</sect2>

<sect2 id="docbook-specialtegn">
<title>Specialtegn</title>
<indexterm><primary>Tankestreger</primary>
           <secondary>i docbook </secondary>
</indexterm>
<indexterm><primary>-</primary></indexterm>
<para>
På dansk skrives tankestreger sådan &ndash altså en mellemlang streg
med mellemrum omkring. Dette skal ikke forveksles med minus, som er en
kort streg, som her -. Eller den amerikanske udgave, som er en ret
lang streg, uden mellemrum&mdash;som ikke anvendes på dansk. (NB:
Hvis du ser dette i en HTML udgave, er det ikke sikkert at tegnene ser
forskellige ud!)
</para>

<para>Docbook koderne for disse tegn er "-", "&amp;ndash" og "&amp;mdash;".</para>

</sect2>


</sect1>

<sect1 id="docbook-Compile">
<title>Oversætte SGML til andre formater</title>
<indexterm><primary>oversætte SGML</primary></indexterm>
<indexterm><primary>docbook2html</primary></indexterm>
<indexterm><primary>docbook2pdf</primary></indexterm>
<indexterm><primary>docbook2ps</primary></indexterm>
<indexterm><primary>docbook2rtf</primary></indexterm>

<para>
Du kan oversætte SGML filerne til HTML, PDF, Postscript og RTF. Der
er også mulighed for at vælge at oversætte SGML til én HTML-fil og
ikke til mange, opdelt for hver
<command>&lt;sect1&gt;</command>. Skal din HTML-fil hentes lokalt på
læserens harddisk, kan dette være en fordel, men skal den sendes via nettet,
bliver det for langsommeligt.
</para>

<para>
Du oversætter din hoved SGML fil
(f.eks. <filename>bog.sgml</filename>) til HTML ved at skrive
<command>docbook2html bog.sgml</command>. Dine HTML filer gemmes i
<filename>bog</filename> under dit nuværende katalog, fordi SGML-filen
hedder <filename>bog.sgml</filename>.
</para>

<para>
Du skal selv sørge for at kopiere dine billed-filer (f.eks. PNG) til
kataloget <filename>bog</filename>. Typisk kan dette gøres med en
<filename>Makefile</filename>.
</para>

<para>
Tilsvarende kan man oversætte <filename>bog.sgml</filename> til PDF
ved at skrive <command>docbook2pdf bog.sgml</command>. Igen skal alle
billed-filer (typisk PNG) være placeret der hvor SGML-filerne
oversættes. Jeg kopierer normalt alle de filer til et midlertidigt
katalog og oversætter der.
</para>

<para>
Skal man oversætte til Postscript hedder kommandoen
<command>docbook2ps</command> og RTF laves med <command>docbook2rtf</command>.
</para>

<sect2 id="docbook-fejl-i-sgml">
<title>Fejl i SGML-teksten</title>
<indexterm><primary>Fejl under oversættelse</primary></indexterm>
<para>
Har du lavet fejl i din SGML-tekst, så er den oversætter man har i
<command>docbook2html</command> faktisk til stor hjælp. Vi skal se på et
par eksempler.
</para>

<example>
<title>Manglende /para</title>
<para>
Lad os prøve at oversætte følgende tekst
</para>

<programlisting>
&lt;!doctype book PUBLIC "-//OASIS//DTD DocBook V3.1//EN" [
]&gt;

&lt;book id="index" lang="da"&gt;
  &lt;bookinfo&gt;
    &lt;title&gt;Min første Docbook-bog&lt;/title&gt;
  &lt;/bookinfo&gt;

&lt;chapter id="forord"&gt;
&lt;title&gt;Mit første kapitel&lt;/title&gt;

&lt;para&gt;
Vil du skrive i Docbook ?
&lt;/para&gt;

&lt;para&gt;
Ja - men jeg kan ikke huske at slutte mine para-blokke.

&lt;/chapter&gt;
&lt;/book&gt;
</programlisting>

<para>
Filen <filename>eks1.sgml</filename> oversættes nu 
</para>

<programlisting>
<prompt>[root@MinMaskine /root]# </prompt> <userinput> docbook2html eks1.sgml</userinput>
TMPDIR is DBTOHTML_OUTPUT_DIR3088
 
input file was called eks1.sgml -- output will be in eks1
 
working on ../eks1.sgml
jade:../eks1.sgml:24:9:E: end tag for "PARA" omitted, but OMITTAG NO was specified
jade:../eks1.sgml:19:0: start tag was here
about to copy cascading stylesheet and admon graphics to temp dir
about to rename temporary directory to eks1
</programlisting>

<para>
For det første laves et temporært katalog
<filename>DBTOHTML_OUTPUT_DIR3088</filename>, og resultatet vil ende i
<filename>eks1/</filename> idet filen hedder <filename>eks1.sgml</filename>.
Man får to ret klare fejlbeskeder. I linje 24 (næstsidste linje) må
der ikke komme en <command>&lt;/chapter&gt;</command>, når der bør
komme en slut PARA, dvs. <command>&lt;/para&gt;</command>. Den
følgende linje fortæller dernæst at i linje 19 var den
<command>&lt;para&gt;</command>, som ikke kunne matches.
</para>

<para>
Tilføj en <command>&lt;/para&gt;</command> før næstsidste linje og 
teksten oversætter fejlfrit.
</para>

</example>

<example>
<title>To ens ID</title>
<para>
Lad os prøve at oversætte følgende tekst
</para>

<programlisting>
&lt;!doctype book PUBLIC "-//OASIS//DTD DocBook V3.1//EN" [
]&gt;

&lt;book id="index" lang="da"&gt;
  &lt;bookinfo&gt;
    &lt;title&gt;Eksempel&lt;/title&gt;
  &lt;/bookinfo&gt;

&lt;toc id="toc"&gt;&lt;/toc&gt;


&lt;chapter id="id1"&gt;
&lt;title&gt;Mit første kapitel&lt;/title&gt;

&lt;para&gt;
Vil du skrive i Docbook ?
&lt;/para&gt;

&lt;sect1 id="id1"&gt;
&lt;title&gt;Mit første underkapitel&lt;/title&gt;
&lt;para&gt;
tekst1
&lt;/para&gt;

&lt;/sect1&gt;
&lt;/chapter&gt;
&lt;/book&gt;
</programlisting>

<para>
Filen <filename>eks2.sgml</filename> oversættes nu 
</para>

<programlisting>
<prompt>[root@MinMaskine /root]#</prompt> <userinput>docbook2html eks2.sgml</userinput>
TMPDIR is DBTOHTML_OUTPUT_DIR3110
 
input file was called eks2.sgml -- output will be in eks2
 
working on ../eks2.sgml
jade:../eks2.sgml:19:11:E: ID "ID1" already defined
jade:../eks2.sgml:12:13: ID "ID1" first defined here
about to copy cascading stylesheet and admon graphics to temp dir
about to rename temporary directory to eks2                  
</programlisting>

<para>
Her ses at ID1 er erklæret to gange - og der oplyses hvilke steder det
sker. Omdefiner den ene og oversæt igen.
</para>
</example>


</sect2>

<sect2 id="docbook-grimme-ting">
<title>"Alle" de grimme detaljer</title>

<sect3 id="docbook-Stikordsregister">
<title>Stikordsregister</title>
<indexterm><primary>stikordsregister, oprettelse</primary></indexterm>
<para>
At få lavet et stikordsregister er ikke så integreret i Docbook som
man kunne ønske sig, men modsat så kan det nemt indføres, når bare man
har en vejledning. Det første man skal gøre er at hente et Perl-program,
<command>collateindex.pl</command>, som f.eks. kan hentes fra 
<ulink
url="http://&linuxbogurl;/misc/collateindex.pl">&linuxbogurl;/misc/collateindex.pl</ulink>.
Filen skal gøres kørbar og f.eks. placeres i <filename>/usr/local/bin</filename>.
</para>


<sect4 id="docbook-indexterm">
<title>Markere til stikordsregisteret - indexterm</title>
<indexterm><primary>indexterm</primary></indexterm>
<indexterm><primary>indexterm</primary><secondary>primary</secondary></indexterm>
<indexterm><primary>indexterm</primary><secondary>secondary</secondary></indexterm>
<indexterm><primary>SGML-elementer</primary><secondary>indexterm</secondary></indexterm>
<para>
Før man får en stikordsliste skal man igennem hele ens dokument og
markere de steder, man ønsker et link til. Det er manuelt arbejde.
Hvert sted man ønsker et link til skal man tilføje
</para>

<programlisting>
&lt;indexterm&gt;&lt;primary&gt;Søgeord&lt;/primary&gt;&lt;/indexterm&gt;
</programlisting>

<para>
I stikordsregisteret vil man så kunne se at "Søgeord" kan man læse om
det pågælende afsnit. Man kan godt lave henvisning til flere
forskellige steder med samme søgeord. Indføj blot flere linjer som den
ovenstående og man får et tilsvarende antal referencer i stikordsregisteret.
</para>

<para>
Samme markeringsteknik kan laves med underinddelinger, så man under
"Søgeord" kan have f.eks. "At lave søgeord" og et andet sted "At finde
søgeord". For at lave det første eksempel skrives følgende, og det kan
bemærkes, at linjedelingen og indrykningen nedenfor alene tjener til
at gøre SGML-koden nemmere at læse.
</para>

<programlisting>
&lt;indexterm&gt;
 &lt;primary&gt;Søgeord&lt;/primary&gt;
 &lt;secondary&gt;At lave søgeord&lt;/secondary&gt;
&lt;/indexterm&gt;
</programlisting>
</sect4>

<sect4 id="docbook-collateindex.pl">
<title>Generere indholdsfortegnelsen - collateindex.pl</title>
<indexterm><primary>collateindex.pl</primary></indexterm>

<para>
Når man har sat alle sine stikordshenvisninger ind i dokumentet kommer
turen til at få genereret dokumentet med <command>collateindex.pl</command>.
Tricket er at man skal oversætte sit dokument en gang før man kører
<command>docbook2html</command> (eller hvad man nu har som mål-format).
</para>

<para>
Jeg plejer typisk at have en <filename>Makefile</filename>, hvor jeg
oversætter min hoved SGML-fil <filename>bog.sgml</filename> på
følgende måde. Jeg har kommenteret Makefilen med kommentarer før kommandoen
</para>

<programlisting>
# Slet mit midlertidige katalog "tempdir" og "stikord.sgml"
    rm -rf tempdir stikord.sgml
# Skab et  midlertidige katalog "tempdir"
    mkdir tempdir
# Initialiser "stikord.sgml" til at være tom
    perl /usr/local/bin/collateindex.pl \
        -s Symboler  -t Stikordsregister -g \
        -i stikord -N -o stikord.sgml
# Kopier alle SGML filer til "tempdir"
    cp *.sgml tempdir
# Gå ned i "tempdir" og oversæt SGML-filerne hvor HTML.index dannes
    (cd tempdir; jade -t sgml -ihtml \
        -d /usr/lib/sgml/stylesheets/cygnus-both.dsl\#html \
        -V html-index bog.sgml)
# Kør nu "collateindex.pl" som oversætter "HTML.index" til indholdet
# af SGML-filen "stikord.sgml". -s er at symboler optræder under
# navnet "symboler". -t angiver overskrift for "stikord.sgml"
    perl /usr/local/bin/collateindex.pl -s Symboler \
        -t Stikordsregister  -g -i stikord \
        -o stikord.sgml tempdir/HTML.index
# Nu er "stikord.sgml" fuld af referencer som kan oversættes
    docbook2html bog.sgml
# Kopier alle PNG-filer fra "images/" til "bog/"
    cp images/*.png bog
</programlisting>

<para>
Skal du tilsvarende oversætte til PDF kan du have en del af en
<filename>Makefile</filename> med et lidt andet indhold. Ideen er den
samme, men <command>jade</command>, som anvendes til at lave
stikordsregisteret får "print" overført ikke "html". Dette gør, at man
få sidenumre og ikke afsnitsnavne i stikordsregisteret. Bemærk også at
<command>-V nochunks</command> gør at filen oversættes til en stor fil
(svarende til den endelige PDF-fil).
</para>

<programlisting>
# Slet "stikord.sgml" min midlertidige kataloger 
#  "tempdir" og "bogpdf"
    rm -rf tempdir stikord.sgml bogpdf
# Skab et  midlertidige katalog "tempdir"
    mkdir tempdir
# Initialiser "stikord.sgml" til at være tom
    perl /usr/local/bin/collateindex.pl \
        -s Symboler  -t Stikordsregister -g \
        -i stikord -N -o stikord.sgml
# Kopier alle SGML filer til "tempdir"
    cp *.sgml tempdir
# Gå ned i "tempdir" og oversæt SGML-filerne hvor HTML.index dannes
    (cd tempdir; jade -t sgml -ihtml \
        -d /usr/lib/sgml/stylesheets/cygnus-both.dsl\#print 
        -V html-index -V nochunks bog.sgml > slet_fil.html)
# Kør nu "collateindex.pl" som oversætter "HTML.index" til indholdet
# af SGML-filen "stikord.sgml". -s er at symboler optræder under
# navnet "symboler". -t angiver overskrift for "stikord.sgml"
    perl /usr/local/bin/collateindex.pl -s Symboler \
        -t Stikordsregister  -g -i stikord \
        -o stikord.sgml tempdir/HTML.index
# Nu er "stikord.sgml" fuld af referencer som kan oversættes
    mkdir bogpdf
# Kopier alle SGML-filer til "bogpdf/"
    cp *.sgml bogpdf
# Kopier alle PNG-filer fra "images/" til "bog/"
    cp images/*.png bogpdf
# Kør "docbook2pdf" i "bogpdf/" 
    (cd bogpdf; docbook2pdf bog.sgml)
# Flytter PDF-filen til nuværende katalog
    mv bogpdf/bog.pdf .
</programlisting>
</sect4>

<sect4 id="docbook-Postscript">
<title>Postscript er et problem</title>
<indexterm><primary>Postscript</primary></indexterm>
<para>
Som vist i forrige afsnit kopieres PNG-filer blot til det katalog hvor
man oversætter. Skal man oversætte Docbook dokumentet til Postscript
opstår dog problemet; Man kan ikke oversætte dokumentet med
PNG-billeder, men godt med EPS-billeder. Det problem kan også løses,
men det er bøvlet og kræver at alle billeder oversættes til EPS,
f.eks. ved at bruge <command>convert</command>fra
ImageMagick-programmet.
</para>

</sect4>
</sect3>

<sect3 id="docbook-texconfig">
<title>&AElig;ndring af opsætning</title>
<indexterm><primary>opsætning (layout), ændring af</primary></indexterm>
<indexterm><primary>layout, ændring af</primary></indexterm>

<para>
Er du utilfreds med hvordan marginer i PDF-filen er eller hvordan dine
HTML style-filer anvendes, så har Docbook et hav af muligheder for at
skrue på format.
</para>

<para>
I <filename>/usr/lib/sgml</filename> ligger alle de opsætningsfiler
Docbook bruger. Oftest vil man ændre i ganske få filer, såsom
<filename>/usr/lib/sgml/stylesheets/nwalsh-modular/common/dbl1da.ent</filename>.
I denne fil står alle de oversættelser man har til dansk for
referencer og afsnit. Mener du at en "Section" (på engelsk) hedder
"Sektion" og ikke "Afsnit" så kan du ændre linjen
</para>

<programlisting>
&lt;!ENTITY Section        "Afsnit"&gt; 
</programlisting>

<para>
til
</para>

<programlisting>
&lt;!ENTITY Section        "Sektion"&gt; 
</programlisting>

<para>
Tilsvarende finder du mange opsætningsparametre fælles for HTML og
PDF/Postscript i
<filename>/usr/lib/sgml/stylesheets/nwalsh-modular/common/dbcommon.dsl</filename>.
Filen er skrevet i LISP (ligesom Emacs opsætningsfiler) og har mange
kommentarer. Oftest er det ikke denne fil man vil ændre i.
</para>

<para>
For HTML-generering vil du nok ændre i 
<filename>/usr/lib/sgml/stylesheets/nwalsh-modular/html/dbparam.dsl</filename>.
Du vil se at filen har mange kommentarer og vil du ændre en parameter
fra sand til falsk er det <command>#t</command> som ændres til <command>#f</command>.
</para>

<para>
I forhold til standardopsætningen kan det være interessant at kigge på:
</para>

<programlisting>
(define %section-autolabel%
</programlisting>

<para>
Sættes den til <command>#t</command> bliver afsnit ("sections") automatisk nummereret. 
Første afsnit ("sect1") i kapitel 7 vil så få nummer 7.1. 
</para>

<para>
Hvis man vil undgå at få en indholdsfortegnelse over tabeller og figurer nedenunder den 
almindelige indholdsfortegnelse, skal $generate-book-lot-list$ sættes til
</para>

<programlisting>
(define ($generate-book-lot-list$)
  ;; REFENTRY generate-book-lot-list
  ;; PURP Which Lists of Titles should be produced for Books?
  ;; DESC
  ;; This parameter should be a list (possibly empty) of the elements
  ;; for which Lists of Titles should be produced for each 'Book'.
  ;;
  ;; It is meaningless to put elements that do not have titles in this
  ;; list.  If elements with optional titles are placed in this list, only
  ;; the instances of those elements that do have titles will appear in
  ;; the LOT.
  ;;
  ;; /DESC
  ;; AUTHOR N/A
  ;; /REFENTRY
  (list ))
</programlisting>

<para>
Hvis du ønsker at styre udseendet af bogen (i HTML-udgaven), kan det gøres ved at 
vælge at bruge et eksternt Cascading Style Sheet. Filnavnet på dette angives i
</para>

<programlisting>
 (define %stylesheet%
  ;; REFENTRY stylesheet
  ;; PURP Name of the stylesheet to use
  ;; DESC
  ;; The name of the stylesheet to place in the HTML LINK TAG, or '#f' to
  ;; suppress the stylesheet LINK.
  ;; /DESC
  ;; AUTHOR N/A
  ;; /REFENTRY
  "../style/style.css")
</programlisting>

<para>
Du skal selvfølgelig sørge for, at der er et stylesheet på den angivne placering...
</para>

<para>
For PDF og Postscript-generering (kaldes "print" i Docbook) vil du nok
ændre i <filename>/usr/share/sgml/docbook/dsssl-stylesheets/print/dbparam.dsl</filename>
(Red Hat 6.2 <filename>/usr/lib/sgml/stylesheets/nwalsh-modular/print/dbparam.dsl</filename>).
En ting du nok skal se på er "%paper-type%" som sættes til
</para>

<programlisting>
(define %paper-type%
  ;; REFENTRY paper-type
  ;; PURP Name of paper type
  ;; DESC
  ;; The paper type value identifies the sort of paper in use, for example,
  ;; 'A4' or 'USletter'. Setting the paper type is an
  ;; easy shortcut for setting the correct paper height and width.
  ;;
  ;; As distributed, only 'A4' and 'USletter' are supported.  You can add
  ;; additional paper types by updating 'page-width' and 'page-height'.
  ;; If you do, please pass along your updates.
  ;; /DESC
  ;; AUTHOR N/A
  ;; /REFENTRY
  ;; "USletter"
  "A4")                 
</programlisting>

<para>
Vil du have to kolonner tekst i PS og PDF-udskrift rettes
tilsvarende 
</para>

<programlisting>
(define %page-n-columns%
  ;; REFENTRY page-n-columns
  ;; PURP Sets the number of columns on each page
  ;; DESC
  ;; Sets the number of columns on each page
  ;; /DESC
  ;; AUTHOR N/A
  ;; /REFENTRY
  1)
</programlisting>

<para>
til
</para>

<programlisting>
(define %page-n-columns%
  ;; REFENTRY page-n-columns
  ;; PURP Sets the number of columns on each page
  ;; DESC
  ;; Sets the number of columns on each page
  ;; /DESC
  ;; AUTHOR N/A
  ;; /REFENTRY
  2)
</programlisting>


<para>
Tilsvarende kan man lede efter margin og finde de marginer, som anvendes i 
PDF-dokumentet, ligesom "%section-autolabel%" og "$generate-book-lot-list$" 
kan ændres på samme vis som i 
<filename>/usr/share/sgml/docbook/dsssl-stylesheets/html/dbparam.dsl</filename>.
</para>


</sect3>
</sect2>
</sect1>   



<sect1 id="docbook-pakker">
<title>De forskellige dele af docbook-systemet</title>
<indexterm>
 <primary>DocBook</primary>
 <secondary>Dele af systemet</secondary>
</indexterm>

<para>
Her er en kort beskrivelse af de dele, som indgår i docbook
systemet.
</para>

<para>
Et dokument system består af tre dele:
</para>

<orderedlist id="dokumentation-delsystemer">
<listitem>
<para>
En specifikation af formatet, altså en syntax og/eller
dokumentation af de elementer, man bruger, og hvad meningen er med
dem.
</para>
</listitem>
<listitem>
<para>
Filer med formateringskommandoer, som omformer det abstrakte
dokument til et output, som kan printes eller på anden måde
publiceres.
</para>
</listitem>
<listitem>
<para>
Et program (eller flere programmer), som læser og udfører
formateringskommandoerne.
</para>
</listitem>
<listitem>
<para>
En print-mekanisme, som kan omforme fra et almindeligt
printerformat til det, som printeren nu måtte forlange.
</para>
</listitem>
</orderedlist>

<para>
Det var jo 4 ting!? Jo, men den sidste del er jo oftest en
generel mekanisme, som for eksempel Linux/GNU print systemet, der kan tage
en postscript fil og konvertere den til de fleste af de
printerformater, som man kan købe i dag.
</para>

<sect2 id="dokumentation-docbook-bestaar-af">

<title>Hvad docbook består af</title>
<indexterm>
 <primary>docbook</primary>
 <secondary>delsystemer</secondary>
</indexterm>

<para>
DocBook systemet er sammensat af mange elementer. De kommer
forskellige steder fra, og programmørerne (eller forfatterne) har
ikke ønsket at sætte dem sammen i én pakke.
</para>

<para>
Her er en liste over alle de ting, som skal fungere sammen for at
DocBook kildetekster kan "oversættes" til html, pdf eller
postscript filer.
</para>

<itemizedlist mark="bullet">
<listitem>
<para>
Openjade, programmet, som foretager konverteringer af sgml
dokumenter til andre formater. <command>jade</command> læser en document
type definition (DTD) og agerer efter denne instruktion på
dokument "source". 
</para>
</listitem>
   
<listitem>
<para>
DocBook SGML - DTD. Det er de filer, som beskriver reglerne for
de elementer, som OpenJade skal acceptere, altså 
<emphasis>regler</emphasis> eller <emphasis>syntax</emphasis>
for, hvornår man skal bruge for eksempel  &lt;para&gt;.
</para>
</listitem>
   
<listitem>
<para>
ISO entity filer. De definerer de tegn, som bruges i output fra
openjade. Der er mange typer tegn, græske bogstaver, matematiske
tegn, specielle valutasymboler etc. Det er faktisk filer fra
International Standards Organization (ISO).
</para>
</listitem>
   
<listitem>
<para>
DocBook DSSSL, Document Style Semantics and Specification
Language (DSSSL) filer med endelsen .dsl specificerer hvordan
OpenJade skal konvertere til html, rtf, tex med videre. DSSSL er
en ISO standard.
</para>
</listitem>
   
<listitem>
<para>
Docbook-utils. Nogle konverteringer foregår i flere trin. Disse
tools er blot scripts, som samler flere kommandoer til én kommando.
</para>
</listitem>

<listitem>
<para>
collateindex.pl, et perl-script, som kan generere index.sgml til
pdfjadetex - systemet.
</para>
</listitem>
   
<listitem>
<para>
TeX, for eksempel tetex implementationen, som følger med Red Hat og de
fleste andre Linux/GNU distributioner. Man skal også have
hyperref og latex, for at det hele spiller sammen, men dem har
distributøren pakket sammen med tetex.
</para>
</listitem>
   
<listitem>
<para>
jadetex og pdfjadetex, formaterings-specifikationer til TeX, som
gør det muligt at konvertere det output, som jade laver, til
postscript filer og pdf filer.
</para>
</listitem>
   
<listitem>
<para>
HTMLdoc, er en af måderne til generering af bookmarks eller index
til PDF filer.
</para>
</listitem>

<listitem>
<para>
SGMLSpm and docbook2X, for konvertering til man-page format.
</para>
</listitem>
   
</itemizedlist>
</sect2>

<sect2 id="docbook-pakke-forklaringer">
<title>Pakke-forklaringer</title>
<para>
Her er korte forklaringer af pakkerne, som vi skal arbejde med:
</para>

<sect3 id="openjade">

<title>Openjade</title>
<indexterm>
 <primary>Openjade</primary>
</indexterm>
<para>
Openjade: OpenJade er et program, som behandler "Standard
Generalized Markup Language" (SGML) og "Document Style Semantics
and Specification Language" (DSSSL). Den transformerer DocBook
sgml kildefiler til html, tex, rtf, txt og andet. OpenJade er den
essentielle maskine til konvertering af en DocBook fil til andre
formater. TeX output formatet bruges mest som et mellemformat for
at opnå dvi, pdf og postscript filer via TeX macro'er og dvi
konverterings programmer.
</para>
</sect3>

<sect3 id="Dokument-type-definitioner">

<title>Dokument-type-definitioner</title>
<indexterm>
 <primary>DTD</primary>
</indexterm>

<para>
DocBook SGML DTD, dokument-type-definitionen for den eller de
docbook - versioner, som du ønsker at benytte. Der er ikke den
store forskel mellem for eksempel version 4.0 og version 4.1. Ved at rette
i dokument-type-versions-specifikationen øverst i kildeteksten
kan man skifte fra den ene til den anden version, og ofte vil
oversættelse, d.v.s. generering af html og/eller pdf-filer,
stadig kunne foretages uden at der opstår fejl.
</para>

<para>
DTD filerne for en DocBook version ligger i et directory, som på
Red Hat er <filename>/usr/share/sgml/docbook/&lt;dir-navn&gt;</filename>
Disse filer definerer sammen med entity filerne et sæt regler
som anvendes af OpenJade, når den læser kildeteksten af en
sgml-pakke.
</para>

<para>
OpenJade skal have tilgang til et katalog for hver type
dokument, som man forventer, at den skal kunne oversætte. Strengt
taget kan man specificere dcl-filer, d.v.s. docbook-erklæringer,
på kommandolinjen, men det er altså ikke praktisk, så derfor har
man catalog-mekanismen.
</para>

</sect3>

<sect3 id="ISO-entitets-SGML">
<title>ISO-entitets-SGML filer</title>
<indexterm>
 <primary>ISO-entitets-SGML filer</primary>
</indexterm>

<para>
ISO8879 ENTITY SGML. Entiteter definerer repræsentation af specielle
tegn, som enten ikke har nogen keyboard-knap eller som har
speciel funktion i SGML-kildeteksten. 
Eksempel: "&amp;amp;" = '&amp;' og "&amp;ap;" = '&ap;'
(approximation, tilnærmelsesvis-lig-med).
</para>

</sect3>

<sect3 id="DSSSL">
<title>Style-sheets eller DSSSL-filer</title>
<indexterm>
 <primary>Style-sheets</primary>
</indexterm>
<indexterm>
 <primary>DSSSL-filer</primary>
</indexterm>

<para>
DocBook DSSSL, Document Style Semantics and Specification
Language (DSSSL) filerne med .dsl endelse, for hver af de
forskellige typer output format, som man ønsker, html, rtf og
så videre. DSSSL er en ISO-standard, og man kan finde
dokumentationen på OASIS-hjemmesiden, <ulink
url="http://www.oasis-open.org/docbook/">http://www.oasis-open.org/</ulink>.
</para>

</sect3>

<sect3 id="Sgml-tools">
<title>Docbook-utils</title>
<indexterm>
 <primary>docbook-utils</primary>
</indexterm>

<para>Det er små scripts, som benytter et lidt større script, jw,
jade-wrapper, til opsætning, så oversættelsen sker uden for mange
overflødige krav til kommandolinjen.
</para>

<para>
Konvertering af en docbook fil til postscript eller pdf er en 
to-trins proces. Openjade skriver en tex-fil, som så er
input for jadetex, som producerer en dvi, og pdfjadetex, som
producerer en pdf-fil. Postscript opnås så ved at sende dvi filen
igennem dvips. Docbook-utils sparer os for alle de kommandoer, så
vi med en enkelt kommando kan udføre disse operationer.
</para>

</sect3>

<sect3 id="HTMLdoc">


<title>HTMLdoc - et hjælpeprogram</title>

<indexterm>
 <primary>HTMLdoc</primary>
</indexterm>


<para>
Mini-Howto'en for installering af DocBook pakker nævner dette som
et specielt system, men jeg har p.t. ikke nogen idé om, hvilke
Red Hat 7.1++ pakker dette svarer til.
HTMLdoc er et frit program, som konverterer html filer til pdf
eller ps filer.
</para>

</sect3>

<sect3 id="SGMLSPM-docbook2X">


<title>SGMLSPM og docbook2X</title>

<indexterm>
 <primary>SGMLSPM</primary>
</indexterm>
<indexterm>
 <primary>docbook2X</primary>
</indexterm>

<para>
SGMLspm er et perl modul, som sammen med andre programmer
(docbook2X) kan generere man-pages. SGMLSpm er et perl-library
modul, som behandler parsed output fra onsgmls (open new sgml -
parser). SGMLSpm inkluderer en applikation, som hedder sgmlspl,
for at kunne bruge SGMLSpm modul-library'et. Sgmlspl har brug for
spec filer, som kan fås fra forskellige andre sites på
internettet, for hver type konvertering, som den skal foretage.
DocBook2X er en pakke, som leverer spec-filer, der kan
transformere docbook-filer til man-pages.
</para>
</sect3>


</sect2>
</sect1>




<sect1 id="docbook-epilog">
<title>Epilog</title>

<para>
Har du brug for at se flere SGML eksempler, så se f.eks. 
<ulink url="http://&linuxbogurl;/linuxbog/friheden">&linuxbogurl;/linuxbog/friheden</ulink>.
Tilsvarende er der en del eksempler i 
<filename>/usr/lib/sgml/stylesheets/nwalsh-modular/doc</filename>.
</para>

<para>
Har du brug for hjælp til Docbook, så er der en god diskussionsgruppe
at finde på <ulink
url="mailto:docbook-tools-discuss@sourceware.cygnus.com">docbook-tools-discuss@sourceware.cygnus.com</ulink>.
Man tilmelder sig via at skrive til <ulink
url="mailto:docbook-tools-discuss-subscribe@sourceware.cygnus.com">docbook-tools-discuss-subscribe@sourceware.cygnus.com</ulink>.
</para>

<itemizedlist mark="bullet">
<listitem> 
 <para>
  Mark Galassi "Kom i gang"
  <ulink url="http://nis-www.lanl.gov/~rosalia/mydocs/docbook-intro.html">http://nis-www.lanl.gov/~rosalia/mydocs/docbook-intro.html</ulink>
 </para>
</listitem>

<listitem>
 <para>
Du kan også have glæde af den fulde Docbook dokumentation, der kan
hentes fra <ulink url="http://www.oasis-open.org/docbook/">http://www.oasis-open.org/docbook/</ulink>.
 </para>
</listitem>

<listitem> 
 <para>
  Bogen "DocBook - The Definitive Guide" af Norman Walsh &amp; Leonard
  Muellner - O'Reilly. Den kan læses på 
  <ulink url="http://docbook.org/tdg/">http://docbook.org/tdg/</ulink>.
  Den er måske ikke "The Definitive Guide" i praksis...
 </para>
</listitem>

<listitem>
 <para>
 A Practical Introduction to DocBook
 <ulink url="http://www.oswg.org/oswg-nightly/oswg/en_US.ISO_8859-1/articles/DocBook-Intro/docbook-intro/index.html">http://www.oswg.org/oswg-nightly/oswg/en_US.ISO_8859-1/articles/DocBook-Intro/docbook-intro/index.html</ulink>
 </para>
</listitem>

<listitem> 
 <para>
 DocBook HOWTO
 <ulink url="http://metalab.unc.edu/godoy/using-docbook/using-docbook.html">http://metalab.unc.edu/godoy/using-docbook/using-docbook.html</ulink>
 </para>
</listitem>

<listitem> 
 <para>
 Practical information about the use of SGML/XML and DocBook on Debian
 <ulink url="http://www.debian.org/doc/manuals/sgml-howto/howto.html">http://www.debian.org/doc/manuals/sgml-howto/howto.html</ulink>
 </para>
</listitem>

<listitem> 
 <para>
  Praktisk guide i brug af SGML/XML og Docbook på Windows NT
 <ulink url="http://ourworld.compuserve.com/homepages/hoenicka_markus/ntsgml.html">http://ourworld.compuserve.com/homepages/hoenicka_markus/ntsgml.html</ulink>
 </para>
</listitem>


<listitem> 
<indexterm><primary>HTML til SGML/DocBook oversættelse</primary></indexterm>
<indexterm><primary>SGML/DocBook</primary><secondary>oversættelse fra HTML</secondary></indexterm>
 <para>
Skal du konvertere fra HTML til SGML/DocBook kan du have glæde af
Carsten Svaneborgs oversætter, der findes på 
<ulink url="http://&linuxbogurl;/misc/html2sgml">&linuxbogurl;/misc/html2sgml</ulink>
 </para>
</listitem>


<listitem> 
 <para>
  Ret komplet guide om O'Reilly's DocBook baserede produktions systemer
 <ulink url="http://www.oreilly.com/people/staff/crism/dsssl/orastyle/index.html">http://www.oreilly.com/people/staff/crism/dsssl/orastyle/index.html</ulink>
 </para>
</listitem>

<listitem> 
 <para>
  FreeBSD tutorial
 <ulink url="http://www.freebsd.org/tutorials/docproj-primer">http://www.freebsd.org/tutorials/docproj-primer</ulink> 
</para>
</listitem>

<listitem>
 <para>
  OASIS links
  <ulink url="http://www.oasis-open.org/docbook/documentation/other.html
">http://www.oasis-open.org/docbook/documentation/other.html</ulink>
 </para>
</listitem>

<listitem>
 <para>
  Integration mellem Emacs og Docbook <ulink url="http://www.lst.de/~eric/crash-course/HTML/emacs-psgml-mode-tips.html">http://www.lst.de/~eric/crash-course/HTML/emacs-psgml-mode-tips.html</ulink>
 </para>
</listitem>

<listitem> 
 <para>
  Helt ny "Crash-Course to DocBook" <ulink url="http://public.lst.de/~eric">http://public.lst.de/~eric</ulink>
 </para>
</listitem>


</itemizedlist>


<sect2 id="syntax-edit">
<title>Editorer med support for SGML syntax highlighting</title>

<sect3 id="emacs">
<title>Emacs med nxml</title>

<para>
Der er nogen, som har haft stor gavn af en xml syntax support
pakke til GNU emacs. Pakken hedder nxml, er skrevet af James
Clark og alene dette navn kan få Linux Groff og Jade brugere til
at spidse øren, idet James Clark har skrevet de to programmer.
Pakken kan hentes på 
<ulink url="http://www.thaiopensource.com/download/">
James Clark's site </ulink> og er under stadig
udvikling.
</para>

<para>
Det er lettest at gå til nxml
hvis man kender Emacs i forvejen - Emacs ligner ikke
rigtigt nogen anden editor. Så er nxml til gengæld ret
enkelt at bruge da kernefunktionaliteten ligger i blot
tre kommandoer som til gengæld gør et stort arbejde for
en. On-the-fly validering er bestemt også en rar ting.
</para>

<para>
Valideringsskemaer ligger i mappen
<filename>nxml-mode-yyyymmdd/schema</filename> som RELAX NG skemaer i
kompakt notation, .rnc filer. Som default kommer nxml
med skemaer for docbook, xhtml, xsl og RELAX NG(xml
notation). nxml bestemmer hvilket skema der skal
anvendes på baggrund af rodelementet i ens dokument.
Hvis rodelementet er 'article' eller 'book' anvendes 
docbook. Filen schema.xml i schema-mappen bestemmer
hvordan skemaer og rodelementer hænger sammen.
</para>

<para>
Hvis man starter på et nyt docbook-dokument, må man give
kommandoen C-c C-a (svarer til Ctrl-C Ctrl-A i normal notation)
efter at have skrevet rodelementet - ellers har man blot den
generiske xml-funktionalitet (Using vacuous schema).
</para>

<para>
Hjælpen findes ved at give kommandoen C-h m som giver
en oversigt over nxml's kommandoer (hvis man er i
nxml-mode) eller C-h i som giver adgang til Emacs' info
system. Her finder man også dokumentation på nxml-mode
(hvis info-oversigten er lang, brug C-s nxml). For
selve installationen som ikke er ret kompliceret, kig i
Readme.
</para>

</sect3>


<sect3 id="gvim">
<title>gvim</title>
<para>
Gvim har de samme faciliteter som Emacs, og flere til endda. Der
er mange typer completion af XML syntaxen. Syntax for SGML er
installeret fra starten (VIM havde SGML syntax for 6 år siden
allerede, men det anbefales at bruge gvim 6.1 eller nyere.)
</para>

<para>
Brug kommandoen <command>:help completion</command> for at få
mere at vide om faciliteter for hjælp under editering, og brug
kommandoen <command>:help syntax </command> for at få en
forklaring af selve syntax systemet.
</para>

</sect3>
</sect2>
</sect1>
</chapter>
