<chapter id="docbook">
<title>DocBook</title>


<para>
DocBook er et sæt af stylesheets, som beskriver hvordan man laver en
bog, artikel eller lignende ud af tekstfiler.  DocBook er ligesom
LaTeX således <emphasis>ikke</emphasis> et grafisk miljø hvor man
skriver og kan se resultatet grafisk som det er tilfældet med Word,
WordPerfect eller StarOffice. Den store fordel med DocBook er at der
er gode værktøjer til at oversætte DocBook til HTML, PostScript, RTF
og PDF og få et pænt resultat.
</para>

<para>
Før vi tager fat på installation og en teknisk gennemgang af det
"sprog" man skal skrive i - men en vilkårlig teksteditor - så er der i 
<xref linkend="docbook-ex1"> et eksempel på lidt tekst skrevet i
DocBook. Som det kan ses så er det kildeteksten til teksten ovenfor som
er vist. DocBook minder meget om at skrive HTML-kode - dvs. koderne 
afgrænses som &lt;KODEN&gt;.
</para>

<para>
Grunden til at denne bogserie er skrevet i DocBook er at det var sjovt og
prøve og at det har vist sig at det fungerer godt med automatiske
krydshenvisninger og det er nemt at håndtere store bogværker på denne
måde.
</para>

<example id="docbook-ex1">
<title>Eksempel på DocBook kode</title>
<indexterm><primary>DocBook, eksempel på kode</primary></indexterm>
<screen>
&lt;chapter id="docbook"&gt;
&lt;title&gt;DocBook&lt;/title&gt;

&lt;para&gt;
DocBook er et sæt af stylesheets, som beskriver hvordan man laver en
bog, artikel eller lignende ud af tekstfiler.  DocBook er ligesom
LaTeX således &lt;emphasis&gt;ikke&lt;/emphasis&gt; et grafisk miljø hvor man
skriver og kan se resultatet grafisk som det er tilfældet med Word,
WordPerfect eller StarOffice. Den store fordel med DocBook er at der
er gode værktøjer til at oversætte DocBook til HTML, PostScript, RTF
og PDF og få et pænt resultat.
&lt;/para&gt;
</screen>

</example>

<sect1 id="docbook-Installation">
<title>Installation af Docbook værktøjer</title>
<indexterm><primary>installation</primary></indexterm>

<para>
En engelsk installationsvejledning kan findes på 
<ulink url="http://www.linuxdoc.org/HOWTO/mini/DocBook-Install/index.html">http://www.linuxdoc.org/HOWTO/mini/DocBook-Install/index.html</ulink>, og nedenfor er en kort vejledning på dansk.
</para>

<para>
For at bruge DocBook skal der installeres en del pakker, og de skal
installeres i den rigtige rækkefølge. Vi vil anbefale dig at
installere de pakker, der hører med til Red Hat 7.2 evt. 6.2, da der 
har været alvorlige fejl i Red Hat 7.0 og 7.1.
Du skal bruge pakkerne sgml-common*,  docbook*,
openjade-*, sgml-tools* og tetex*.
</para>

<para>
Nu er vi ved at være klar til at få installeret de hentede
pakker. Stil dig i det katalog, hvor pakkerne ligger (typisk din cdrom) og kør:
</para>

<itemizedlist mark="bullet">
<listitem>
 <para>
Red Hat 7.2 - cdrom 1:
 </para>

<SCREEN>
<prompt>[root@MinMaskine RPMS]#</prompt> <userinput>rpm -Uvh docbook*.rpm</userinput>
<prompt>[root@MinMaskine RPMS]#</prompt> <userinput>rpm -Uvh openjade*.rpm</userinput>
<prompt>[root@MinMaskine RPMS]#</prompt> <userinput>rpm -Uvh sgml-common-*.rpm</userinput>
</SCREEN>

</listitem>
<listitem> 

 <para>
Red Hat 7.2 - cdrom 2:
 </para>

<SCREEN>
<prompt>[root@MinMaskine RPMS]#</prompt> <userinput>rpm -Uvh jadetex*.rpm</userinput>
<prompt>[root@MinMaskine RPMS]#</prompt> <userinput>rpm -Uvh docbook*.rpm</userinput>
<prompt>[root@MinMaskine RPMS]#</prompt> <userinput>rpm -Uvh tetex*.rpm</userinput>
</SCREEN>

 <para>
 </para>
</listitem>
</itemizedlist>

<para>
Så er pakkerne installeret. Der skal dog et par små tilretninger til,
før tingene kører helt godt på dansk. Se disse i <xref
linkend="docbook-texconfig"> og <xref linkend="rh72-tilretninger">.
</para>

<para>
Se evt. også <ulink url="http://hvdkooij.xs4all.nl/docs-docbook.cms">http://hvdkooij.xs4all.nl/docs-docbook.cms</ulink>.
</para>

<para>
Der er en enkelt pakke man nok skal opdatere - læs mere på
<ulink url="http://www.redhat.com/support/errata/RHEA-2001-167.html">http://www.redhat.com/support/errata/RHEA-2001-167.html</ulink>.
</para>

</sect1>



<sect1 id="docbook-Igang">
<title>Igang med Docbook</title>

<para>
Skal du igang med Docbook, så kan du finde dokumentationen 
på <ulink url="http://www.oasis-open.org/docbook/">http://www.oasis-open.org/docbook/</ulink>. 
Her kan du finde information om alle de tags, som kan anvendes. Desværre
må man sige, at det er en ringe hjælp for dem som skal igang med at
skrive for første gang.  Det skal denne bog råde bod på. Først ser
vi på et par af de vigtigste SGML-tags og senere hvordan man bruger
dem til at lave et helt dokument.
</para>

<para>
Det første vi skal vide er at alle tags starter med &lt; derefter
kommer tag'et og dette afsluttes med &gt;. Tag'et kan være skrevet med
små bogstaver eller store - det er ligegyldigt.
Et eksempel er <command>&lt;command&gt;</command> som viser en kommando
starter. Tilsvarende skal næsten alle tags afsluttes med det samme tag
med en skråstreg foran tag'et. Til <command>&lt;command&gt;</command>
skal du efter kommandoen er vist skrive
<command>&lt;/command&gt;</command>.
</para>

<indexterm><primary>&gt;</primary></indexterm>
<indexterm><primary>&lt;</primary></indexterm>

<para>
Ud over at &lt; har speciel betydning, så har &amp; også speciel
betydning. Dette betyder også, at du ikke kan skrive &lt; og &amp;
<emphasis>direkte</emphasis> i din tekst, men i stedet skal skrive
&lt; og &amp; i din tekst, men skal skrive
<emphasis>&amp;lt;</emphasis> og <emphasis>&amp;amp;</emphasis> (Du
kan så vælge også at skrive &gt; som &amp;gt; - men det er ikke
tvungent).
</para>



<sect2 id="docbook-para">
<title>Tekstblokke - para</title>
<indexterm><primary>para</primary></indexterm>
<indexterm><primary>SGML-tags</primary><secondary>para</secondary></indexterm>
<para>
Alle tekstblokke skal indkapsles med <command>&lt;para&gt;</command>
og <command>&lt;/para&gt;</command>. Man kan kun få liniedeling ved at
lade SGML gøre dette automatisk eller stoppe blokken og starte en ny.
</para>

<para>
Man må ikke have andre strukturer inden i
<command>&lt;para&gt;</command> blokken såsom lister
eller tabeller. <command>&lt;para&gt;</command> blokken
skal i så fald afsluttes først.
</para>

<example>
<title>para</title>
<programlisting>
&lt;para&gt;
Dette er en tekstblok.
&lt;/para&gt;

&lt;para&gt;
Dette er en anden tekstblok, som starter på ny linie.
&lt;/para&gt;
</programlisting>

<para>
Dette kommer til at se ud som: 
</para>

<para>
Dette er en tekstblok.
</para>

<para>
Dette er en anden tekstblok, som starter på ny linie.
</para>
</example>

<sect3 id="docbook-command">
<title>Kommandoer - command</title>
<indexterm><primary>SGML-tags</primary><secondary>command</secondary></indexterm>
<indexterm><primary>command</primary></indexterm>
<para>
I en <command>&lt;para&gt;</command> block skal man
måske indikere at nu kommer der en kommando, som kan
køres. 
</para>

<example>
<title>command</title>
<programlisting>
I Linux kan man skrive &lt;command&gt;find / -name
"*.htm?"&lt;/command&gt; for at finde HTML-filer.
</programlisting>

<para>
Dette kommer til at se ud som:
</para>

<para>
I Linux kan man skrive <command>find / -name
"*.htm?"</command> for at finde HTML-filer.
</para>
</example>

</sect3>

<sect3 id="docbook-filename">
<indexterm><primary>filename</primary></indexterm>
<indexterm><primary>SGML-tags</primary><secondary>filename</secondary></indexterm>

<title>Filer - filename</title>
<para>
For at indikere et filnavn i en
<command>&lt;para&gt;</command> kan man bruge
<command>&lt;filename&gt;</command>
</para>

<example>
<title>filename</title>

<programlisting>
Linux har altid filen &lt;filename&gt;/etc/password&lt;/filename&gt;.
</programlisting>

<para>
Dette kommer til at se ud som:
</para>

<para>
Linux har altid filen <filename>/etc/password</filename>.
</para>
</example>
</sect3>

<sect3 id="docbook-emphasis">
<title>Skråskrift - emphasis</title>
<indexterm><primary>emphasis</primary></indexterm>
<indexterm><primary>SGML-tags</primary><secondary>emphasis</secondary></indexterm>

<para>
For at markere en del af sætningen med kursiv skrift i en
<command>&lt;para&gt;</command> kan man bruge
<command>&lt;emphasis&gt;</command>
</para>

<example>
<title>emphasis</title>

<programlisting>
Linux giver &lt;emphasis&gt;mange&lt;/emphasis&gt; muligheder.
</programlisting>

<para>
Dette kommer til at se ud som:
</para>

<para>
Linux giver <emphasis>mange</emphasis> muligheder.
</para>
</example>

</sect3>

<sect3 id="docbook-ulink">
<indexterm><primary>ulink</primary></indexterm>
<indexterm><primary>SGML-tags</primary><secondary>ulink</secondary></indexterm>

<title>URL - ulink</title>
<para>
For at markere en URL i en
<command>&lt;para&gt;</command> kan man bruge
<command>&lt;ulink&gt;</command>
</para>

<example>
<title>ulink</title>

<programlisting>
Læs om SSLUG på
&lt;ulink url="http://www.sslug.dk"&gt;SSLUG's hjemmeside http://www.sslug.dk&lt;/ulink&gt;. Der er
mange aktiviteter.
</programlisting>

<para>
Dette kommer til at se ud som:
</para>

<para>
Læs om SSLUG på
<ulink url="http://www.sslug.dk">SSLUG's hjemmeside http://www.sslug.dk</ulink>. Der er
mange aktiviteter.
</para>
</example>

</sect3>

</sect2>



<sect2 id="docbook-programlisting-og-screen">
 <title>Vise kildetekst og skærmbilleder - programlisting og screen</title>

 <indexterm>
  <primary>programlisting</primary>
 </indexterm>

 <indexterm>
  <primary>screen</primary>
 </indexterm>

 <indexterm>
  <primary>SGML-elementer</primary>
  <secondary>programlisting</secondary>
 </indexterm>

 <indexterm>
  <primary>SGML-elementer</primary>
  <secondary>screen</secondary>
 </indexterm>

 <para>
  Har man brug for at vise noget kildetekst bør man sætte det ind i et
  "programlisting"-element. Hvis man derimod vil vise noget der står på
  skærmen bør man sætte det ind i et "screen"-element. Både i
  "programlisting"- og "screen"-elementer følger linieskiftene i uddata
  (selvfølgelig) linieskiftene i SGML/XML-koden.
 </para>

<!--
   Det er noget vrøvl at "programlisting"- og "screen"-elementer ikke
   kan stå indeni "para"-elementer.
-->

 <example>
  <title>programlisting</title>

  <para>
   Koden:

<programlisting>
&lt;para&gt;
Nu vil jeg vise lidt Perl-kode
&lt;/para&gt;

&lt;programlisting&gt;
#!/usr/bin/perl -i.bak -p
s/Microsoft/Linux/g;
&lt;/programlisting&gt;
</programlisting>

  vil resultere i disse uddata:
 </para>

<para>
Nu vil jeg vise lidt Perl-kode
</para>

<programlisting>
#!/usr/bin/perl -i.bak -p
s/Microsoft/Linux/g;
</programlisting>
 </example>

 <sect3 id="docbook-screen-mere">
  <title>Elementer i "screen"-elementet</title>

  <indexterm>
   <primary>prompt</primary>
  </indexterm>

  <indexterm>
   <primary>userinput</primary>
  </indexterm>

  <indexterm>
   <primary>SGML-elementer</primary>
   <secondary>prompt</secondary>
  </indexterm>

  <indexterm>
   <primary>SGML-elementer</primary>
   <secondary>userinput</secondary>
  </indexterm>

  <para>
   For at kunne skelne mellem hvad et program udskriver og hvad brugeren
   taster, så anvender jeg et par Docbook elementer inden i
   "screen"-elementet. "prompt" bruges til spørgsmål til brugeren og
   "userinput" bruges til det brugeren indtaster.
  </para>

  <example>
   <title>"prompt" og "userinput" i et "screen"-element</title>

<programlisting>
&lt;programlisting&gt;
&lt;prompt&gt;[root@daisy /root]# &lt;/prompt&gt; &lt;userinput&gt;ls -al /etc/passwd&lt;/userinput&gt;
-rw-r--r-- 1 root root 649 jun 16 21:54 /etc/passwd 
&lt;/programlisting&gt;
</programlisting>

   <para>
    Dette kommer til at se ud som:

<programlisting>
<prompt>[root@daisy /root]# </prompt> <userinput>ls -al /etc/passwd</userinput>
-rw-r--r-- 1 root root 649 jun 16 21:54 /etc/passwd 
</programlisting>
   </para>
  </example>
 </sect3>
</sect2>

<sect2 id="docbook-tabeller-etc">
<title>Tabeller, figurer, kommentarer og lister</title>

<sect3 id="docbook-tabeller">
<indexterm><primary>table</primary></indexterm>
<indexterm><primary>SGML-tags</primary><secondary>table</secondary></indexterm>

<title>Tabeller - tabel</title>
<para>
Tabeller laves med
<command>&lt;table&gt;</command>. Bemærk at denne ikke må
være inden i en <command>&lt;para&gt;</command>. I
eksemplet skal med med <command>cols=</command> angives
antallet af søjler. Indrykningen har ingen betydning for
resultatet, og anvendes alene til at man selv har
overblik over koderne. Igen bemærkes, at det er
ligegyldigt om man anvender store eller små bogstaver.
</para>

<example>
<title>table</title>

<programlisting>
&lt;TABLE ID="db-firmaet"&gt;
&lt;TITLE&gt;Firma-tabel&lt;/TITLE&gt;
&lt;TGROUP cols=3 align="char"&gt;
&lt;THEAD&gt;
  &lt;ROW&gt;
   &lt;ENTRY&gt;FirmaNavn&lt;/ENTRY&gt;
   &lt;ENTRY&gt;Vej&lt;/ENTRY&gt;
   &lt;ENTRY&gt;PostNr&lt;/ENTRY&gt;
  &lt;/ROW&gt;
&lt;/THEAD&gt;
&lt;TBODY&gt;
&lt;ROW&gt;
 &lt;ENTRY&gt;Vagabondos&lt;/ENTRY&gt;
 &lt;ENTRY&gt;Tagensvej 100&lt;/ENTRY&gt;
 &lt;ENTRY&gt;2200&lt;/ENTRY&gt;
&lt;/ROW&gt;
&lt;ROW&gt;
 &lt;ENTRY&gt;DKUUG&lt;/ENTRY&gt;
 &lt;ENTRY&gt;Fruebjergvej 3&lt;/ENTRY&gt;
 &lt;ENTRY&gt;2100&lt;/ENTRY&gt;
&lt;/ROW&gt;
&lt;ROW&gt;
 &lt;ENTRY&gt;Niels Bohr Institutet&lt;/ENTRY&gt;
 &lt;ENTRY&gt;Blegdamsvej 17-21&lt;/ENTRY&gt;
 &lt;ENTRY&gt;2100&lt;/ENTRY&gt;
&lt;/ROW&gt;
&lt;/TBODY&gt;
&lt;/TGROUP&gt;
&lt;/TABLE&gt;
</programlisting>

<para>
Dette kommer til at se ud som:
</para>
</example>

<TABLE ID="db-firmaet">
<TITLE>Firma-tabel</TITLE>
<TGROUP cols=3 align="char">
<THEAD>
 <ROW>
  <ENTRY>FirmaNavn</ENTRY>
  <ENTRY>Vej</ENTRY>
  <ENTRY>PostNr</ENTRY>
 </ROW>
</THEAD>
<TBODY>
<ROW>
 <ENTRY>Vagabondos</ENTRY>
 <ENTRY>Tagensvej 100</ENTRY>
 <ENTRY>2200</ENTRY>
</ROW>
<ROW>
 <ENTRY>DKUUG</ENTRY>
 <ENTRY>Fruebjergvej 3</ENTRY>
 <ENTRY>2100</ENTRY>
</ROW>
<ROW>
 <ENTRY>Niels Bohr Institutet</ENTRY>
 <ENTRY>Blegdamsvej 17-21</ENTRY>
 <ENTRY>2100</ENTRY>
</ROW>
</TBODY>
</TGROUP>
</TABLE>

<para>
Bemærk at vi har anført <filename>ID="label"</filename> sammen
med <command>&lt;table&gt;</command>. Det er for at
kunne krydsreferere til tabellen fra et sted i teksten.
</para>

</sect3>

<sect3 id="docbook-figure">
<indexterm><primary>figure</primary></indexterm>
<indexterm><primary>SGML-tags</primary><secondary>figure</secondary></indexterm>

<title>Figurer - figure</title>
<indexterm><primary>magic</primary></indexterm>

<para>
Figurer er en smule værre i Docbook, fordi man ikke har
så store muligheder (under Linux i hvertfald). Selvom
det anføres at en lang række grafik formater er
understøttet, så gælder det i praksis ikke, hvis man
skal kunne oversætte både til HTML, PDF og Postscript.
</para>

<example>
<title>figure</title>

<programlisting>
&lt;FIGURE ID="linustorvalds-fig" FLOAT="1"&gt;
&lt;TITLE&gt;Linus Torvalds&lt;/TITLE&gt;
&lt;GRAPHIC FILEREF="linus.&amp;magic;"  SCALE="60"&gt;&lt;/GRAPHIC&gt;
&lt;/FIGURE&gt;
</programlisting>

<para>
Dette kommer til at se ud som:
</para>

</example>

<FIGURE ID="linustorvalds-fig" FLOAT="1">
<TITLE>Linus Torvalds</TITLE>
<GRAPHIC FILEREF="linus.&magic;"  SCALE="60"></GRAPHIC>
</FIGURE>

<para>
Bemærk at vi igen her har sat <command>ID="label"</command> ind under
<command>&lt;FIGURE ID="linustorvalds-fig" FLOAT="1"&gt;</command> for at
kunne krydsreferere til figuren. Du skal selv skalere billedet (i PDF og
Postscript udskrift via <command>SCALE</command>-parameteren.
</para>

<para>
Hvad nu med &amp;magic;? Der er et problem med grafik - hvis man alene
laver PDF og HTML-filer, så kan man anføre at det er en
<filename>.png</filename> fil eller lignende. Skal man også lave
PostScript, så skal man anvende <filename>.eps</filename>-filer. Der
skal en konvertering af billederne til. En nem måde at styre
magic-variablen er at tilføje denne i den hoved-sgml-fil man laver
</para>

<programlisting>
&lt;!ENTITY % magic-entities SYSTEM "magic.sgml"&gt;
  %magic-entities;  &lt;!-- This is where we include it --&gt;
</programlisting>

</sect3>

<sect3 id="docbook-fodnoter">
<title>Fodnoter</title>
<indexterm><primary>footnote</primary></indexterm>
<indexterm><primary>SGML-tags</primary><secondary>footnote</secondary></indexterm>
<para>
Skal du lige lave en fodnote i din SGML-fil skal du prøve dette
</para>

<programlisting>
&lt;para&gt;
Denne tekst er til almindelig brug
&lt;footnote id="fodid"&gt;
&lt;para&gt;
Denne tekst ender som fodnote.
&lt;/para&gt;
&lt;/footnote&gt;
&lt;/para&gt;
</programlisting>

<para>
Som eksempler bliver dette til
</para>


<para>
Denne tekst er til almindelig brug
<footnote id="fodid">
<para>
Denne tekst ender som fodnote.
</para>
</footnote>
</para>


</sect3>

<sect3 id="docbook-sidebar">
<title>Info-boks</title>
<indexterm><primary>sidebar</primary></indexterm>
<indexterm><primary>SGML-tags</primary><secondary>sidebar</secondary></indexterm>
<para>
Skal du lave en info-boks findes tagget "sidebar".
</para>

<programlisting>
&lt;sidebar&gt;
&lt;para&gt;
Det er da ikke særlig svært at se hvordan man laver en 
"sidebar". 
&lt;/para&gt;
&lt;/sidebar&gt;
</programlisting>

<sidebar>
<para>
Det er da ikke særlig svært at se hvordan man laver en 
"sidebar". 
</para>
</sidebar>

</sect3>








<sect3 id="docbook-kommentarer">
<title>Kommentarer</title>
<indexterm><primary>&lt;!-- kommentar --&gt;</primary></indexterm>
<indexterm><primary>SGML-tags</primary><secondary>&lt;!-- kommentar --&gt;</secondary></indexterm>
<para>
Skal du lige lave en kommentar i din SGML-fil som ikke kommer med ud i
HTML, PDF og Postscript-filerne, så kan du anvende.
</para>

<programlisting>
&lt;!-- Dette er en kommentar --&gt;
</programlisting>

<para>
Bemærk at der er to minus-tegn efter hinanden. I udprintning vil de se
ud som ét langt minustegn.
</para>
</sect3>

<sect3 id="docbook-xref">
<indexterm><primary>id</primary></indexterm>
<indexterm><primary>xref</primary></indexterm>
<indexterm><primary>SGML-tags</primary><secondary>id</secondary></indexterm>
<indexterm><primary>SGML-tags</primary><secondary>xref</secondary></indexterm>

<title>Referencer - id og xref </title>
<para>
Vi har allerede set at vi kan give en tabel og en figur en
label. Dette gjorde vi med <command>ID="label"</command>. Tilsvarende
kan vi referere til den label i en tekstblok et andet sted ved at
bruge <command>&lt;xref&gt;</command>. Bemærk at denne kommando
<emphasis>ikke</emphasis> har en tilsvarende
<command>&lt;/xref&gt;</command>. Lad i øvrigt være med at bruge
danske bogstaver, mellemrum og understregning
(eng. underscore). Grunden er at værdien af "ID" bruges til at
filnavne - og her kan man ikke tillade de nævnte tegn.
</para>

<example>
<title>id og xref</title>

<programlisting>
Vi kan referere til den forrige figur, altså 
&lt;xref linkend="linustorvalds-fig"&gt; eller tabellen 
&lt;xref linkend="db-firmaet"&gt; uden at tænke på hvilket
nummer de har. Vi anvender blot deres label.
</programlisting>

<para>
Dette kommer til at se ud som:
</para>

<para>
Vi kan referere til den forrige figur, altså 
<xref linkend="linustorvalds-fig"> eller tabellen 
<xref linkend="db-firmaet"> uden at tænke på hvilket
nummer de har. Vi anvender blot deres label.
</para>
</example>

</sect3>

<sect3 id="docbook-lister">
<title>Lister - itemizedlist</title>
<indexterm><primary>lister</primary></indexterm>
<indexterm><primary>SGML-tags</primary><secondary>itemizedlist</secondary></indexterm>


<para>
Ofte har man brug for at lave en liste. I Docbook er der
flere muligheder, jeg bruger dog kun en type med enkle
punkter
</para>

<example>
<title>itemizedlist</title>

<programlisting>
&lt;itemizedlist mark="bullet"&gt;
&lt;listitem&gt;
 &lt;para&gt;
  Første punkt i listen skriver jeg her.
 &lt;/para&gt;
&lt;/listitem&gt;
&lt;listitem&gt; 
 &lt;para&gt;
  Andet punkt i listen skriver jeg derefter her.
 &lt;/para&gt;
&lt;/listitem&gt;
&lt;/itemizedlist&gt;
</programlisting>

<para>
Dette kommer til at se ud som:
</para>


<itemizedlist mark="bullet">
<listitem>
 <para>
  Første punkt i listen skriver jeg her.
 </para>
</listitem>
<listitem> 
 <para>
  Andet punkt i listen skriver jeg derefter her.
 </para>
</listitem>
</itemizedlist>

<para>
Bemærk at <command>&lt;itemizedlist&gt;</command> ikke er inde i en 
<command>&lt;para&gt;</command>, men hver af de tekstblokke som nævnes
er det (samt en <command>&lt;listitem&gt;</command>). 
</para>
</example>
</sect3>
</sect2>



<sect2 id="docbook-Opdeling-af-dokument">
<indexterm><primary>sect</primary></indexterm>
<indexterm><primary>chapter</primary></indexterm>
<indexterm><primary>SGML-tags</primary><secondary>sect</secondary></indexterm>
<indexterm><primary>SGML-tags</primary><secondary>chapter</secondary></indexterm>

<title>Opdeling af dokument</title>
<para>
En bog inddeles i kapitelniveauer med
<command>&lt;chapter&gt;</command>, og tilsvarende lavere niveauer
<command>&lt;sect1&gt;</command>, <command>&lt;sect2&gt;</command>, og
<command>&lt;sect3&gt;</command>. Opdelingen afspejler ikke
nødvendigvis de filer man skriver. For hver ny inddeling
<emphasis>skal</emphasis> man have et <command>&lt;title&gt;&lt;/title&gt;</command>
til at anføre titel.
</para>

<para>
En artikel har samme inddelinger, pånær
<command>&lt;chapter&gt;</command>, og første inddelingsniveau er 
<command>&lt;sect1&gt;</command>.
</para>

<para>
Hver af de tags kan tage en <command>ID="label"</command>, som man kan
bruge til at referere til.
</para>

<example>
<title>Opdeling</title>

<programlisting>
&lt;sect2 id="introduktion"&gt;
&lt;title&gt;Dette er en introduktion&lt;/title&gt;
 &lt;para&gt;
  Tekst kommer her i en para-blok og bemærkede du at afsnittet har
  label "introduktion"?
 &lt;/para&gt;
 &lt;para&gt;
  Havde det været en bog, skulle vi starte med chapter og sect1, men
  men det er jo et eksempel :-)
 &lt;/para&gt;
 &lt;para&gt;
  Læs mit næste afsnit i &lt;xref linkend="naeste-inddeling"&gt;.
 &lt;/para&gt;

 &lt;sect3 id="naeste-inddeling"&gt;
 &lt;title&gt;Dette er næste inddeling&lt;/title&gt;
   &lt;para&gt;
    Her er et underafsnit. Du skal bemærke, at jeg ikke bruger æ, ø og
    å i labels. Det giver ellers problemer med HTML-filnavne.
   &lt;/para&gt;
   &lt;para&gt;
   Bemærk at &lt;command&gt;&amp;lt;!-- Dette er en kommentar --&amp;gt;&lt;/command&gt; kan 
   bruges til at angive en kommentar som ikke vises
   &lt;/para&gt;
 &lt;/sect3&gt;
&lt;/sect2&gt; &lt;!-- Denne afslutning skal man huske --&gt;
</programlisting>

<para>
Dette kommer til at se ud som:
</para>
</example>

<sect3 id="docbook-introduktion">
<title>Dette er en introduktion</title>
 <para>
  Tekst kommer her i en para-blok og bemærkede du at afsnittet har
  label "introduktion"?
 </para>
 <para>
  Havde det været en bog, skulle vi starte med chapter og sect1, men
  det er jo et eksempel :-)
 </para>
 <para>
  Læs mit næste afsnit i <xref linkend="docbook-naeste-inddeling">.
 </para>

 <sect4 id="docbook-naeste-inddeling">
 <title>Dette er næste inddeling</title>
   <para>
    Her er et underafsnit. Du skal bemærke, at jeg ikke bruger æ, ø og
    å i labels. Det giver ellers problemer med HTML-filnavne.
   </para>
   <para>
   Bemærk at <command>&lt;!-- Dette er en kommentar --&gt;</command> kan 
   bruges til at angive en kommentar som ikke vises
   </para>
 </sect4>
</sect3> <!-- Denne afslutning skal man huske -->

<sect3 id="docbook-Startfilen">
<title>Start filen</title>
<para>
Nu har vi set på inddelinger af dokumentet og hvordan man laver
tabeller, figurer, viser kildetekst og URL'er.
</para>

<para>
Lad os antage at man har lavet tre kapitler med hver deres
<command>&lt;chapter id="label-for-kapitel"&gt;</command>, som er gemt
i tre filer <filename>introduktion.sgml</filename>,
<filename>linux.sgml</filename> og
<filename>konklusion.sgml</filename>. Her er så en opskrift på at lave
hoved-filen som binder det hele sammen. 
</para>

<para>
Forfattere angives i <command>&lt;AUTHORGROUP&gt;</command> og titler
som tidligere vist i <command>&lt;title&gt;</command>.
</para>

<programlisting>
&lt;!doctype book PUBLIC "-//OASIS//DTD DocBook V3.1//EN" [
 &lt;!entity intro SYSTEM "introduktion.sgml"&gt; &lt;!-- Filnavn ej lig id --&gt;
 &lt;!entity Linux SYSTEM "linux.sgml"&gt; &lt;!-- Filnavn ej lig id --&gt;
 &lt;!entity konklusion SYSTEM "konklusion.sgml"&gt; &lt;!-- Filnavn her lig id --&gt;
]&gt;

&lt;book id="index" lang="da"&gt;
&lt;bookinfo&gt;
 &lt;title&gt;Bog titel kommer her&lt;/title&gt;
 &lt;subtitle&gt;Her er en undertitel&lt;/subtitle&gt;

 &lt;AUTHORGROUP&gt;

 &lt;AUTHOR&gt;
   &lt;FIRSTNAME&gt;Peter&lt;/FIRSTNAME&gt;
   &lt;SURNAME&gt;Toft&lt;/SURNAME&gt;
 &lt;/AUTHOR&gt;

 &lt;AUTHOR&gt;
   &lt;FIRSTNAME&gt;Hans&lt;/FIRSTNAME&gt;
   &lt;SURNAME&gt;Schou&lt;/SURNAME&gt;
 &lt;/AUTHOR&gt;

 &lt;/AUTHORGROUP&gt;
 &lt;COPYRIGHT&gt;
   &lt;YEAR&gt;2002&lt;/YEAR&gt;
   &lt;HOLDER&gt;Peter Toft og mange andre under
   "ÅDL" licensen&lt;/HOLDER&gt;
 &lt;/COPYRIGHT&gt;

 &lt;ABSTRACT&gt;
  &lt;PARA&gt;
   Her skriver vi et kort abstract.
  &lt;/PARA&gt;
 &lt;/ABSTRACT&gt;
&lt;/bookinfo&gt;

&lt;!-- Følgende linie skaber automatisk en indholdsfortegnelse --&gt;
&lt;toc id="toc"&gt;&lt;/toc&gt; 
&amp;intro;
&amp;Linux;
&amp;konklusion;
&lt;/book&gt;
</programlisting>

<para>
I hovedet af filen erklæres hvilke eksterne filer, vil skal læse
ind. Hver af disse får en label (intro, Linux og konklusion) som vi
anvender til sidst i filen med et &amp; foran. Der er her til sidst vi
angiver den rækkefølge filerne indsættes i.
</para>

<para>
Bemærk at kommandoerne <command>&lt;toc&gt;&lt;/toc&gt;</command>
bruges til at få genereret en indholdsfortegnelse. Dette kræver intet
andet end den linie.
</para>

</sect3>


<sect3 id="docbook-entity">
<title>Entities</title>
<indexterm><primary>entity</primary></indexterm>
<indexterm><primary>SGML-tags</primary><secondary>entity</secondary></indexterm>
<para>
Vi har i <xref linkend="docbook-Startfilen"> allerede set ordet
<command>entity</command> anvendt. Denne bruges til at definere enten
en forkortelse eller at inkludere en anden fil. Vi så tidligere at tre
filer blev defineret og her er vist samme definitioner samt at en
forkortelse "pto" er sat til "Peter Toft". 
</para>

<programlisting>
 &lt;!entity intro SYSTEM "introduktion.sgml"&gt; &lt;!-- Filnavn ej lig id --&gt;
 &lt;!entity Linux SYSTEM "linux.sgml"&gt; &lt;!-- Filnavn ej lig id --&gt;
 &lt;!entity konklusion SYSTEM "konklusion.sgml"&gt; &lt;!-- Filnavn her lig id --&gt;
 &lt;!entity pto "Peter Toft"&gt; 
</programlisting>


<para>
Når man ønsker indholdet af <filename>introduktion.sgml</filename>, så
skriver man blot <command>&amp;intro;</command>, tilsvarende 
<command>&amp;Linux;</command> og
<command>&amp;konklusion;</command>. Skal man bruge teksten "Peter
Toft", så er det nemmere at bruge <command>&amp;pto;</command>.
</para>

</sect3>

</sect2>
</sect1>

<sect1 id="docbook-Compile">
<title>Oversætte SGML til andre formater</title>
<indexterm><primary>oversætte SGML</primary></indexterm>
<indexterm><primary>docbook2html</primary></indexterm>
<indexterm><primary>docbook2pdf</primary></indexterm>
<indexterm><primary>docbook2ps</primary></indexterm>
<indexterm><primary>docbook2rtf</primary></indexterm>

<para>
Du kan oversætte SGML filerne til HTML, PDF, Postscript og RTF.  Der
er også mulighed for at vælge at oversætte SGML til én HTML-fil og
ikke til mange, opdelt for hver
<command>&lt;sect1&gt;</command>. Skal din HTML-fil hentes lokalt på
læserens harddisk, kan dette være en fordel, men skal den sendes via nettet,
bliver det for langsommeligt.
</para>

<para>
Du oversætter din hoved SGML fil
(f.eks. <filename>bog.sgml</filename>) til HTML ved at skrive
<command>docbook2html bog.sgml</command>. Dine HTML filer gemmes i
<filename>bog</filename> under dit nuværende katalog, fordi SGML-filen
hedder <filename>bog.sgml</filename>.
</para>

<para>
Du skal selv sørge for at kopiere dine billed-filer (f.eks. PNG) til
kataloget <filename>bog</filename>. Typisk kan dette gøres med en
<filename>Makefile</filename>.
</para>

<para>
Tilsvarende kan man oversætte <filename>bog.sgml</filename> til PDF
ved at skrive <command>docbook2pdf bog.sgml</command>. Igen skal alle
billed-filer (typisk PNG) være placeret der hvor SGML-filerne
oversættes. Jeg kopierer normalt alle de filer til et midlertidigt
katalog og oversætter der.
</para>

<para>
Skal man oversætte til Postscript hedder kommandoen
<command>docbook2ps</command> og RTF laves med <command>docbook2rtf</command>.
</para>

<sect2 id="docbook-fejl-i-sgml">
<title>Fejl i SGML-teksten</title>
<indexterm><primary>Fejl under oversættelse</primary></indexterm>
<para>
Har du lavet fejl i din SGML-tekst, så er den oversætter man har i
<command>docbook2html</command> faktisk til stor hjælp. Vi skal se på et
par eksempler.
</para>

<example>
<title>Manglende /para</title>
<para>
Lad os prøve at oversætte følgende tekst
</para>

<programlisting>
&lt;!doctype book PUBLIC "-//OASIS//DTD DocBook V3.1//EN" [
]&gt;

&lt;book id="index" lang="da"&gt;
  &lt;bookinfo&gt;
    &lt;title&gt;Min første Docbook-bog&lt;/title&gt;
  &lt;/bookinfo&gt;

&lt;chapter id="forord"&gt;
&lt;title&gt;Mit første kapitel&lt;/title&gt;

&lt;para&gt;
Vil du skrive i Docbook ?
&lt;/para&gt;

&lt;para&gt;
Ja - men jeg kan ikke huske at slutte mine para-blokke.

&lt;/chapter&gt;
&lt;/book&gt;
</programlisting>

<para>
Filen <filename>eks1.sgml</filename> oversættes nu 
</para>

<programlisting>
<prompt>[root@MinMaskine /root]# </prompt> <userinput> docbook2html eks1.sgml</userinput>
TMPDIR is DBTOHTML_OUTPUT_DIR3088
 
input file was called eks1.sgml -- output will be in eks1
 
working on ../eks1.sgml
jade:../eks1.sgml:24:9:E: end tag for "PARA" omitted, but OMITTAG NO was specified
jade:../eks1.sgml:19:0: start tag was here
about to copy cascading stylesheet and admon graphics to temp dir
about to rename temporary directory to eks1
</programlisting>

<para>
For det første laves et temporært katalog
<filename>DBTOHTML_OUTPUT_DIR3088</filename>, og resultatet vil ende i
<filename>eks1/</filename> idet filen hedder <filename>eks1.sgml</filename>.
Man får to ret klare fejlbeskeder. I linie 24 (næstsidste linie) må
der ikke komme en <command>&lt;/chapter&gt;</command>, når der bør
komme en slut PARA, dvs. <command>&lt;/para&gt;</command>. Den
følgende linie fortæller dernæst at i linie 19 var den
<command>&lt;para&gt;</command>, som ikke kunne matches.
</para>

<para>
Tilføj en <command>&lt;/para&gt;</command> før næstsidste linie og 
teksten oversætter fejlfrit.
</para>

</example>

<example>
<title>To ens ID</title>
<para>
Lad os prøve at oversætte følgende tekst
</para>

<programlisting>
&lt;!doctype book PUBLIC "-//OASIS//DTD DocBook V3.1//EN" [
]&gt;

&lt;book id="index" lang="da"&gt;
  &lt;bookinfo&gt;
    &lt;title&gt;Eksempel&lt;/title&gt;
  &lt;/bookinfo&gt;

&lt;toc id="toc"&gt;&lt;/toc&gt;


&lt;chapter id="id1"&gt;
&lt;title&gt;Mit første kapitel&lt;/title&gt;

&lt;para&gt;
Vil du skrive i Docbook ?
&lt;/para&gt;

&lt;sect1 id="id1"&gt;
&lt;title&gt;Mit første underkapitel&lt;/title&gt;
&lt;para&gt;
tekst1
&lt;/para&gt;

&lt;/sect1&gt;
&lt;/chapter&gt;
&lt;/book&gt;
</programlisting>

<para>
Filen <filename>eks2.sgml</filename> oversættes nu 
</para>

<programlisting>
<prompt>[root@MinMaskine /root]#</prompt> <userinput>docbook2html eks2.sgml</userinput>
TMPDIR is DBTOHTML_OUTPUT_DIR3110
 
input file was called eks2.sgml -- output will be in eks2
 
working on ../eks2.sgml
jade:../eks2.sgml:19:11:E: ID "ID1" already defined
jade:../eks2.sgml:12:13: ID "ID1" first defined here
about to copy cascading stylesheet and admon graphics to temp dir
about to rename temporary directory to eks2                  
</programlisting>

<para>
Her ses at ID1 er erklæret to gange - og der oplyses hvilke steder det
sker. Omdefiner den ene og oversæt igen.
</para>
</example>


</sect2>

<sect2 id="docbook-grimme-ting">
<title>"Alle" de grimme detaljer</title>

<sect3 id="docbook-Stikordsregister">
<title>Stikordsregister</title>
<indexterm><primary>stikordsregister, oprettelse</primary></indexterm>
<para>
At få lavet et stikordsregister er ikke så integreret i Docbook som
man kunne ønske sig, men modsat så kan det nemt indføres, når bare man
har en vejledning. Det første man skal gøre er at hente et Perl-program,
<command>collateindex.pl</command>, som f.eks. kan hentes fra 
<ulink
url="http://www.sslug.dk/linuxbog/misc/collateindex.pl">http://www.sslug.dk/linuxbog/misc/collateindex.pl</ulink>.
Filen skal gøres eksekverbar og f.eks. placeres i <filename>/usr/local/bin</filename>.
</para>


<sect4 id="docbook-indexterm">
<title>Markere til stikordsregisteret - indexterm</title>
<indexterm><primary>indexterm</primary></indexterm>
<indexterm><primary>indexterm</primary><secondary>primary</secondary></indexterm>
<indexterm><primary>indexterm</primary><secondary>secondary</secondary></indexterm>
<indexterm><primary>SGML-tags</primary><secondary>indexterm</secondary></indexterm>
<para>
Før man får en stikordsliste skal man igennem hele ens dokument og
markere de steder, man ønsker et link til. Det er manuelt arbejde.
Hvert sted man ønsker et link til skal man tilføje
</para>

<programlisting>
&lt;indexterm&gt;&lt;primary&gt;Søgeord&lt;/primary&gt;&lt;/indexterm&gt;
</programlisting>

<para>
I stikordsregisteret vil man så kunne se at "Søgeord" kan man læse om
det pågælende afsnit. Man kan godt lave henvisning til flere
forskellige steder med samme søgeord. Indføj blot flere linier som den
ovenstående og man får et tilsvarende antal referencer i stikordsregisteret.
</para>

<para>
Samme markeringsteknik kan laves med underinddelinger, så man under
"Søgeord" kan have f.eks. "At lave søgeord" og et andet sted "At finde
søgeord". For at lave det første eksempel skrives følgende, og det kan
bemærkes, at liniedelingen og indrykningen nedenfor alene tjener til
at gøre SGML-koden nemmere at læse.
</para>

<programlisting>
&lt;indexterm&gt;
 &lt;primary&gt;Søgeord&lt;/primary&gt;
 &lt;secondary&gt;At lave søgeord&lt;/secondary&gt;
&lt;/indexterm&gt;
</programlisting>
</sect4>

<sect4 id="docbook-collateindex.pl">
<title>Generere indholdsfortegnelsen - collateindex.pl</title>
<indexterm><primary>collateindex.pl</primary></indexterm>

<para>
Når man har sat alle sine stikordshenvisninger ind i dokumentet kommer
turen til at at få genereret dokumentet med <command>collateindex.pl</command>.
Tricket er at man skal oversætte sit dokument en gang før man kører
<command>docbook2html</command> (eller hvad man nu har som mål-format).
</para>

<para>
Jeg plejer typisk at have en <filename>Makefile</filename>, hvor jeg
oversætter min hoved SGML-fil <filename>bog.sgml</filename> på
følgende måde. Jeg har kommenteret Makefilen med kommentarer før kommandoen
</para>

<programlisting>
# Slet mit midlertidige katalog "tempdir" og "stikord.sgml"
    rm -rf tempdir stikord.sgml
# Skab et  midlertidige katalog "tempdir"
    mkdir tempdir
# Initialiser "stikord.sgml" til at være tom
    perl /usr/local/bin/collateindex.pl \
        -s Symboler  -t Stikordsregister -g \
        -i stikord -N -o stikord.sgml
# Kopier alle SGML filer til "tempdir"
    cp *.sgml tempdir
# Gå ned i "tempdir" og oversæt SGML-filerne hvor HTML.index dannes
    (cd tempdir; jade -t sgml -ihtml \
        -d /usr/lib/sgml/stylesheets/cygnus-both.dsl\#html \
        -V html-index bog.sgml)
# Kør nu "collateindex.pl" som oversætter "HTML.index" til indholdet
# af SGML-filen "stikord.sgml". -s er at symboler optræder under
# navnet "symboler". -t angiver overskrift for "stikord.sgml"
    perl /usr/local/bin/collateindex.pl -s Symboler \
        -t Stikordsregister  -g -i stikord \
        -o stikord.sgml tempdir/HTML.index
# Nu er "stikord.sgml" fuld af referencer som kan oversættes
    docbook2html bog.sgml
# Kopier alle PNG-filer fra "images/" til "bog/"
    cp images/*.png bog
</programlisting>

<para>
Skal du tilsvarende oversætte til PDF kan du have en del af en
<filename>Makefile</filename> med et lidt andet indhold. Ideen er den
samme, men <command>jade</command>, som anvendes til at lave
stikordsregisteret får "print" overført ikke "html". Dette gør, at man
få sidenumre og ikke afsnitsnavne i stikordsregisteret. Bemærk også at
<command>-V nochunks</command> gør at filen oversættes til en stor fil
(svarende til den endelige PDF-fil).
</para>

<programlisting>
# Slet "stikord.sgml" min midlertidige kataloger 
#  "tempdir" og "bogpdf"
    rm -rf tempdir stikord.sgml bogpdf
# Skab et  midlertidige katalog "tempdir"
    mkdir tempdir
# Initialiser "stikord.sgml" til at være tom
    perl /usr/local/bin/collateindex.pl \
        -s Symboler  -t Stikordsregister -g \
        -i stikord -N -o stikord.sgml
# Kopier alle SGML filer til "tempdir"
    cp *.sgml tempdir
# Gå ned i "tempdir" og oversæt SGML-filerne hvor HTML.index dannes
    (cd tempdir; jade -t sgml -ihtml \
        -d /usr/lib/sgml/stylesheets/cygnus-both.dsl\#print 
        -V html-index -V nochunks bog.sgml > slet_fil.html)
# Kør nu "collateindex.pl" som oversætter "HTML.index" til indholdet
# af SGML-filen "stikord.sgml". -s er at symboler optræder under
# navnet "symboler". -t angiver overskrift for "stikord.sgml"
    perl /usr/local/bin/collateindex.pl -s Symboler \
        -t Stikordsregister  -g -i stikord \
        -o stikord.sgml tempdir/HTML.index
# Nu er "stikord.sgml" fuld af referencer som kan oversættes
    mkdir bogpdf
# Kopier alle SGML-filer til "bogpdf/"
    cp *.sgml bogpdf
# Kopier alle PNG-filer fra "images/" til "bog/"
    cp images/*.png bogpdf
# Kør "docbook2pdf" i "bogpdf/" 
    (cd bogpdf; docbook2pdf bog.sgml)
# Flytter PDF-filen til nuværende katalog
    mv bogpdf/bog.pdf .
</programlisting>
</sect4>

<sect4 id="docbook-Postscript">
<title>Postscript er et problem</title>
<indexterm><primary>Postscript</primary></indexterm>
<para>
Som vist i forrige afsnit kopieres PNG-filer blot til det katalog hvor
man oversætter. Skal man oversætte Docbook dokumentet til Postscript
opstår dog problemet; Man kan ikke oversætte dokumentet med
PNG-billeder, men godt med EPS-billeder.  Det problem kan også løses,
men det er bøvlet og kræver at alle billeder oversættes til EPS,
f.eks. ved at bruge <command>convert</command>fra
ImageMagick-programmet.
</para>

</sect4>
</sect3>

<sect3 id="docbook-texconfig">
<title>Ændring af opsætning</title>
<indexterm><primary>opsætning (layout), ændring af</primary></indexterm>
<indexterm><primary>layout, ændring af</primary></indexterm>

<para>
Er du utilfreds med hvordan marginer i PDF-filen er eller hvordan dine
HTML style-filer anvendes, så har Docbook et hav af muligheder for at
skrue på format.
</para>

<para>
I <filename>/usr/lib/sgml</filename> ligger alle de opsætningsfiler
Docbook bruger. Oftest vil man ændre i ganske få filer, såsom
<filename>/usr/lib/sgml/stylesheets/nwalsh-modular/common/dbl1da.ent</filename>.
I denne fil står alle de oversættelser man har til dansk for
referencer og afsnit. Mener du at en "Section" (på engelsk) hedder
"Sektion" og ikke "Afsnit" så kan du ændre linien
</para>

<programlisting>
&lt;!ENTITY Section        "Afsnit"&gt; 
</programlisting>

<para>
til
</para>

<programlisting>
&lt;!ENTITY Section        "Sektion"&gt; 
</programlisting>

<para>
Tilsvarende finder du mange opsætningsparametre fælles for HTML og
PDF/Postscript i
<filename>/usr/lib/sgml/stylesheets/nwalsh-modular/common/dbcommon.dsl</filename>.
Filen er skrevet i LISP (ligesom Emacs opsætningsfiler) og har mange
kommentarer. Oftest er det ikke denne fil man vil ændre i.
</para>

<para>
For HTML-generering vil du nok ændre i 
<filename>/usr/lib/sgml/stylesheets/nwalsh-modular/html/dbparam.dsl</filename>.
Du vil se at filen har mange kommentarer og vil du ændre en parameter
fra sand til falsk er det <command>#t</command> som ændres til <command>#f</command>.
</para>

<para>
I forhold til standardopsætningen kan det være interessant at kigge på:
</para>

<programlisting>
(define %section-autolabel%
</programlisting>

<para>
Sættes den til <command>#t</command> bliver afsnit ("sections") automatisk nummereret. 
Første afsnit ("sect1") i kapitel 7 vil så få nummer 7.1. 
</para>

<para>
Hvis man vil undgå at få en indholdsfortegnelse over tabeller og figurer nedenunder den 
almindelige indholdsfortegnelse, skal $generate-book-lot-list$ sættes til
</para>

<programlisting>
(define ($generate-book-lot-list$)
  ;; REFENTRY generate-book-lot-list
  ;; PURP Which Lists of Titles should be produced for Books?
  ;; DESC
  ;; This parameter should be a list (possibly empty) of the elements
  ;; for which Lists of Titles should be produced for each 'Book'.
  ;;
  ;; It is meaningless to put elements that do not have titles in this
  ;; list.  If elements with optional titles are placed in this list, only
  ;; the instances of those elements that do have titles will appear in
  ;; the LOT.
  ;;
  ;; /DESC
  ;; AUTHOR N/A
  ;; /REFENTRY
  (list ))
</programlisting>

<para>
Hvis du ønsker at styre udseendet af bogen (i HTML-udgaven), kan det gøres ved at 
vælge at bruge et eksternt Cascading Style Sheet. Filnavnet på dette angives i
</para>

<programlisting>
 (define %stylesheet%
  ;; REFENTRY stylesheet
  ;; PURP Name of the stylesheet to use
  ;; DESC
  ;; The name of the stylesheet to place in the HTML LINK TAG, or '#f' to
  ;; suppress the stylesheet LINK.
  ;; /DESC
  ;; AUTHOR N/A
  ;; /REFENTRY
  "../style/style.css")
</programlisting>

<para>
Du skal selvfølgelig sørge for, at der er et stylesheet på den angivne placering...
</para>

<para>
For PDF og Postscript-generering (kaldes "print" i Docbook) vil du nok
ændre i <filename>/usr/share/sgml/docbook/dsssl-stylesheets/print/dbparam.dsl</filename>
(Red Hat 6.2 <filename>/usr/lib/sgml/stylesheets/nwalsh-modular/print/dbparam.dsl</filename>).
En ting du nok skal se på er "%paper-type%" som sættes til
</para>

<programlisting>
(define %paper-type%
  ;; REFENTRY paper-type
  ;; PURP Name of paper type
  ;; DESC
  ;; The paper type value identifies the sort of paper in use, for example,
  ;; 'A4' or 'USletter'. Setting the paper type is an
  ;; easy shortcut for setting the correct paper height and width.
  ;;
  ;; As distributed, only 'A4' and 'USletter' are supported.  You can add
  ;; additional paper types by updating 'page-width' and 'page-height'.
  ;; If you do, please pass along your updates.
  ;; /DESC
  ;; AUTHOR N/A
  ;; /REFENTRY
  ;; "USletter"
  "A4")                 
</programlisting>

<para>
Vil du have to kolonner tekst i PS og PDF-udskrift rettes
tilsvarende 
</para>

<programlisting>
(define %page-n-columns%
  ;; REFENTRY page-n-columns
  ;; PURP Sets the number of columns on each page
  ;; DESC
  ;; Sets the number of columns on each page
  ;; /DESC
  ;; AUTHOR N/A
  ;; /REFENTRY
  1)
</programlisting>

<para>
til
</para>

<programlisting>
(define %page-n-columns%
  ;; REFENTRY page-n-columns
  ;; PURP Sets the number of columns on each page
  ;; DESC
  ;; Sets the number of columns on each page
  ;; /DESC
  ;; AUTHOR N/A
  ;; /REFENTRY
  2)
</programlisting>


<para>
Tilsvarende kan man lede efter margin og finde de marginer, som anvendes i 
PDF-dokumentet, ligesom "%section-autolabel%" og "$generate-book-lot-list$" 
kan ændres på samme vis som i 
<filename>/usr/share/sgml/docbook/dsssl-stylesheets/html/dbparam.dsl</filename>.
</para>


<para>
Hvis du har problemer med at oversætte store bøger til PS eller PDF 
er det nødvendigt at ændre nogle værdier i 
<filename>/usr/share/texmf/web2c/texmf.cnf</filename>. 
Sæt nedenstående variabler til 
de viste værdier for at få PDF-genereringen til at virke.
Med Red Hat 7.2 pakkerne skulle dette ikke være nødvendigt.
</para>

<programlisting>
hash_extra = 10000

pool_size.context = 1250000
pool_size.jadetex = 1250000
pool_size = 250000

max_strings = 25000
</programlisting>

</sect3>
</sect2>
</sect1>   



<sect1 id="docbook-rh7">
<title>Red Hat 7.1 og 7.2</title>
<indexterm>
 <primary>DocBook-installation</primary>
 <secondary>Red Hat 7.1 og 7.2</secondary>
</indexterm>

<para>
I Red Hat kan pakkerne normalt bruges uden ændringer. For at
kunne bruge docbook - dokument-type-definitionerne (DocBook DTD),
skal man imidlertid rette lidt på Red Hat opsætningen.  Hvis du er
utålmodig efter at komme i gang, så spring frem til afsnit
<xref linkend="rh72-tilretninger">, hvor du kan se kommandoerne (og
prøve dem af). Hvis du bagefter stadig har problemer, så læs
videre her.
</para>

<para>
Hvis du er en af dem, der ikke har kunnet få jw-kommandoen til
at fungere direkte ud fra Red Hat pakkerne, så er her en
forklaring og en løsning. 
</para>

<para>
Der er nogle filer, som skal være til stede, selv om man ikke får
sammen med docbook - pakkerne.
</para>

<para>
Det er ISO-Entity filerne. <tip><para>Historie bag disse er interessant, men er ikke til rådighed i skrivende stund. Det *er* filer fra ISO, Industri-Standard-Organisationen.</para></tip>
</para>

<para>
De efterfølgende anvisninger er almene og kan måske også
bruges, hvis der opstår "mærkelige" fejlmeddelelser på andre
distributioner end Red Hat 7.1-2
</para>

<sect2 id="Entity-filer-DocBook">
<indexterm>
 <primary>Entity-filer</primary>
</indexterm>

<title>Entity filer til DocBook.</title>
<para>
DocBook systemet er sammensat af mange elementer. De kommer
forskellige steder fra, og derfor har forfatterne ikke ønsket at
sætte dem sammen i én pakke.
</para>

<para>
I Red Hat 7.1 er entitets filerne en del af sgml-tools pakken.
Red Hat pakkerne gør normalt livet lettere, men her er entity-filerne
blevet placeret på en sådan måde, at det ikke er muligt at få
jadewrapper scriptet (jw - kommandoen) til at fungere uden at
foretage et par rettelser. Disse beskrives (*link*)
</para>

<para>
Her er en fuld liste over alle de ting, som skal fungere
sammen for at DocBook tekster kan omformateres (realiseres,
oversættes).
</para>

<itemizedlist mark="bullet">
<listitem>
<para>
Openjade, programmet, som foretager konverteringer af sgml
dokumenter til andre formater. For at dette skal kunne lade sig
gøre, er det nødvendigt med forskellige dokument-type
specifikationer, dtd'er.
</para>
</listitem>
   
<listitem>
<para>
DocBook SGML - DTD. Det vil sige de filer, som beskriver, hvordan
openjade skal behandle de forskellige tags. Kunne kaldes
front-end.
</para>
</listitem>
   
<listitem>
<para>
ISO entity SGML. Det er filer, som bestemmer fx. matematiske
tegn.
</para>
</listitem>
   
<listitem>
<para>
DocBook DSSSL, Document Style Semantics and Specification
Language (DSSSL) filer med endelsen .dsl specificerer hvordan
openjade skal konvertere til html, rtf, tex med videre. Kaldes
også back-end.
</para>
</listitem>
   
<listitem>
<para>
SGML-tools lite. Nogle konverteringer foregår i flere trin. Disse
tools samler flere kommandoer til én kommando.
</para>
</listitem>
   
<listitem>
<para>
HTMLdoc, er en af måderne til generering af bookmarks eller index
til PDF filer.
</para>
</listitem>
   
<listitem>
<para>
SGMLSpm and docbook2X, for konvertering til man-page format.
</para>
</listitem>
   
</itemizedlist>
</sect2>

<sect2 id="docbook-pakke-forklaringer">
<title>Pakke-forklaringer</title>
<para>
Her er korte forklaringer af pakkerne, som vi skal arbejde med:
</para>

<sect3 id="openjade">
<indexterm>
 <primary>Openjade</primary>
</indexterm>

<title>Openjade</title>
<para>
Openjade: OpenJade er et program, som behandler "Standard
Generalized Markup Language" (SGML) og "Document Style Semantics
and Specification Language" (DSSSL). Den transformerer DocBook
sgml kildefiler til html, tex, rtf, txt og andet. OpenJade er den
essentielle maskine til konvertering af en DocBook fil til andre
formater. TeX output formatet bruges mest som et mellemformat for
at opnå dvi, pdf og postscript filer via TeX macro'er og dvi
konverterings programmer.
</para>
</sect3>

<sect3 id="Dokument-type-definitioner">
<indexterm>
 <primary>DTD</primary>
</indexterm>

<title>Dokument-type-definitioner</title>
<para>
DocBook SGML DTD, dokument-type-definitionen for den eller de
docbook - versioner, som du ønsker at benytte. Der er ikke den
store forskel mellem fx. version 4.0 og version 4.1, så man lærer
hurtigt at rette i dokument-type-versions-specifikationen øverst
i kildeteksten til en eller anden sgml-pakke.
</para>

<para>
DTD filerne for en DocBook version ligger i et directory, som på
Red Hat er /usr/share/sgml/docbook/&lt;dir-navn&gt;
Disse filer definerer sammen med entity filerne et sæt regler
(forhåbentlig gyldige) som skal anvendes af openjade, når den
læser kildeteksten af en sgml-pakke.
</para>
<para>
openjade skal have access til et directory for hver type
dokument, som man forventer, at den skal kunne oversætte.
</para>

</sect3>

<sect3 id="ISO-entitets-SGML">
<indexterm>
 <primary>ISO-entitets-SGML filer</primary>
</indexterm>
<title>ISO-entitets-SGML filer</title>
<para>
ISO8879 ENTITY SGML. Entiteter definerer repræsentation af specielle
tegn, som enten ikke har nogen keyboard-knap eller som har
speciel funktion i SGML-kildeteksten. 
Eksempel: "&amp;amp;" = '&amp;' og "&amp;lt;" = '&lt;'
</para>

</sect3>

<sect3 id="DSSSL">
<indexterm>
 <primary>Style-sheets</primary>
</indexterm>
<indexterm>
 <primary>DSSSL-filer</primary>
</indexterm>
<title>Style-sheets eller DSSSL-filer</title>
<para>
DocBook DSSSL, Document Style Semantics and Specification
Language (DSSSL) filerne med .dsl endelse, for hver af de
forskellige typer output format, som man ønsker sig, html, rtf og
så videre. En nærmere forklaring af disse står på ønskeseddelen.
For nærværende må vi (jeg) henvise til <ulink
url="http://www.linuxdoc.org/HOWTO/mini/DocBook-Install/">
http://www.linuxdoc.org/HOWTO/mini/DocBook-Install/</ulink>
</para>

</sect3>

<sect3 id="Sgml-tools">
<indexterm>
 <primary>Sgml-tools</primary>
</indexterm>
<title>Sgml-tools</title>
<para>
SgmlTools-lite hedder som Red Hat pakke "sgml-tools". Det er
forskellige wrappere for at forenkle antallet af nødvendige
kommandoer og kommandolinie options. I pakken er bl.a. kommandoen
sgml2latex.  I denne pakke ligger også de entitets-filer, som
<command>jw </command> - kommandoen ikke kan finde.
(<command>jw</command> kommandoen ligger i docbook-utils).
</para>

<para>
Konvertering af en docbook fil til postscript eller pdf er en to
eller tre-trins proces. Openjade skriver en tex-fil, som så er
input for jadetex, som producerer en dvi, og pdfjadetex, som
producerer en pdf-fil. Postscript opnås så ved at sende dvi filen
igennem dvips. Sgml-tools har en enkelt kommando, som kan udføre
disse operationer.
</para>

<para>
</para>

</sect3>

<sect3 id="HTMLdoc">
<indexterm>
 <primary>HTMLdoc</primary>
</indexterm>

<title>HTMLdoc - et hjælpeprogram</title>
<para>
Mini-Howto'en for installering af DocBook pakker nævner dette som
et specielt system, men jeg har p.t. ikke nogen ide om, hvilke
Red Hat 7.1++ pakker dette svarer til.
HTMLdoc er et frit program, som konverterer html filer til pdf
eller ps filer.
</para>

</sect3>

<sect3 id="SGMLSPM-docbook2X">

<indexterm>
 <primary>SGMLSPM</primary>
</indexterm>
<indexterm>
 <primary>docbook2X</primary>
</indexterm>

<title>SGMLSPM og docbook2X</title>
<para>
SGMLspm er et perl modul, som sammen med andre programmer
(docbook2X) kan generere man-pages. SGMLSpm er et perl-library
modul, som behandler parsed output fra onsgmls (open new sgml -
parser). SGMLSpm inkluderer en applikation, som hedder sgmlspl,
for at kunne bruge SGMLSpm modul-library'et. Sgmlspl har brug for
spec filer, som kan fås fra forskellige andre sites på
internettet, for hver type konvertering, som den skal foretage.
DocBook2X er en pakke, som leverer spec-filer, der kan
transformere docbook-filer til man-pages.
</para>
</sect3>


</sect2>
<sect2 id="rh72-tilretninger">
<title>Tilretnings kommandoer</title>
<para>
I det følgende gives kommandoerne med kommentarer, så man bedre
selv kan kontrollere, at tingene foregår som de skal.
</para>

<orderedlist>
<listitem>
<screen>
<prompt>[root@MinMaskine/]#</prompt> <USERINPUT>cd /usr/share/sgml/docbook 
</USERINPUT>
</screen>

<para>
Dette directory skal være installeret fra pakkerne med
docbook-dtd'er, fx. fra docbook-dtd31-sgml.
</para>
</listitem>

<listitem>
<screen>
<prompt>[root@MinMaskine/usr/share/sgml/docbook]#</prompt> <USERINPUT>ls -l
</USERINPUT>
</screen>

<para>
Det er altid godt at se sig omkring. Man kan derved kontrollere
en del af de ting, der sker, og i givet fald kan man bedre finde fejl.
</para>
</listitem>

<listitem>
<screen>
<prompt>[root@MinMaskine/usr/share/sgml/docbook]#</prompt> <USERINPUT>cp -pRiv sgml-dtd-3.1* sgml-dtd-3.1.bkup
</USERINPUT>
</screen>

<para>
Det er ikke nødvendigt, men hvorfor ikke tage en kopi af hele
directory'et, så man kan gå tilbage til startpunktet, hvis man
kommer til at gøre fejl.
</para>
</listitem>

<listitem>
<screen>
<prompt>[root@MinMaskine/usr/share/sgml/docbook]#</prompt> <USERINPUT>ln -s /usr/lib/sgml/iso-entities-8879.1986/ISO* ./sgml-dtd-3.1*
</USERINPUT>
</screen>

<para>
Denne kommando creerer symbolske links til de entity filer, som
Red Hat lægger i <filename>/usr/lib/sgml/iso-entities-8879.1986</filename>.
</para>
</listitem>

<listitem>
<screen>
<prompt>[root@MinMaskine/usr/share/sgml/docbook]#</prompt> <USERINPUT>ls -l --co ./sgml-dtd-3.1/
</USERINPUT>
</screen>

<para>
Check at det er lykkedes. Hvis link-ene er sødt lyseblå, så er de
ok. Hvis de er røde, er der fejl og de skal rettes.
</para>
</listitem>

<listitem>
<screen>
<prompt>[root@MinMaskine/usr/share/sgml/docbook]#</prompt> <USERINPUT>cat /usr/lib/sgml/iso-entities-8879.1986/iso-entities.cat >> ./sgml-dtd-3.1/catalog
</USERINPUT>
</screen>

<para>
Catalog - beskrivelsen fra entity-pakken appendes til den docbook
catlog-fil, som anvendes, når man starter openjade op, og der
står &lt;!doctype book PUBLIC "-//OASIS//DTD DocBook V3.1//EN"
[ <emphasis> ... alle lokale entity specifikationer ...
</emphasis> ] &gt;
</para>
</listitem>

<listitem>
<screen>
<prompt>[root@MinMaskine/usr/share/sgml/docbook]#</prompt> <USERINPUT>ls -l ./sgml-dtd-3.1/
</USERINPUT>
</screen>
<para>
Husk forresten, at du kan bruge "set -o vi-tabcomplete" i pdksh eller 
"set -o emacs" i bash, for at slippe fra at skulle taste lange
filenavne. Så kan du bare taste tabulator, og se, om dit filenavn
er entydigt. Hvis det ikke er det, så må man fortsætte med at
skrive så mange tegn, at shellen kan finde ud af, hvad man mener
og <emphasis>så</emphasis> må man taste tab igen.
</para>
</listitem>

<listitem>
<screen>
<prompt>[root@MinMaskine/usr/share/sgml/docbook]#</prompt> <USERINPUT>cd mitarbejds-dir
</USERINPUT>
</screen>
<para>
Nu skal manøvrens succes afprøves.
</para>
</listitem>

<listitem>
<indexterm>
 <primary>jw</primary>
</indexterm>

<screen>
<prompt>[anne@MinMaskine/wrk]$</prompt> <USERINPUT>jw bog.sgml
</USERINPUT>
</screen>
<para>
Uha. Det er jo ikke sikkert, at kildeteksten er uden fejl.
Prøv derfor først med et minimal eksempel <emphasis> eller
</emphasis> en af de sgml-pakker, som kommer fra sslug-linuxbog.
Husk at der indtil videre er tale om docbook-3.1. For at få alle
de andre DocBook specifikationer til at fungere, er du nødt til
at gentage seancen for hvert af de andre
sgml-dtd-&lt;versionsnummer&gt; directory'er.
</para>
</listitem>

</orderedlist>

<warning>
<para>
Man kan sikkert gøre det på en smartere måde.
</para>
</warning>


</sect2>
</sect1>




<sect1 id="docbook-epilog">
<title>Epilog</title>

<para>
Har du brug for at se flere SGML eksempler, så se f.eks. 
<ulink url="&sslugweb;/linuxbog/friheden">&sslugweb;/linuxbog/friheden</ulink>.
Tilsvarende er der en del eksempler i 
<filename>/usr/lib/sgml/stylesheets/nwalsh-modular/doc</filename>.
</para>

<para>
Har du brug for hjælp til Docbook, så er der en god diskussionsgruppe
at finde på <ulink
url="mailto:docbook-tools-discuss@sourceware.cygnus.com">docbook-tools-discuss@sourceware.cygnus.com</ulink>.
Man tilmelder sig via at skrive til <ulink
url="mailto:docbook-tools-discuss-subscribe@sourceware.cygnus.com">docbook-tools-discuss-subscribe@sourceware.cygnus.com</ulink>.
</para>

<itemizedlist mark="bullet">
<listitem> 
 <para>
  Mark Galassi "kom i gang"
  <ulink url="http://nis-www.lanl.gov/~rosalia/mydocs/docbook-intro.html">http://nis-www.lanl.gov/~rosalia/mydocs/docbook-intro.html</ulink>
 </para>
</listitem>

<listitem>
 <para>
Du kan også have glæde af den fulde Docbook dokumentation, der kan
hentes fra <ulink url="http://www.oasis-open.org/docbook/">http://www.oasis-open.org/docbook/</ulink>.
 </para>
</listitem>

<listitem> 
 <para>
  Bogen "DocBook - The Definitive Guide" af Norman Walsh &amp; Leonard
  Muellner - O'Reilly. Den kan læses på 
  <ulink url="http://docbook.org/tdg/">http://docbook.org/tdg/</ulink>.
  Den er måske ikke "The Definitive Guide" i praksis...
 </para>
</listitem>

<listitem>
 <para>
 A Practical Introduction to DocBook
 <ulink url="http://www.oswg.org/oswg-nightly/oswg/en_US.ISO_8859-1/articles/DocBook-Intro/docbook-intro/index.html">http://www.oswg.org/oswg-nightly/oswg/en_US.ISO_8859-1/articles/DocBook-Intro/docbook-intro/index.html</ulink>
 </para>
</listitem>

<listitem> 
 <para>
 DocBook HOWTO
 <ulink url="http://metalab.unc.edu/godoy/using-docbook/using-docbook.html">http://metalab.unc.edu/godoy/using-docbook/using-docbook.html</ulink>
 </para>
</listitem>

<listitem> 
 <para>
 Practical information about the use of SGML/XML and DocBook on Debian
 <ulink url="http://www.debian.org/~bortz/SGML-HOWTO/potato/howto.html">http://www.debian.org/~bortz/SGML-HOWTO/potato/howto.html</ulink>
 </para>
</listitem>

<listitem> 
 <para>
  Praktisk guide i brug af SGML/XML og Docbook på Windows NT
 <ulink url="http://ourworld.compuserve.com/homepages/hoenicka_markus/ntsgml.html">http://ourworld.compuserve.com/homepages/hoenicka_markus/ntsgml.html</ulink>
 </para>
</listitem>

<indexterm><primary>HTML til SGML/DocBook oversættelse</primary></indexterm>
<indexterm><primary>SGML/DocBook</primary><secondary>oversættelse fra HTML</secondary></indexterm>

<listitem> 
 <para>
Skal du konvertere fra HTML til SGML/DocBook kan du have glæde af
Carsten Svaneborgs oversætter, der findes på 
<ulink url="http://www.sslug.dk/linuxbog/misc/html2sgml">http://www.sslug.dk/linuxbog/misc/html2sgml</ulink>
 </para>
</listitem>


<listitem> 
 <para>
  Ret komplet guide om O'Reilly's DocBook baserede produktions systemer
 <ulink url="http://www.oreilly.com/people/staff/crism/dsssl/orastyle/index.html">http://www.oreilly.com/people/staff/crism/dsssl/orastyle/index.html</ulink>
 </para>
</listitem>

<listitem> 
 <para>
  FreeBSD tutorial
 <ulink url="http://www.freebsd.org/tutorials/docproj-primer">http://www.freebsd.org/tutorials/docproj-primer</ulink> 
</para>
</listitem>

<listitem>
 <para>
  OASIS links
  <ulink url="http://www.oasis-open.org/docbook/documentation/other.html
">http://www.oasis-open.org/docbook/documentation/other.html</ulink>
 </para>
</listitem>

<listitem>
 <para>
  Integration mellem Emacs og Docbook <ulink url="http://www.lst.de/~eric/crash-course/HTML/emacs-psgml-mode-tips.html">http://www.lst.de/~eric/crash-course/HTML/emacs-psgml-mode-tips.html</ulink>
 </para>
</listitem>

<listitem> 
 <para>
  Helt ny "Crash-Course to DocBook" <ulink url="http://public.lst.de/~eric">http://public.lst.de/~eric</ulink>
 </para>
</listitem>


</itemizedlist>



</sect1>
</chapter>
