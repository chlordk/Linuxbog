#!/bin/sh

# Dette script bootstrapper/konfigurer det der skal til for at lave linuxbøgerne 

# Af Mads Bondo Dydensborg, madsdyd@challenge.dk, september 2003.

# Standard bøger at medtage
SUBDIRS="admin applikationer c dokumentation forsker friheden itplatform java kontorbruger program signatur sikkerhed unix web wm"
# Hmm. Bruges muligvis ikke længere...
ALLE=alle
#SUBDIRS="alle signatur"


################################################################################
#
# Check for argumenter

# help
if test "x$1" == "x--help" -o "x$1" == "x-h" ; then
    echo "\`configure' opsætter hvilke af \"Linux - friheden til at vælge bøgerne\" der skal"
    echo "laves på dit system."
    echo
    echo "Brug: ./configure [--help|-h|--med \"BØGER\"]"
    echo
    echo "  -h, --help          Viser denne hjælp og afslutter"
    echo "      --med \"BØGER\"   Bestemmer hvilke bøger der medtages, hvor BØGER er"
    echo "                      en liste af bøger. Kombiner:"
    echo "                      \"$SUBDIRS\""
    echo
    echo "Eksempel: ./configure --med \"friheden applikationer\""
    exit
fi

# med

if test "x$1" == "x--med" ; then
    if test "x$2" == "x" ; then
	./configure --help
	exit 1
    else
	SUBDIRS=$2
    fi
else
    if test "x$1" != "x" ; then
	./configure --help
	exit 1
    fi
fi

################################################################################
#
# Check at Makefile.in findes. 
if test ! -e Makefile.in ; then
    echo "Fejl: Kunne ikke finde Makefile.in"
    echo "Vær venlig at køre dette script fra roden af Linux bøgernes kildetekst"
    exit 2;
fi


################################################################################
#
# Rent faktisk gøre noget.

echo "*** Opsætter følgende bøger: $SUBDIRS"

sed "s/@SUBDIRS@/$SUBDIRS/" < Makefile.in | sed "s/@ALLE@/$ALLE/" | sed "s/@Makefile.in@/RET IKKE I DENNE FIL - AUTOGENERERET FRA Makefile.in/" > Makefile

echo "*** Du kan nu køre f.eks. make bootstrap, make all, eller make dist"