<?xml version='1.0' encoding='ISO-8859-1' ?>
<!-- $Id$ -->
<chapter id="Linux-netvaerk-klient">
 <title>Linux og netværk - klientsiden</title>

 <indexterm><primary>Netværk</primary><secondary>klienter</secondary></indexterm>

 <para>
I dette kapitel vil vi se på klientsiden af netværk.
<!-- Det skal bemærkes at i xref linkend="Linux-netvaerk-server" er det
en masse information tilsvarende om server opsætning.--> <!-- Vil du vide mere
om netværksadresser og hvorfor og hvordan netværk kobles sammen, så se
mere i xref linkend="tcp-ip".-->
</para>

<indexterm><primary>Kerne 2.4</primary><secondary>problem med 
net-tilkobling</secondary></indexterm>

<para>
En vigtig start-kommentar, som kunne stå mange steder i denne bog er
at der med Linux-kerne 2.4 (f.eks. Red Hat 7.3 og Mandrake 8.2) er
problemer med at få tilgang til alle hjemmesider - det er et
problem som er forstået nu, se f.eks. <ulink
url="http://eltoday.com/article.php3?ltsn=2001-04-17-001-14-PS">http://eltoday.com/article.php3?ltsn=2001-04-17-001-14-PS</ulink>.
Løsningen er simpel. Tilføj følgende til f.eks. 
<filename>/etc/rc.d/rc.local</filename>:
</para>

<programlisting>
echo "0" &gt; /proc/sys/net/ipv4/tcp_ecn
</programlisting>


<sect1 id="modeminternet">
<title>Modemforbindelse til internettet</title>
<indexterm><primary>internet-opkobling</primary></indexterm>
<indexterm><primary>Modem og internettet</primary></indexterm>
<para>
Hvis du er en typisk hjemmebruger eller sidder i en mindre virksomhed og
vil have din computer på internettet, vil du som regel have brug
for at gøre det via en modemforbindelse.
</para>

<para>
Langt den mest almindelige måde at gøre det på i Linux er ved hjælp af
PPP, Point-to-Point-protokollen. PPP tilbyder en hel del flere
faciliteter og mere fleksibilitet, end vi her vil komme ind på. Vi vil nøjes
med at beskrive den typiske og helt basale opsætning, der vil sætte dig
i stand til at få en TCP/IP-forbindelse til din internetudbyder op at
køre.
</para>

<para>
Hvis du får brug for at sætte en server op til at modtage PPP-opkald,
eller hvis du har problemer med at få PPP til at fungere mellem Linux og
Windows NT eller har andre specielle behov, skulle du overveje at
tage et kig på følgende bog, der går ganske grundigt til værks
inden for sit emne:
</para>

<para>
Andrew Sun: <emphasis>Using &amp; Managing PPP</emphasis>,
O'Reilly &amp; Associates, Inc., ISBN 1-56592-321-9, 430 sider.
</para>

<sect2 id="PPP">
<title>Opsætning af PPP</title>
<indexterm><primary>PPP</primary></indexterm>

<para>
Med Red Hat Linux følger der et grafisk baseret opsætningsprogram, der
gør det forholdsvis enkelt at få PPP i gang. Hvis du har en konto hos
en internetudbyder (ISP), har du forhåbentlig modtaget de sæt
oplysninger, der skal bruges for at få din forbindelse til at køre. Du
skal fra din ISP som minimum have

<itemizedlist mark="bullet" spacing="compact">
<listitem><para>Et dial-in brugernavn</para></listitem>
<listitem><para>En tilhørende adgangskode</para></listitem>
<listitem><para>Et telefonnummer til internetudbyderens 
dial-in</para></listitem>
<listitem><para>IP-numre på én eller to navneservere hos din 
ISP</para></listitem>
</itemizedlist>

Har du sat modemforbindelse til din ISP op under f.eks. Windows 95,
står de oplysninger du skal have, under de menuer, hvor internettet via
modem konfigureres. Er du i tvivl, spørg din ISP om disse
informationer.
</para>

<para>
Du skal være systemadministrator ("root") for at kunne sætte din internetforbindelse op, så
skriv <command>su -</command> i en <command>xterm</command>, og gør
følgende:
</para>

<para>
Start med at finde ud af, hvor dit modem sidder.
COM1 i DOS/Windows svarer til <filename>/dev/ttyS0</filename> i Linux.
COM2 svarer til <filename>/dev/ttyS1</filename> osv.
Som root skal du lave en modemenhed, som er en symbolsk lænke til den
rette seriel-port. Hvis du anvender COM2, skal du skrive:
</para>

<screen>
<prompt>[root@linus /root]# </prompt><userinput>ln -sf /dev/ttyS1 /dev/modem</userinput>
</screen>

<para>
Tjek lige, at det symbolske link er rigtig.
</para>

<screen>
<prompt>[root@linus /root]#  </prompt><userinput>ls -al /dev/modem</userinput>
lrwxrwxrwx   1 root root 5 Sep  5 04:37 /dev/modem -> /dev/ttyS1
</screen>

<para>
Det ser godt ud. Nu peger <filename>/dev/modem</filename> på den anden
serielport.
</para>
</sect2>


<sect2 id="usernetppp">
<title>Internet-opkobling med modem</title>
<indexterm><primary>usernet</primary></indexterm>
<indexterm><primary>internet-opkobling</primary><secondary>usernet</secondary></indexterm>

<para>
Som root starter du <command>linuxconf</command> og finder
"Config->Networking->Client tasks->PPP/SLIP/PLIP". Vælg i højre side "Add"
(se <xref linkend="linuxconf-ppp1-fig"/>). Derefter "PPP". I næste
skærmbillede udfylder du telefonnummer (modemport har vi sat op, så
brug <filename>/dev/modem</filename>), vælg "PAP Authentication" og
skriv til sidst dit brugernavn og adgangskode til din internetudbyder.
</para>


<figure id="linuxconf-ppp1-fig" float="1">
<title>PPP</title>
<graphic fileref="linuxconf-ppp0.&magic;" scale="40"></graphic>
</figure>

<para>
Efter at have trykket "Accept", bør du nok lige dobbeltklikke på din
nye forbindelse "ppp0". Du kan nu ændre lidt i opsætningen. F.eks. er
du måske interesseret i at vælge "Hardware->Allow any user to
(de)activate the interface" - for at almindelige brugere kan starte
internetopkoblingen op selv uden systemadministratorens adgangskode. Du kan nok også være
interesseret i at få valgt "Networking->No Connection" til f.eks. 30 sekunder.
</para>

<para>
Hop ud af PPP-delen ved i højre side af vinduet at trykke "Accept" ->
"Quit". Derefter "Act/Changes" i venstre side - så "Activate the
changes" og til sidste "Quit". Før vi starter internet-forbindelsen
skal du lige checke at du har dine nameservere skrevet ind i
<filename>/etc/resolv.conf</filename>. <!-- se
xref linkend="etc-resolv-conf-filen"-->
</para>

<para>
Nu starter du som almindelig bruger <command>rp3</command>, som vist
på <xref linkend="rp3-fig"/>. Her er der allerede en
netværksforbindelse med <filename>eth0</filename>, og loopback (lo) er
til Linux-kernen på den lokale maskine. Vælg <filename>ppp0</filename>
og tryk OK til at starte. Nu burde det køre.
</para>

<figure id="rp3-fig" float="1">
<title>rp3</title>
<graphic fileref="linuxconf-ppp1.&magic;" scale="40"></graphic>
</figure>

<para>
Når du har hul igennem til internettet, kan du jo passende prøve
<ulink url="http://www.sslug.dk">http://www.sslug.dk</ulink> - dvs. SSLUG's 
hjemmeside.
</para>


<para>
Du kunne have opnået det samme resultat ved at bruge
<command>netcfg</command> som er en del af
<command>control-panel</command>, der er et Red Hat-program til at
opsætte net. I virkeligheden er <command>netcfg</command> og
<command>linuxconf</command> blot behagelige og nemme måder at
redigere det sæt tekstfiler, der bestemmer, hvordan pppd opfører
sig. Disse filer ligger i <filename>/etc/ppp</filename>.
</para>

<para>Vi kan i øvrigt anbefale, at du læser <ulink
url="http://www.sslug.dk/artikler/ppp-info.html">http://www.sslug.dk/artikler/ppp-info.html</ulink>,
hvis du har problemer med at få din modem-opkobling til at virke.
</para>
</sect2>

<sect2 id="kppp">
<title>Modem og internettet med brug af kppp</title>
<indexterm><primary>kppp</primary></indexterm>
<indexterm><primary>internet-opkobling</primary><secondary>kppp</secondary></indexterm>
<para>
Et godt program til at styre en internet-opkobling i X er KPPP
(<command>kppp</command>). Programmet kommer som del af KDE, men
det kan også køres under andre grafiske brugergrænseflader.
</para>

<figure id="kppp-fig" float="1">
<title>KPPP
</title>
<graphic fileref="kppp.&magic;" scale="40"></graphic>
</figure>

<para>
Du vil i Red Hat se at du skal indtaste root-adgangskoden for at komme
i gang. Det er irriterende og vi skal her vise hvordan man undgår
dette. Først lidt forklaring: Programmet
<command>/usr/bin/kppp</command> er i Red Hat et link til
<command>/usr/bin/consolehelper</command>.
<filename>/usr/bin/consolehelper</filename> er en "pam.d"-wrapper. Den
finder sin opsætningsfil i
<filename>/etc/security/console.apps/kppp</filename>:
</para>

<programlisting>
USER=root 
PROGRAM=/usr/sbin/kppp 
SESSION=true
</programlisting>

<para>
Heraf ses, at det program der rent faktisk skal køres er
<command>/usr/sbin/kppp</command>, som root, og der skal registreres
en "session" for at det virker.
</para>

<para>
Det er imidlertid ikke så vigtigt. Hvad der er vigtigt er filen
<filename>/etc/pam.d/kppp</filename> som efterfølgende anvendes af
<command>consolehelper</command> for at godkende starten af kppp:
</para>

<para>
Den originale <filename>/etc/pam.d/kppp</filename> ser således ud.
</para>

<programlisting>
#%PAM-1.0 
auth sufficient /lib/security/pam_rootok.so 
auth required /lib/security/pam_pwdb.so 
session optional /lib/security/pam_xauth.so
account required /lib/security/pam_permit.so
</programlisting>

<para>
Den første linie er en kommentar. 
Den næste linie siger at mht. autorisation, er det
<emphasis>tilstrækkeligt</emphasis> at 
brugeren er "root". Hvis det er tilfældet, vil linie 3
<emphasis>ikke</emphasis> blive brugt,
ellers vil linie 3 blive brugt; da brugeren er "root" og auth med pwdb.so
kræves, skal man give root-adgangskoden.
</para>

<para>
De sidste par linier omhandler oprettelsen en session (mest aht. logging),
samt hvilke rettigheder man har - da man skal have root auth, har man
stort set alle rettigheder, og derfor anvendes tilladelse (permit).
</para>

<para>
Hvis du ønsker at give alle brugere, der er logget ind på
konsollen mulighed for at foretage en internet-opkobling, kan du ændre
filen til:
</para>

<programlisting>
#%PAM-1.0 
auth sufficient /lib/security/pam_rootok.so 
auth sufficient /lib/security/pam_console.so 
auth required /lib/security/pam_pwdb.so 
session optional /lib/security/pam_xauth.so
account required /lib/security/pam_permit.so
</programlisting>

<para>
Her er tjekket:
<itemizedlist mark="bullet">
<listitem> <para> a) root? Ja: Ok --- nej: næste tjek.</para></listitem>
<listitem> <para> b) ved konsol? Ja: OK --- nej: næste tjek.</para></listitem>
<listitem> <para> c) Kan man give root-adgangskode? Ja: Ok --- nej, fejl..</para></listitem>
</itemizedlist>
</para>

<para>
Hvis du ønsker at lave hvad der svarer til "suid root", kan du lave:
</para>

<programlisting>
#%PAM-1.0 
auth sufficient /lib/security/pam_permit.so 
session optional /lib/security/pam_xauth.so
account required /lib/security/pam_permit.so
</programlisting>

<para>
Vil du vide mere, så prøv <command>man consolehelper</command>,
<command>man userhelper</command> og se måske også
<filename>/usr/doc/pam..../html</filename>.
</para>

<para>
Desværre ser det ud til at Red Hat 6.2 ikke kan klare sig alene med
dette og kræver at man f.eks. laver <command>chmod +s
/usr/sbin/pppd</command> og kalder <command>/usr/sbin/kppp</command>.
Du kan også blive nødt til at krydse fluebenet af i "Autoconfigure
hostname from this IP" i kppp-opsætningen.
</para>

<para>
Når man sætter kppp op som root, findes opsætningen i
<filename>/root/.kde/share/config/kppprc</filename>, men da filen
findes i roots home-folder, har andre usere ingen adgang og kan dermed
kun bruge opsætningen hvis de har systemadministratorens adgangskode. Genialt ikke!
</para>
</sect2>

<sect2 id="wvdial">
<title>Modem og internettet med brug af wvdial</title>
<indexterm><primary>internet-opkobling</primary><secondary>wvdial</secondary></indexterm>
<para>
Programmet <command>wvdial</command> følger med SuSE og Red
Hat. Programmet
kan konfigureres fra YaST, SuSE's opsætningsværktøj eller
direkte
vha. <command>wvdialconf</command>. <command>wvdialconf</command> vil
forsøge at detektere dit modem, sætte de optimale
initialiseringsstrenge op, osv. Efter du har kørt programmet, skal du
redigere filen <filename>/etc/wvdial.conf</filename>, f.eks. skal du
indsætte telefonnummeret til din internetudbyder.
</para>

<para>
Når du har fået sat din opkobling op, kan du ringe op ved at taste
<command>wvdial</command> på en kommandolinje.
</para>

</sect2>

<sect2 id="diald">
<title>Diald</title>
<indexterm><primary>internet-opkobling</primary><secondary>Diald</secondary></indexterm>
<indexterm><primary>Diald</primary></indexterm>

<para>
Når du har en fungerende PPP installeret, kan <command>diald</command>
muligvis være interessant for dig. Ideen er, at
<command>diald</command> åbner PPP-forbindelsen, når der er brug for
den, og lukker den, når der ikke er. På den måde kan du få
fornemmelsen af at have en fast forbindelse, der altid er
åben. Virkningen er specielt overbevisende, hvis du har et ISDN-modem,
der åbner forbindelsen på et kort øjeblik, for et almindeligt analogt
modem bruger en del tid på at ringe op.
</para>

<para>
Der er rige muligheder for at finindstille <command>diald</command>, så
programmet opfører sig præcis, som du ønsker det. Vi vil nøjes med at
gøre opmærksom på dets eksistens og i øvrigt henvise til de
glimrende manual-sider om emnet.
</para>

<para>
Læs mere om <command>diald</command> på
<ulink
url="http://www.ctv.es/USERS/andressh/linux/Diald-Howto.html">http://www.ctv.es/USERS/andressh/linux/Diald-Howto.html</ulink>.
Se i øvrigt <ulink
url="http://www.sslug.dk/artikler/ppp/diald.shtml#links">http://www.sslug.dk/artikler/ppp/diald.shtml#links</ulink>
og diald hjemmesiden <ulink url="http://diald.sourceforge.net/">http://diald.sourceforge.net/</ulink>.
</para>
</sect2>
</sect1>

<sect1 id="ethernet">
<title>Ethernet-kort</title>
<indexterm><primary>Ethernet</primary></indexterm>
<indexterm><primary>Netkort</primary></indexterm>
<indexterm><primary>Netværk</primary><secondary>Ethernet</secondary></indexterm>

<para>
Hvis du har behov for at koble et mindre antal computere sammen i et
lokalnetværk, vil du oftest benytte netværkskort af Ethernet-typen.
</para>

<para>
Langt de fleste Ethernet-kort fungerer upåklageligt under Linux. De fleste
billige kort er kloner af Novells NE2000 og fungerer glimrende sammen
med driveren til det kort.
</para>

<para>
Installerede Ethernet-kort hedder i Linux <filename>eth0</filename>,
<filename>eth1</filename>, <filename>eth2</filename>
etc. Normalt vil du kun have et enkelt kort, der så naturligvis hedder
<filename>eth0</filename>.
</para>

<para>
Netværkskort kan konfigureres i forbindelse med installationen
eller senere ved hjælp af programmet <command>linuxconf</command>
eller <command>netcfg</command> under Red Hat - tilsvarende er det
<command>yast</command> med SuSE.
De parametre, som optræder på billedet, skal du have af din
netværksansvarlige.
</para>

<figure id="ethercfg" float="1">
<title>Opsætning af ethernet-interface</title>
<graphic fileref="linuxconf-eth0.&magic;" scale="40"></graphic>
</figure>
</sect1>

<sect1 id="wavelan">
<title>Wavelan</title>
<indexterm><primary>Wavelan</primary></indexterm>
<indexterm><primary>Wireless</primary></indexterm>
<indexterm><primary>/etc/pcmcia/config</primary></indexterm>
<indexterm><primary>Trådløst net</primary></indexterm>
<indexterm><primary>802.11b</primary></indexterm>
<indexterm><primary>laptop</primary><secondary>Trådløst net</secondary></indexterm>
<indexterm><primary>Netværk</primary><secondary>Wavelan</secondary></indexterm>

<para>
Har du en laptop kan wavelan trådløst net være noget
du kunne være interesseret i.
De fleste løsninger er for tiden et PCMCIA (pc-card)
indstikskort, eller direkte indbygget i computeren.
Den standard der er den gængse og som virker med alle
wavelan kort idag er 802.11b, hvilket betyder at kort
fra forskellige producenter virker sammen.
</para>

<para>
Opsætning foregår ved først at konfigurere en
ethernet device, fx. eth1, hvis eth0 er brugt til
almindeligt ethernet med UTP-kabel.
Som kerne-module vælges <emphasis>wavelan</emphasis>
og så enten DHCP eller manuelt IP-nummer.
Dernæst sættes PCMCIA-kortet i og netværket genstartes
med <command>/etc/init.d/network restart</command> .
</para>

<para>
For nogle netkort kan det være en fordel at skifte
driver. Typisk vil driveren være <emphasis>wvlan_cs</emphasis>,
og alternativt kan den sættes <emphasis>orinoco_cs</emphasis>
i filen <filename>/etc/pcmcia/config</filename> .
</para>

<para>
Som access point til din laptop, kan enten bruges en anden
pc med et wavelan kort og routing, eller du må ud og købe
en færdigbygget base station enhed.
Mange steder findes der allerede access points hvor man kan
få adgang gratis eller mod mindre betaling, så der er mange
der blot har et wavelan kort uden eget access point.
</para>

<para>
Et godt værktøj til monitorering af den trådløse
trafik er wavemon. Her kan man se hvor godt signalet
er (dæmpning), MAC-adresser og lignende ting.
wavemon kan downloades fra
<ulink url="http://www.jm-music.de/projects.html">www.jm-music.de/projects.html</ulink>
og rpm-pakker kan findes på
<ulink url="http://rpmfind.net/">rpmfind.net</a> .
</para>

<figure id="wavemon-hoej" float="1">
<title>Wavemon med god forbindelse</title>
<graphic fileref="wavemon-hoej.&magic;" scale="40"></graphic>
</figure>

<figure id="wavemon-lav" float="1">
<title>Wavemon med dårlig forbindelse</title>
<graphic fileref="wavemon-lav.&magic;" scale="40"></graphic>
</figure>

</sect1>

<sect1 id="ADSL">
<title>ADSL-opkobling</title>
<indexterm><primary>ADSL</primary></indexterm>
<indexterm><primary>Netværk</primary><secondary>ADSL</secondary></indexterm>

<para>
ADSL under Linux kan være meget enkelt eller meget svært. Flere udbydere
tilbyder en router-løsning, hvor man får installeret en router
hjemme (f.eks. TDC Netexpress II, TDC ProAccess eller Cybercity). 
Routeren kobles direkte til en pc eller til en hub/switch hvorfra man kan
koble flere maskiner på. Denne løsning er glimrende, idet man kun har
brug for ét ethernet-kort og evt. en hub for at komme i gang.
Normalt laver man et hjemmenetværk (med IP-adresser 192.168.0.X) og
routeren har endda ofte en DHCP-server med - så går det rigtig nemt.
</para>

<para>
Andre udbydere (TDC netexpress) tilbyder ATM-kort, som skal sættes i
din pc. Her skal man være omhyggelig med at checke om der findes
drivere til netop det kort du får. 
</para>

<!-- Flemming Danielsen fd@cvusyd.edu -->
<para>
Orange (tidligere Mobilix) har tidligere tilbudt ADSL, med en speciel boks,
der sættes på USB-porten. Mange har haft problemer med manglende
drivere, men nu er der i hvert fald én, som har fået det til at virke
under Linux. Orange har nu stoppet salget af ADSL-opkoblinger.
</para>

<orderedlist>

<listitem><para>
Indsæt IP med et hostnavn i <filename>/etc/hosts</filename> 
</para>
<programlisting>
10.0.0.138	router
</programlisting>
</listitem>

<listitem><para>
Sikrede mig at jeg kan lave ping til den, og så sikre mig at der er
ppp enablet i kernen, samt at pppd er installeret. Jeg har brugt
RedHat 7.1, og der virker det i standard-udgaven.
</para></listitem>

<listitem><para>
Indsætte mit brugernavn og min adgangskode i <filename>/etc/ppp/pap-secrets</filename>
</para>

<programlisting>
username	server	password

"waiXXXXX" 	*	"xvxvxvx"
</programlisting>
</listitem>

 <listitem>
  <para>
   Oversættelse af pptp-klienten fra dette websted <ulink
   url="http://cag.lcs.mit.edu/~cananian/Projects/PPTP/">http://cag.lcs.mit.edu/~cananian/Projects/PPTP/</ulink>.
  </para>
 </listitem>

<listitem><para>
Kør programmet pptp
</para>

<programlisting>
./pptp &lt;HOSTNAME-OF-VPN&gt; name waiXXXX remoteserver &lt;HOSTNAME-OF-VPN&gt; \
&lt;localip&gt;:&lt;remoteip&gt;
</programlisting>

<para>
local IP og remote IP kan man se ved at vælge egenskaber på sin
connection, når der kører en windows session over forbindelsen.
</para></listitem>

<listitem><para>
Opsætte default route via den oprettede VPN-PPP
</para>

<programlisting>
route del default
route add default ppp0
</programlisting>
</listitem>
</orderedlist>

<para>
Håber dette kan være til hjælp, og husk at ADSL med en åben router kan
være et kæmpe sikkerhedshul - læs derfor <xref linkend="sikkerhed"/>.
</para>

</sect1>

<sect1 id="webbrowsere">
<title>Web-browsere</title>
<indexterm><primary>Webbrowsere</primary></indexterm>
<indexterm><primary>lynx</primary></indexterm>

<para>
Kan du undvære grafik, bør du kende <command>lynx</command>, som er en
tekstbaseret web-browser, som faktisk er ret anvendelig - pånær ved
klikbare billeder. Grafik hentes kun (til disk), hvis dette
vælges. Lynx er smart, hvis du har en langsom netforbindelse, eller
hvis du vil lave applikationer, som automatisk skal kunne hente HTML
eller billeder.
</para>

<indexterm><primary>Netscape</primary></indexterm>
<para>
Et specielt godt program er Netscape Communicator, som er kendt af de
fleste. Programmet har været kommercielt, men stærkt inspireret af
Linux-verdenen er det nu blevet et "Open Source"-udviklingsprojekt ved
navn Mozilla. Netscape findes nu som version 6.2, og den svarer til
Mozilla version 1.0.
</para>

<figure id="netscape-fig" float="1">
<title>Netscape Communicator
</title>
<graphic fileref="netscape.&magic;" scale="60"></graphic>
</figure>

<indexterm><primary>Konqueror</primary></indexterm>

<para>
Et alternativ til Netscape er det filhåndteringsprogram der følger med
KDE. Det kan både lave filoversigter på din harddisk (med flytte- og
kopiere-muligheder), men <command>konqueror</command> kan meget mere - den
kan også vise hjemmesider. Se bogen "Linux - Friheden til at vælge
programmer" på <ulink
url="http://www.sslug.dk/linuxbog">http://www.sslug.dk/linuxbog</ulink>. 
</para>

<para>
En anden web-browser, som er på vej frem er Opera - se mere på <ulink
url="http://www.opera.com/linux/">http://www.opera.com/linux/</ulink>.
For tiden er Opera stadig i en beta-udgave, men det er klart, at Opera
bliver en hurtig browser, som kræver meget mindre hukommelse end
Netscape. Du kan se hvordan Opera ser ud på <xref linkend="opera-fig"/>.
</para>

<indexterm><primary>Opera</primary></indexterm>

<figure id="opera-fig" float="1">
<title>Opera</title>
<graphic fileref="Opera.&magic;" scale="60"></graphic>
</figure>


<sect2 id="truetype">
<title>TrueType-skrifttyper og Netscape</title>
<indexterm><primary>True type-skrifttyper</primary></indexterm>

<para>
Normalt er TrueType-skrifttyper ikke anvendt under X-vinduesystemet, men du
kan få f.eks. din Netscape til at bruge de skrifter. Du skal have installeret
<filename>freetype-1.2-6.i386.rpm</filename> eller en lignende
version. Man skal blot "finde" programmet <command>ttmkfdir</command>,
der kan generere en "<filename>fonts.scale</filename>"-fil til sine
TrueType-skriftsnit.
</para>

<itemizedlist mark="bullet">

<listitem> <para>
Lav et katalog til dine TrueType (ttf) filer, f.eks.
<filename>/usr/share/fonts/default/TrueType</filename>.
</para></listitem>

<listitem> <para>
Kopiér ttf-skrifttyperne derned fra en Windows-installation, eller
hent de gratis ttf-filer fra Microsofts webside (de har en
gratis samling af de mest almindelige TrueType-skrifttyper).
</para></listitem>

<listitem> <para>
  <screen>
  <prompt>[root@linus /root]#  </prompt><userinput>cd /usr/share/fonts/default/TrueType</userinput>
  <prompt>[root@linus /root]#  </prompt><userinput>ttmkfdir > fonts.scale</userinput>
  <prompt>[root@linus /root]#  </prompt><userinput>mkfontdir</userinput>
  </screen>
  Dette genererer en <filename>fonts.dir</filename>-fil som X bruger til at
  finde ud af hvilke skrifttyper, der ligger i hvilke filer.
</para></listitem>

<listitem> 

<para>
 Ret din X11 config så den indeholder TrueType-kataloget.
 FontPath entries i <filename>/etc/X11/fs/config</filename> (kan evt. være i
 <filename>/etc/X11/XF86Config</filename>) kan se således ud:
</para>

  <programlisting>
    FontPath    "/usr/X11R6/lib/X11/fonts/misc/"
    FontPath    "/usr/share/fonts/default/TrueType/"
    FontPath    "/usr/X11R6/lib/X11/fonts/75dpi/"
    FontPath    "/usr/share/fonts/default/Type1/"
    FontPath    "/usr/X11R6/lib/X11/fonts/Type1/"
    FontPath    "/usr/X11R6/lib/X11/fonts/Speedo/"
    FontPath    "/usr/X11R6/lib/X11/fonts/100dpi/"
  </programlisting>
</listitem>
</itemizedlist>

<para>
 Start X, og se om "<command>xlsfonts</command>" udskriver en liste med de
 forskellige TrueType-skrifttyper - prøv for eksempel
 "<command>xlsfonts|grep microsoft</command>".
</para>

<para>
I din Netscape-opsætning ("Edit"->"Preferences") kan du vælge
</para>
<programlisting>
  Variable width font:  Arial (Monotype)              Size: 0
      Allow scaling: disabled
  Fixed width font: Courier New (Monotype)            Size: 0
      Allow scaling: disabled
</programlisting>

<para>
Endvidere kan du klikke på "Use document-specified fonts, but
disable Dynamic fonts" (den midterste af de tre muligheder).
</para>
</sect2>

<sect2 id="mime-types">
<title>mime-types</title>
<indexterm><primary>mime-typer</primary></indexterm>

<para>
På internettet er der en måde at koble overførsel af data sammen med en
datatype, således at modtager af data har mulighed for at starte det
rette program til at vise data. Dette kaldes "mime-types" og for
Netscape kan vi f.eks. vise, hvordan man får OpenOffice.org startet op for
automatisk at vise et Word-dokument. Der er trods alt nogle, der
finder dette af interesse :-)
</para>

<para>
I Netscape skal du åbne "Edit"->"Preferences", derefter vælge
"Navigator"->"Applications". Vælg "Microsoft Word Document" og tryk
"Edit". Vælg "Application" og sæt denne til
<filename>/home/anne/OpenOffice.org1.0/soffice "%s"</filename>.  Hvis
du alternativt ønsker at anvende tekstbehandlingsprogrammet
<command>abiword</command> så skrives
<filename>abiword "%s"</filename>
</para>

<para>
Efter genstart af Netscape, bør du både i web-browseren og i
e-post-delen af Netscape kunne trykke direkte på Word-filer og se dem i 
OpenOffice.org eller abiword.
</para>



</sect2>


</sect1>



<sect1 id="email">
<title>E-post</title>
<indexterm><primary>Email</primary></indexterm>
<indexterm><primary>E-post</primary></indexterm>
<para>
Til at læse e-breve kan du på næsten alle Unix-systemer finde
programmet <command>mail</command>, som er meget simpelt. Skrives f.eks.

<screen>
<prompt>[anne@linus ~]$  </prompt><userinput>mail BRUGERNAVN@MASKINE.DOMÆNE</userinput> <userinput>help</userinput>
</screen>

og afsluttes med <keysym>Ctrl-D</keysym> så er der sendt et
brev til <filename>BRUGERNAVN@MASKINE.DOMÆNE</filename> med indholdet
<filename>help</filename>.
</para>

<para>
Senere er Elm (<command>elm</command>) kommet med lidt flere
muligheder, men ELM bliver ikke videreudviklet mere.
</para>

<indexterm><primary>Pine</primary></indexterm>
<indexterm><primary>Elm</primary></indexterm>
<indexterm><primary>Mutt</primary></indexterm>
<para>
Til tekstbaseret læsning og skrivning af e-breve er der to gode
valg. Mutt (<command>mutt</command>) er hurtig og har mange
funktioner. 
</para>

<para>
Det skal også nævnes, at Netscape har indbygget post-håndtering,
som foretrækkes af mange. Det er grafisk og ret enkelt at bruge.
</para>

<figure id="netscapemail-fig" float="1">
<title>Netscapes mail-funktion
</title>
<graphic fileref="netscapemail.&magic;" scale="40"></graphic>
</figure>


<sect2 id="pine">
<indexterm><primary>Pine</primary></indexterm>
<title>Pine</title>

<para>
Pine er et af de gode programmer til at læse og håndtere e-post. 
Mailfoldere, en lille og god indbygget teksteditor (<command>pico</command>),
søgemuligheder, mulighed for at se HTML-formaterede breve og et
utal af opsætningsmuligheder gør Pine til et hit.
</para>


<para>
I den version af Pine som kommer med Red Hat er der endda
muligheder for at definere roller (bl.a. med forskellige
email-signaturfiler) og farveopsætning. Som det ses på de følgende
billeder kan man få forskellige farver på hvert svar-niveau.
</para>

<figure id="pine2-fig" float="1">
<title>Pine med farver
</title>
<graphic fileref="pine2.&magic;" scale="40"></graphic>
</figure>

<para>
En egentlig vejledning til pine er at finde på 
<ulink url="http://www.washington.edu/pine/tutorial.4/index.html">http://www.washington.edu/pine/tutorial.4/index.html</ulink>
</para>

<para>
Lad os tage et par nyttige tricks med pine. 
</para>

<sect3 id="stavekontrol-med-pine">
<title>Stavekontrol i Pine</title>

  <indexterm>
   <primary>stavekontrol i Pine</primary>
  </indexterm>
  <indexterm>
   <primary>Pine</primary>
   <secondary>stavekontrol i</secondary>
  </indexterm>

  <para>
   <emphasis>Tip:</emphasis>
   Når du er i gang med at redigere et brev har du mulighed for at få det
   tjekket for stavefejl. Når du taster <keysym>Ctrl-T</keysym> starter
   Pine det stavekontrolprogram det er sat op til at bruge. Normalt vil det
   være Ispell med en engelsk ordbog. Hvis du skriver breve på flere sprog kan
   det være lidt irriterende med Pines en-sprogede stavekontrol. Programmet
   <ulink url="http://www.sslug.dk/linuxbog/unix/eksempler/pine-spell"><command>pine-spell</command></ulink>,
   der kommer med som et af bogens eksempler, er et forsøg på at rette op
   på dette problem. Hvis du installerer det på dit unix-system og sætter
   Pine til at bruge det, vil du få mulighed for at vælge mellem alle de
   sprog der er ordlister til på systemet, når du taster
   <keysym>Ctrl-T</keysym>. Du skal have installeret 
   <filename>aspell-da-*.rpm</filename> ud over pine selv.
  </para>

  <para>
   Kommandoerne der vises her installerer <command>pine-spell</command>
   i dit eget programkatalog (<filename>~/bin/</filename>):
</para>

<screen>
<prompt>anne@linus ~/&gt; </prompt><userinput>mkdir -p ~/bin</userinput>
<prompt>anne@linus ~/&gt; </prompt><userinput>wget -q http://www.sslug.dk/linuxbog/unix/eksempler/pine-spell -O ~/bin/pine-spell &amp;&amp; O.k.</userinput>
O.k.
<prompt>anne@linus ~/&gt; </prompt><userinput>chmod a+x ~/bin/pine-spell</userinput>
</screen>

  <para>
   Hvis der ikke kommer et "O.k." gik noget galt. Så bliver du nødt til at
   køre kommandoen uden flaget <option>-q</option>, så der kommer lidt
   information om hvad der sker.
  </para>

  <para>
   Vi går nu ud fra at <command>pine-spell</command> er installeret i dit
   eget programkatalog og du har startet Pine. For at sætte Pine op skal du
   først ud i hovedmenuen. Hvis du ikke allerede er der, så tast
   <keysym>M</keysym> for at komme der ud. Her taster du så
   <keysym>S</keysym> efterfulgt af <keysym>C</keysym> for at komme
   ind i opsætningen. Du skal finde feltet "speller" (prøv
   <keysym>W</keysym> efterfulgt af "speller" og et linieskift) og
   ændre det til "<filename>~/bin/pine-spell</filename>". Når det er gjort
   taster du <keysym>E</keysym> efterfulgt af <keysym>Y</keysym>
   for at gemme ændringen. Næste gang du har skrevet et brev og vil
   undersøge om der er stavefejl i det, så taster du blot
   <keysym>Ctrl-T</keysym> inden du sender det.
  </para>

</sect3>

<sect3 id="pine-soege">
<title>Søgning med PINE</title>

  <indexterm>
   <primary>søgning i Pine</primary>
  </indexterm>
  <indexterm>
   <primary>Pine</primary>
   <secondary>søgning i</secondary>
  </indexterm>

<para>
Du kan lave meget avancerede søgninger i dine e-post-foldere. For at
få dette valgt, skal du fra hovedmenuen trykke <command>s c w
agg</command> og afslutte med retur-tasten. Du bør nu stå på et af de
mange felter i opsætningen, hvor der står
"enable-aggregate-command-set". Tryk <command>x</command> for at vælge,
<command>e</command> for exit og bekræft med <command>y</command>.
Som et eksempel kan vi nu gå ned i en e-post-folder og finde e-post,
hvor ordet Andeby er nævnt et vilkårligt sted. Når du er i e-post-folderen
trykker du <command>;</command>, derefter har du en del
forskellige valgmuligheder - vi vælger <command>t</command> for tekstsøgning.
Igen har vi en del muligheder og da vi vil søge i alle dele
af posten vælger vi <command>a</command>. Nu skrives søgestrengen
<filename>Andeby</filename> ind og du kan nu med <command>z</command>
skifte mellem alt post og kun dem, der netop indeholder Andeby. Får
man disse kommandoer lært kan man virkelig søge hurtigt og effektivt.
</para>
</sect3>

<sect3 id="pine-roller">
<title>Afsender og roller</title>

  <indexterm>
   <primary>Roller i Pine</primary>
  </indexterm>
  <indexterm>
   <primary>Pine</primary>
   <secondary>roller i</secondary>
  </indexterm>

  <indexterm>
   <primary>Afsenderadresse i Pine</primary>
  </indexterm>
  <indexterm>
   <primary>Pine</primary>
   <secondary>sætte afsenderadresse</secondary>
  </indexterm>


<para> 
Nogle personer sidder ikke på 
den maskine man ønsker e-post sendt tilbage til, og man har derfor brug 
for at sætte sin afsender-e-post-adresse
til eksakt det man vil have. Fra hovedmenuen kan vi
trykke <command>s</command> (for setup), <command>c</command> (for
config), <command>w customized-hdrs</command> og afslutte med retur. Du er nu på
<filename>customized-hdrs</filename>-feltet. Skriv <filename>From:
Anne &lt;anne@sslug.dk&gt;</filename>, hvis e-post skal komme
fra "Anne &lt;anne@sslug.dk&gt;". Du skal også sætte
<filename>feature-list=allow-changing-from</filename> manuelt i
<filename>~/.pinerc</filename>.
</para>


<para>
En anden smart mulighed i Pine er muligheden for at definere roller -
dvs. at man kan have en afsender-adresse og signatur-fil for hver
identitet man har defineret - f.eks. en privat hhv. en
firma-identitet. 
Vælg først 

Vælg <emphasis>m</emphasis>(ain menu)
<emphasis>s</emphasis>(setup) <emphasis>c</emphasis>(config)
<emphasis>w</emphasis>(word to find)
<emphasis>confirm-role</emphasis>. Sæt kryds i
<emphasis>confirm-role-even-for-default</emphasis> (med x) og vælg e
og Yes. Vælg
<emphasis>s</emphasis>(setup) <emphasis>r</emphasis>(rules)
<emphasis>r</emphasis>(roles) <emphasis>a</emphasis>(add). Derefter
kommer man ind i en menu for en af roller man kan definere. Sæt følgende
</para>

<itemizedlist mark="bullet">
<listitem>
 <para>
Nickname : Skriv et navn her for den identitet man definerer - f.eks. fornavn, 
loginnavn, privat, eller lignende. Det er dette "Nickname" man vælger for hver
e-post der skal sendes.
 </para>
</listitem>
<listitem> 
 <para>
From pattern : Skriv her din fulde afsender identitet - f.eks. 
Anne Nielsen &lt;anne@sslug.dk&gt;
 </para>
</listitem>
<listitem> 
 <para>
Sender pattern : Skriv her din email-adresse - f.eks. anne@sslug.dk        
 </para>
</listitem>
<listitem> 
 <para>
Set Signature : Her kan man skrive filnavnet som indeholder signaturfil for
den nuværende identitet. Anføres ikke fuld sti vil filnavnet være i forhold
til brugerens hjemmekatalog. F.eks. .signaturfil
 </para>
</listitem>
<listitem> 
 <para>
Set From : Sættes som "From pattern" - f.eks. 
Anne Nielsen &lt;anne@sslug.dk&gt;
 </para>
</listitem>
</itemizedlist>

<para>
Tryk <emphasis>e</emphasis> (Exit Setup) når du er færdig og
<emphasis>a</emphasis> for at addere hver af de roller du vil
definere. Endelig trykkes <emphasis>e</emphasis> (Exit Setup) og
<emphasis>y</emphasis> til at acceptere at der laves "Commit changes". 
</para>

<para>
Når man derefter vil sende eller svare på e-post med
<emphasis>c</emphasis> (compose) får man en ekstra menu i bunden af Pine:
</para>

<programlisting>
Press Return to Compose using no role, or ^T to select a role
 ? Help    Ret [Compose] ^T To Select Role
^C Cancel     
</programlisting>

<para>Tryk Ctrl-t (eller Ctrl-T) for at vælge ^T. Gå ned på den rolle
du vil anvende og tryk på retur-tasten to gange. Nu skriver du e-post
i den valgte rolle. Bemærk at "From"-feltet nu skal være sat svarende
til den identitet du har valgt. Metoden virker også ved svar på e-post.
</para>

</sect3>

<sect3 id="smaa-pine-tips">
<title>Små nyttige tips til opsætning af Pine</title>
<para> <emphasis>Tip:</emphasis> Under setup, skal du sætte
"character-set = ISO-8859-1" for at få dansk tegnsæt til at virke.
</para>

<para> <emphasis>Tip:</emphasis> 
Vil du se alle headere i din e-post,
skal du under setup sætte "enable-full-header-cmd". Tryk på h for at
se alle headere når du læser post.
</para>

<para> <emphasis>Tip:</emphasis> 
Pine kan farvelægge e-post, så det er lettere at se, hvem der skriver
hvad i en diskussion. Fra hovedmenuen trykkes "s k", hvorefter farver
på oversigten, "quotelevels" og meget andet kan konfigureres.
</para>

<para> <emphasis>Tip:</emphasis> 
Hvis du vil kunne hoppe direkte til en URL angivet i en e-post, kan
du give fuld sti til din favoritbrowser i setup under url-viewers, f.eks.
<command>/usr/bin/netscape</command>.
</para>

<para> <emphasis>Tip:</emphasis> 
<indexterm><primary>printer</primary><secondary>udskrivning af tekst</secondary></indexterm>
<indexterm><primary>udskrivning af tekst på printer</primary></indexterm>
<indexterm><primary>enscript</primary></indexterm>
Vil du gerne have pæn udskrift på printeren af dine tekst-emails, så kan du
med fordel installere programmet <command>enscript</command>, der følger med
de fleste Linux-distributioner (eller kan findes via 
<ulink url="http://rpmfind.net">http://rpmfind.net</ulink>). Sæt din udprintningskommando som følger: I hovedmenuen af Pine, tryk "s" "p" "pil ned"
"pil ned" "c". Sæt kommandoen til 
<command>enscript -2rG --word-wrap</command>, så får du to kolonner og 
der deles linier ved ordgrænserne.
</para>

<para>
Du kan naturlig generelt bruge <command>enscript -2rG --word-wrap 
TEKSTFILNAVN</command> til at udskrive tekstfiler til printeren.
</para>

</sect3>
</sect2>


<sect2 id="nyeemails">
<title>Vise nye e-breve</title>
<indexterm><primary>xbiff</primary></indexterm>

<para>
Programmet <command>xbiff</command> er en lille postkasse, der i et
vindue indikerer, om der er kommet elektronisk post. Hvis der er post,
inverteres farverne. Programmet opdaterer selv ca. en gang i
minuttet, hvis det ikke konfigureres anderledes.
</para>

<indexterm><primary>xmailbox</primary></indexterm>

<para>
Lidt mere smart er <command>xmailbox</command> og
<command>coolmail</command>, der begge viser en amerikansk
postkasse, som viser, at der er post med lyd og et flag, der hejses.
</para>

</sect2>

<sect2 id="fetchmail">
<title>Hente e-post fra POP-servere med Fetchmail</title>
<indexterm><primary>Fetchmail</primary></indexterm>
<indexterm><primary>POP3</primary></indexterm>
<para>
<command>fetchmail</command> bruges til at hente e-breve fra en
postserver hos din internetudbyder. Programmet styres gennem filen
<filename>.fetchmailrc</filename> i dit hjemmebibliotek. Den kan f.eks. se
sådan her ud:

<programlisting>
poll mail.fiktiv.dk
proto POP3
user anne
pass McMombo
</programlisting>

Når du kører <command>fetchmail</command>, vil den i dette eksempel
forsøge at hente post fra serveren <filename>post.fiktiv.dk</filename>
med protokollen POP3 (som er den mest almindelige)
og logge på serveren med brugernavnet "anne" og adgangskoden "McMombo". Hvis
der er post til "anne", leverer fetchmail den videre til det lokale
postsystem, der så lægger brevene i Annes postkasse.
</para>

<para>
De første gange, du kører <command>fetchmail</command>, vil du
som regel gerne se, om tingene går, som de skal, når posten hentes. Hvis
<command>fetchmail</command> køres med parameteren
<filename>-v</filename>, skriver den, hvad der foregår undervejs.
</para>

<para>
Hvis du er til grafisk baserede opsætningsværktøjer, kan du redigere din
<filename>.fetchmailrc</filename>
ved hjælp af programmet <command>fetchmailconf</command>.
</para>

<para>
<emphasis>Tip:</emphasis>Nogle post-servere vil ikke tillade at du
bruger POP3 fra andre maskiner og tillader kun Secure shell som login-metode.
Her er et mere avanceret trick til at hente e-post via en
POP3-server sat op til at køre alene på localhost. Først skal du lave
en <filename>.fetchmailrc</filename> med følgende indhold.
</para>

<programlisting>
poll localhost with proto pop3 port 1234
    user "anne" there with password "hemmeligt" is anne here options \
pass8bits mimedecode limit 100000 fetchall
</programlisting>

<para>Opsætningen er til at "anne" på klient og server med adgangskode
"hemmeligt" på serveren kan hente e-post op til maksimalt 100000
oktetter (ca. 80 kb per e-post-besked).
</para>

<para>
Du skal nu lave en kommando eller alias <command>ssh -L
1234:mailserver:110 -v mailserver</command>, som du starter i et
terminalvindue. Du kan se at du faktisk logger ind på mailservermaskinen
ved dette. 
</para>
<para>
I et andet vindue på lokalmaskinen (klienten) skriver du nu
<command>fetchmail</command>, hvorefter din e-post hentes via POP3 med
<command>ssh</command> som krypteret tunnel mellem de to maskiner.
</para>

<para>
<indexterm><primary>fetchmail</primary><secondary>Tømme alle mails ud af POP3-server</secondary></indexterm>
<indexterm><primary>POP3-server</primary></indexterm>
<emphasis>Tip:</emphasis> Hvad gør man hvis man har en mail-konto, som
skal tømmes men man ikke skal gemme alle de emails? Det kan være
relevant hvis man sender emails videre til en webmail-konto. Man skal
have en <filename>.fetchmailrc</filename>-fil som gør det muligt at
hente post fra POP3-serveren.
</para>

<screen>
poll <prompt>DIN_POP3_MAILSERVER</prompt>
proto <prompt>POP3</prompt>
user <prompt>DIT_BRUGER_ID</prompt>
pass <prompt>DIN_ADGANGSKODE</prompt>
</screen>

<para>
Derefter kan man køre <command>fetchmail --bsmtp /dev/null</command>
for at tømme alle emails ud i <filename>/dev/null</filename> dvs. 
de smides ud.
</para>
</sect2>

<sect2 id="procmail">
<title>Sortering og spam-filtrering af e-breve med procmail</title>
<indexterm><primary>procmail</primary></indexterm>
<indexterm><primary>spam</primary></indexterm>
<indexterm><primary>email</primary><secondary>spam</secondary></indexterm>
<indexterm><primary>email</primary><secondary>sortering</secondary></indexterm>

<para>
Hvis du får mange e-breve ind pr. dag, så vil du nok hurtigt lave
forskellige foldere til forskellige emner. F.eks. kan du lave en
folder til hver af de diskussionslister på SSLUG, som du deltager i.
Et program, som du kan have meget glæde af, er
<command>procmail</command>, der kan sortere e-breve automatisk ned
til de e-post-foldere, du har oprettet. Henter du breve med fetchmail,
så kan procmail lave sorteringen ud fra konfigurationsfilen
<filename>~/.procmailrc</filename>.  I eksemplet har vi post liggende
i <filename>~/mail</filename>-kataloget, og herunder har vi
forskellige filer som er brevfoldere.
</para>

<programlisting>
PATH=$HOME/bin:/usr/bin:/bin:/usr/local/bin:.
MAILDIR=$HOME/mail      # Her _skal_ procmail kunne aflevere din mail.
DEFAULT=$MAILDIR/mbox   # Forvalgt folder til af aflevere e-breve i
LOGFILE=$MAILDIR/.from   # Her gemmer vi en log over hvilke e-breve der kom
LOCKFILE=$HOME/.lockmail  # Fil til at lave lås med.

# REJECT: sikkert spam e-post
# Filen ~/.procmailrc.spam indeholder da regexps der 
# matches på brevets headere.
# I ~/.procmailrc.spam kan således indsættes linjer
# ^Subject: .*(\$\$|sex|adult|offer)
# som matcher det du vil slippe for. E-post, der
# fanges af reglen gemmes i spam post-mappen
:0
* ? egrep -q -f $HOME/.procmailrc.spam
spam

# Første liste er mgp-listen for Magic Point programmet
# Vi tjekker efter To eller Cc feltet er til listen mgp-users@mew.org
# og gemmer i ~/mail/mgp
:0
* ^(To:|Cc:).*mgp-users@mew.org
mgp 

# Dernæst har vi sslug-teknik som altid sætter "Reply-To" feltet
:0
* ^Reply-To:.sslug-teknik@sslug.dk
sslug-teknik

# Alle breve fra brugere @imm.dtu.dk gemmer vi i IMM-folderen
:0
* ^From:.*@imm.dtu.dk
IMM

# Vi kan også gemme en ekstra kopi af breve - dvs. brevet bliver 
# også processeret af de efterfølgende regler.
# Kommer der et e-brev fra statsministeren stm@stm.dk så gemmer vi lige
# en ekstra kopi i stats-folderen
:0c
* ^From:.*stm@stm.dk
stats


# Vi tager og sender en ekstra kopi af emails fra stm@stm.dk
# til redaktionen@ekstrabladet.dk
:0c
* ^From:.*stm@stm.dk
! redaktionen@ekstrabladet.dk

# Endelig kan vi faktisk også udføre kommandoer via mail
# Her lader vi e-breve med emnet EJECT udføre kommandoen eject
# og da det kun er en kopi vi udtager, så vil brevet også gå til 
# det forvalgte brevfolder.

:0c
*^Subject:.eject
|/usr/bin/eject      

# Alle andre mails ender i default mail folderen. 
</programlisting>

<para>
En langt mere restriktiv <filename>.procmailrc</filename>-fil kan være 
</para>

<programlisting>
PATH=$HOME/bin:/usr/bin:/bin:/usr/local/bin:.
MAILDIR=$HOME/mail      # Her _skal_ procmail kunne aflevere din e-post.
DEFAULT=$MAILDIR/mbox   # Default folder til at aflevere ebreve i
LOGFILE=$MAILDIR/.from   # Her gemmer vi en log over hvilke ebreve der kom
LOCKFILE=$HOME/.lockmail  # Fil til at lave lås med.

:0
* ? egrep -q -f $HOME/.procmailrc.allow
$DEFAULT

:0
spam
</programlisting>

<para>
Alt gemmes i spam-folderen medmindre det er tilladt ved tjek i
forhold til filen <filename>~/.procmailrc.allow</filename>. Denne fil 
indeholder f.eks.
</para>

<programlisting>
^((Resent-)?(To|Cc|Bcc|From)): .*(anne|root|.*master)@sslug\.dk
^From: freshmeat daemon &lt;freshd@freshmeat\.net&gt;$
^Sender: Security Portal Mailing List
^Mailing-List: contact sslug-.*@sslug.dk
^To: apacheweek@apacheweek\.com$
^Delivered-To: mailing list announce@apache\.org
</programlisting>

<para>
I dette tilfælde er det kun e-post til anne@sslug.dk (tilsvarende
også root og postmaster), og de e-post-lister, som brugeren anne kender, der
ender i <filename>$MAILDIR/mbox</filename> - alt andet ender i
spam-folderen. Det kan anbefales at checke sin spam-folder fra tid til
anden for at være sikker på at e-post ikke er gået galt i
procmail-reglerne. Er du helt sikker på dine spam-regler, så kan du
sende mail direkte til <filename>/dev/null</filename> i stedet for
spam-folderen.
</para>

<para>
Procmail er guld værd, og <command>man procmail</command>, 
<command>man procmailex</command> og
<command>man procmailrc</command> er værd at
læse. Du kan også være glad for at lave et alias <command>alias ms
"mailstat ~/mail/.from"</command>, idet du så kan skrive
<command>ms</command> efter at have kørt fetchmail, og du vil så få
vist hvor mange breve og størrelsen af disse som er blevet fordelt til
de forskellige foldere. 
</para>

<para>
Et smart procmail-filter er følgende, som retter subject af
brevet til en advarsel om et potentielt virus-angreb hvis attachment
kan indeholde en virus.
</para>

<programlisting>
:0
* ^Content-type: (multipart/mixed|application/octet-stream)
{
    :0 HB
    *  ^Content-Disposition: attachment;
    *filename=.*\.(exe|vbs|shs|com|pif|bat|src|wfs|vbe|wsh|hta)
    {
        :0 fhw
        | formail -i "Subject: Attachments kan indeholde virus !"
    
        :0:
        $DEFAULT
    }
}
</programlisting>


<para>
Et andet smart trick er følgende spam-filter, som checker om en 
afsender er black-listet i filen <filename>/home/dig/black.lst</filename>.
Hvis dette er tilfældet så sendes automatisk en email til afsenderen
om at man mener det er spam. Samme trick kan bruges til mere
venlige svar til ens venner om at man lige er væk, og at man kan 
prøve at ringe i stedet eller lign. 
</para>

<programlisting>
# Test om afsender er blacklistet. Hvis ja, send et autosvar...
:0
* ?
formail -x"From" -x"From:" -x"Sender:" -x"Reply-To:" -x"Return-Path:" -x"To:
" | egrep -is -f /home/dig/black.lst
| ( \
    echo "To: $FROM";\
    echo 'From: "Spam Filter" &lt;no-spam@ditdomain.dk&gt;';\
    echo "Subject: Spam Detected: $SUBJ"\n;\
    echo 'Dette er en automatisk advarsel !\n';\
    echo 'Hold op med at sende spam!\n';\
  ) | $SENDMAIL -U $FROM
</programlisting>

<para>
Filen <filename>/home/dig/black.lst</filename> udfyldes med en email-adresse per linie, ala.
</para>

<programlisting>
spam@spam.com
unwanted@mostwanted.dk
reklame@jatak.dk
</programlisting>

<para>
Der er under bogens eksempler på <ulink url="http://www.sslug.dk/linuxbog/unix/eksempler/procmail">http://www.sslug.dk/linuxbog/unix/eksempler/procmail</ulink> et meget stort eksempel på hvordan en <filename>.procmailrc</filename>-fil kan
se ud hvis den skal filtrere en masse spam fra og samtidig sortere
SSLUGs lister fornuftigt.
</para>
</sect2>

<sect2 id="spam">
<title>spam-filtering med spamassasin</title>
<para>
Har du længe haft din e-post-adresse liggende på en web-server
et sted, eller har du blot én gang sendt en besked til
en offentlig nyhedsgruppe, så har du sikkert også fået en del
"uimodståelige" tilbud
- eller <ulink url="http://www.ironworks.com/comedy/python/spam.htm">spam</ulink>
som det rettelig hedder.
</para>

<para>
Der har været mange løsninger på hvad der kunne gøres ved det.
Man kan offentligt
<ulink url="http://www.petemoss.com/spamflames/ShifmanIsAMoronSpammer.html">hænge</ulink>
spammeren ud,
skrive til postmesteren ((postmaster) det hjælper sjældent),
installere <ulink url="http://razor.sourceforge.net/">razor</ulink>,
installere <ulink url="http://mail-abuse.org/rbl/">Realtime Blackhole List</ulink>
eller det sidste nye skud på stammen,
<ulink url="http://spamassassin.org/">SpamAssassin</ulink>.
</para>

<para>
SpamAssassin installeres på en klient-maskine, eller hos
en internetudbyder. Her kigger SpamAssassin så den indkommende post igennem og
kigger efter mønstre, der tyder på at brevene er spam.
Hver ting der testes for i et brev, får så et point.
Skulle der optræde et par "$" (dollartegn) i emnelinien,
giver det 2,4 point, et enkelt udråbstegn giver kun 0,1 point.
Når der så er opsamlet 5 point, bliver brevet klassificeret
som spam.
Tærsklen kan selvfølgelig ændres, hvis man er mere eller mindre tolerant end SpamAssassins forfattere.
</para>

<para>
Har du før brugt
procmail (se <xref linkend="procmail"/>),
er SpamAssassin en nem lille ekstra ting at installere.
Programpakken der skal installeres fås både som
<ulink url="http://spamassassin.taint.org/downloads.html">tar.gz</ulink>,
<ulink url="http://www.hughes-family.org/spamassassin/">RPM</ulink> og debian-pakke.
Skulle der være afhængigheder af andre RPM-pakker, kan disse
findes på <ulink url="http://rpmfind.net/">rpmfind.net</ulink>.
Og <command>apt-get</command> skal nok løse sådanne problemer for debian-brugere.
I din <filename>~/.procmailrc</filename> tilføjes så blot nedenstående linier:
</para>

<screen>
# Filnavn: ~/.procmailrc
PATH=/bin:/usr/bin:/usr/bin
MAILDIR=$HOME/mail       #you'd better make sure it exists
LOGFILE=$MAILDIR/log     #recommended
PMDIR=$HOME/.procmail

:0fw
| spamassassin -P

:0:
* ^X-Spam-Status: Yes
caughtspam
</screen>

<para>
Det vil typisk være passende at placere ovenstående i den
slutningen af <filename>~/.procmailrc</filename>-filen, hvis du har andre
regler i forvejen.
SpamAssassin bruger en del CPU-kraft, så det er en fordel
først at filtrere lukkede postlisterlister som for eksempel 
<literal>&lt;sslug-teknik@sslug.dk&gt;</literal> fra:
</para>

<screen>
...

:0
*^Delivered-To: mailing list sslug-.*@sslug.dk$
sslug

:0fw
| spamassassin -P

:0:
* ^X-Spam-Status: Yes
caughtspam
</screen>

<para>
SpamAssassin vil nu tage det brev der kommer igennem,
og undersøge om der er noget der minder om spam.
Hvis det opnår under 5 point,
bliver der indsat en linie i brevhovedet om at det ikke er spam:
</para>

<screen>
X-Spam-Status: No
</screen>

<para>
Hvis der derimod findes lidt "underlige" ting, så ændres emnelinien
til <literal>*****SPAM*****</literal>, der indsættes en forklaring
i toppen af brevet med en beskrivelse af hvorfor det blev
kategoriseret som spam, og der indsættes en linie i brevhovedet 
om at det er spam:
</para>

<screen>
X-Spam-Status: Yes
</screen>

<para>
Og med ovenstående <filename>~/.procmailrc</filename>-fil 
bliver brevet lagt i folderen <filename>caughtspam</filename>,
som man så en gang imellem kan kigge lidt i for at se om
der skulle være nogle smuttere.
SpamAssassin fanger rundt regnet 98% af den rigtige
spam og enkelte bliver ikke fanget, men det er meget få.
Her er et ekstremt eksempel med 39.5 point:
</para>

<screen>
Date: Wed, 03 Jul 2002 15:19:44 -0500
From: brent@lookyourbest.com
Reply-To: rb006@emarketinggurus.com
To: weightloss@slim4you.com
Subject: *****SPAM***** Oprah's got nothin'    diet line               adv

SPAM: -------------------- Start SpamAssassin results ----------------------
SPAM: This mail is probably spam.  The original message has been altered
SPAM: so you can recognise or block similar unwanted mail in future.
SPAM: See http://spamassassin.org/tag/ for more details.
SPAM:
SPAM: Content analysis details:   (39.5 hits, 5 required)
SPAM: NO_REAL_NAME       (-1.1 points) From: does not include a real name
SPAM: ADVERT_CODE        (4.7 points)  Subject: contains advertising tag
SPAM: SUBJ_HAS_SPACES    (4.0 points)  Subject contains lots of white space
SPAM: FRIEND_AT_PUBLIC   (1.0 points)  sent to you@you.com or similar
SPAM: NO_QS_ASKED        (2.4 points)  BODY: Doesn't ask any questions
SPAM: CLICK_BELOW        (1.5 points)  BODY: Asks you to click below
SPAM: GUARANTEE          (1.5 points)  BODY: Contains word 'guarantee' in all-caps
SPAM: DOUBLE_CAPSWORD    (1.1 points)  BODY: A word in all caps repeated on the line
SPAM: CALL_FREE          (0.7 points)  BODY: Contains a tollfree number
SPAM: EXCUSE_16          (-0.7 points) BODY: I wonder how many emails they sent in error...
SPAM: EXCUSE_1           (2.3 points)  BODY: Gives a lame excuse about why you were sent this SPAM
SPAM: OPT_IN             (2.1 points)  BODY: Talks about opting in
SPAM: HR_3113            (2.7 points)  BODY: Mentions Spam law "H.R. 3113"
SPAM: SUBJ_REMOVE        (-0.8 points) BODY: List removal information
SPAM: REMOVE_SUBJ        (3.4 points)  BODY: List removal information
SPAM: REMOVE_IN_QUOTES   (2.6 points)  BODY: List removal information
SPAM: UPPERCASE_25_50    (1.9 points)  BODY: message body is 25-50% uppercase
SPAM: FRONTPAGE          (4.4 points)  BODY: Frontpage used to create the message
SPAM: HTML_WITH_BGCOLOR  (1.3 points)  BODY: HTML mail with non-white background
SPAM: BIG_FONT           (2.1 points)  BODY: FONT Size +2 and up or 3 and up
SPAM: FREQ_SPAM_PHRASE   (2.4 points)  Contains phrases frequently found in spam
SPAM:                    [score:  12, hits: for any, help you, mail]
SPAM:                    [address, not wish, passed congress, please]
SPAM:                    [click, received this, remove the, reply this,]
SPAM:                    [subject line, that you, the remove, the subject,]
SPAM:                    [this mail, this message, web site, yahoo com,]
SPAM:
SPAM: -------------------- End of SpamAssassin results ---------------------
</screen>

<para>
Resten af ovenstående mail er klippet væk, da du sikkert ikke er
interesseret i selve indholdet.
</para>

</sect2>


<sect2 id="kryptopost">
<title>Kryptering af post</title>
<indexterm><primary>Kryptering</primary></indexterm>
<indexterm><primary>PGP</primary></indexterm>
<indexterm><primary>GnuPG</primary></indexterm>
<indexterm><primary>E-post</primary><secondary>kryptering</secondary></indexterm>

<para>
I takt med internettets udbredelse er der kommet flere og flere mindre 
venligsindede mennesker på nettet. Elektronisk post er desværre meget
let at aflytte, og ønsker du brev-hemmelighed, må du kryptere din
post. Kryptering er en proces hvor dine data bliver skrevet i
kode. Krypterede breve kan kun læses af den person, de er stilet til.
</para>

<para>
I Linux-verdenen finder der flere programmer til kryptering af
post. Heldigvis findes der en standard for hvordan post bør krypteres, 
og det er derfor ligegyldigt hvilket krypteringsprogram, du
benytter. Vi har valgt at introducere GNU Privacy Guard (GPG), idet
GPG kommer under en ægte fri licens (GNU General Public
License). Samtidig kan GPG arbejde sammen med det anerkendte Pretty
Good Privacy (PGP).
</para>

<para>
GPG kan også bruges til at signere breve. En digital signatur er mere
end en underskrift. Den digitale signatur fortæller, ud over hvem der
er afsender, også hvornår brevet blev signeret. Endvidere bruges den
digitale signatur til at tjekke om brevet er blevet ændret under dets
rejse fra afsender til modtager. I skrivende stund kender forfatterne
ikke det officielle Danmarks holdning til GPG.
</para>

<para>
Ideen bag GPG er, at du har en offentlig og en privat nøgle. Den
offentlige nøgle gør det muligt for alle at tjekke din signatur, som
du fremstiller vha. din private nøgle. Når du skal kryptere post, skal 
du først udveksle nøglepar med den person, som du ønsker at
kommunikere med. Udvekslingen sker ofte i forbindelse med møder i
Linux-brugerforeninger.
</para>

<para>
Du kan hente GPG fra GPG's ftp-server 
<ulink url="ftp://ftp.gnupg.org">ftp://ftp.gnupg.org</ulink>. Selve
installationen er lige til at gå til - nedenfor ser du hvordan.
</para>

<screen>
<prompt>[anne@linus ~]$ </prompt><userinput>wget ftp://ftp.gnupg.org/pub/gcrypt/gnupg/gnupg-1.0.1.tar.gz</userinput>
<prompt>[anne@linus ~]$ </prompt><userinput>tar xzvf gnupg-1.0.1.tar.gz</userinput>
<prompt>[anne@linus ~]$ </prompt><userinput>cd gnupg-1.0.1</userinput>
<prompt>[anne@linus gnupg-1.0.1]$ </prompt><userinput>./configure</userinput>
[en masse klippet væk]
<prompt>[anne@linus gnupg-1.0.1]$ </prompt><userinput>make</userinput>
[en masse klippet væk]
<prompt>[anne@linus gnupg-1.0.1]$ </prompt><userinput>su</userinput>
Password: <userinput>hemlig</userinput>
<prompt>[root@linus gnupg-1.0.1]$ </prompt><userinput>make install</userinput>
<prompt>[root@linus gnupg-1.0.1]$ </prompt><userinput>exit</userinput>
<prompt>[anne@linus gnupg-1.0.1]$ </prompt><userinput>cd ..</userinput>
<prompt>[anne@linus ~]$ </prompt><userinput>rm -rf gnupg-1.0.1</userinput>
</screen>

<para>
Efter installationen er du klar til at bruge GPG. Det første, du skal
gøre, er at generere et nøglepar.
</para>

<screen>
<prompt>[anne@linus ~]$ </prompt><userinput>gpg</userinput>
gpg: Warning: using insecure memory!
gpg: /home/anne/.gnupg: directory created
gpg: /home/anne/.gnupg/options: new options file created
gpg: you have to start GnuPG again, so it can read the new options file
<prompt>[anne@linus ~]$  </prompt><userinput>gpg --gen-key</userinput>
gpg (GnuPG) 1.0.1; Copyright (C) 1999 Free Software Foundation, Inc.
This program comes with ABSOLUTELY NO WARRANTY.
This is free software, and you are welcome to redistribute it
under certain conditions. See the file COPYING for details.

gpg: Warning: using insecure memory!
gpg: /home/anne/.gnupg/secring.gpg: keyring created
gpg: /home/anne/.gnupg/pubring.gpg: keyring created
Please select what kind of key you want:
   (1) DSA and ElGamal (default)
   (2) DSA (sign only)
   (4) ElGamal (sign and encrypt)
Your selection? <userinput>1</userinput>
DSA keypair will have 1024 bits.
About to generate a new ELG-E keypair.
              minimum keysize is  768 bits
              default keysize is 1024 bits
    highest suggested keysize is 2048 bits
What keysize do you want? (1024) <userinput>1024</userinput>
Requested keysize is 1024 bits       
Please specify how long the key should be valid.
         0 = key does not expire
      &lt;n&gt;  = key expires in n days
      &lt;n&gt;w = key expires in n weeks
      &lt;n&gt;m = key expires in n months
      &lt;n&gt;y = key expires in n years
Key is valid for? (0) <userinput>0</userinput>
Key does not expire at all
Is this correct (y/n)? <userinput>y</userinput>
You need a User-ID to identify your key; the software constructs the user id
from Real Name, Comment and Email Address in this form:
    "Heinrich Heine (Der Dichter) &lt;heinrichh@duesseldorf.de&gt;"

Real name: <userinput>Anne</userinput>
Email address: <userinput>anne@sslug.dk</userinput>
Comment: 
You selected this USER-ID:
    "Anne &lt;anne@sslug.dk&gt;"

Change (N)ame, (C)omment, (E)mail or (O)kay/(Q)uit? <userinput>O</userinput>
You need a Passphrase to protect your secret key.

Enter passphrase: <userinput>DetteErHemlig!</userinput>
Repeat passphrase: <userinput>DetteErHemlig!</userinput>

We need to generate a lot of random bytes. It is a good idea to perform
some other action (type on the keyboard, move the mouse, utilize the
disks) during the prime generation; this gives the random number
generator a better chance to gain enough entropy.
+++++++++++++++..+++++++++++++++.+++++++++++++++++++++++++++++++++++++++++
+++++++++..++++++++++.++++++++++++++++++++++++++++++++++++++++>++++++++++>
+++++....................................+++++
We need to generate a lot of random bytes. It is a good idea to perform
some other action (type on the keyboard, move the mouse, utilize the
disks) during the prime generation; this gives the random number
generator a better chance to gain enough entropy.
++++++++++.+++++++++++++++.++++++++++....++++++++++.+++++++++++++++.+++++++
+++.+++++++++++++++++++++++++++++++++++++++++++++.+++++++++++++++>+++++....
..........+++++^^^
public and secret key created and signed
</screen>

<para>
Du bør med det samme fremstille en nøgle, som kan bruges til at
tilbagekalde den, du netop har fremstillet. Det er vigtig, idet det kan
ske at en eller anden finder ud af din private nøgle. En
tilbagekaldelsesnøgle genereres vha. kommandoen <command>gpg
--gen-revoke anne@sslug.dk</command> (vælg option 1 og gem hvad du ser
på skærmen i en fil). Tilbagekaldelsesnøglen (gemt i en fil)
bør opbevares et andet sted end dit hjemmekatalog, f.eks. kan du have
den liggende på en diskette i dit pengeskab.
</para>

<para>
Når du nu har fået genereret nøgler, er du klar til at signere
breve. Til at begynde med vil vi antage, at du skriver brevet først,
signerer det og til sidst indlæser det signerede brev i dit
postprogram. Nedenstående kommandosekvens viser dig hvordan.
</para>

<screen>
<prompt>[anne@linus ~]$ </prompt><userinput>cat brev</userinput>
Kære Pingo,

Du kan tro, at vi har det sjovt med GNU!

Anne
<prompt>[anne@linus ~]$ </prompt><userinput>gpg --clearsign brev</userinput>
<prompt>[anne@linus ~]$ </prompt><userinput>cat brev.asc</userinput>

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Kære Pingo,

Du kan tror at vi har det sjovt ned GNU!

Anne
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.0.1 (GNU/Linux)
Comment: For info see http://www.gnupg.org

iD8DBQE4elQW60LvO+QONowRAntQAKCIvUMIsyf1US2JoHC/VKgD73Ps1gCfRvRM
H9uEQNpfPp+AFNkP86snOVo=
=6+k8
-----END PGP SIGNATURE---
</screen>

<para>
Den opmærksomme læser bemærker at det signerede brev ligger i filen
<filename>brev.asc</filename>, dvs. der er blevet tilføjet
<filename>.asc</filename> til det oprindelige navn.
</para>

<para>
For at få det største udbytte af GPG bør du læse den glimrende
brugervejledning. Den finder du på 
<ulink url="http://www.gnupg.org/docs.html">http://www.gnupg.org/docs.html</ulink>.
</para>


<indexterm><primary>GPG</primary><secondary>Pine</secondary></indexterm>
<indexterm><primary>GnuPG</primary><secondary>Pine</secondary></indexterm>
<indexterm><primary>Pine</primary><secondary>GnuPG</secondary></indexterm>
<para>
Skal du benytte pine sammen med GPG, så læs <ulink url="http://www.linuxsecurity.com/feature_stories/feature_story-83.html">http://www.linuxsecurity.com/feature_stories/feature_story-83.html</ulink>. Vær opmærksom på om <command>pinegpg-install</command> rent faktisk indsætter
de rigtige linier i <filename>~/.pinerc</filename> - i forhold til 
hvor dine GPG-programmer ligger. Måske skal man editere <filename>/bin/filnavn</filename> til
<filename>/usr/bin/filnavn</filename>.
</para>

</sect2>



<sect2 id="exchangemail">
<title>Hent e-post fra en Exchange-server</title>
<indexterm><primary>Exchange</primary></indexterm>
<para>
Microsoft har været så venlige at lave en nyere type e-post-server, MS
Exchange, som uheldigvis ikke er dokumenteret for godt. Heldigvis kan
man bruge serveren fra f.eks. Netscapes e-post-funktion. I Netscape skal
du under "preferences"->"mail" angive at du henter e-breve fra en "IMAP"
server - ikke POP - og sætte serveren til at være exchange-serveren.
Det er ikke den fulde funktionalitet, du får, men det kan
bruges. 
</para>
</sect2>


<sect2 id="outlookkonvertering">
<title>Konvertering fra Outlook til Linux-e-post</title>
<indexterm><primary>Outlook epost konvertering</primary></indexterm>
<para>
En metode til at give Linux-brugeren adgang til e-post som ligger i
Outlook koblet til en Exchange-server er følgende. Det kræver dog en
Exchange-server med imap-understøttelse:
</para>

<itemizedlist mark="bullet">
<listitem>
 <para>
  (I Windows) kopiér indholdet af Outlook-folder (.pst filen) over på
  Exchange-serveren.
 </para>
</listitem>
<listitem> 
 <para>
opret en ny IMAP mail-server i Netscape og konfigurér den til at bruge
din Exchange-server. Check: Indholdet af Outlook-folderen burde nu være
tilgængelig fra Netscape Messenger.
 </para>
</listitem>
<listitem> 
 <para>
kopiér foldere fra Exchange-serveren til local mail.
 </para>
</listitem>
</itemizedlist>


<para>
En anden måde er at benytte KDEs program <command>kmailcvt</command>, som
kan oversætte dine gamle Outlook 4 og 5 postbokse til Unix-postfiler. Efter
sigende skulle dette være uden problemer, dog kan adressebøger stadig give
problemer.
</para>

<sect3 id="micropop">
<title>Outlook Express til mbox konvertering</title>

<para>
En tredie metode, er at konvertere din *.pst-fil til *.mbx (eller
*.dbx) format, som Outlook Express bruger. Derefter bruges
<command>oe2mbx</command> til at konvertere til mbox-format, der kan
læses af de fleste post-programmer på Linux-boksen. Du skal hente
Linux-versionen af oe2mbx på adressen: <ulink
url="http://ftp.sslug.dk/oe2mbx-1.21.tar.gz">http://ftp.sslug.dk/oe2mbx-1.21.tar.gz</ulink>.
Den officielle side (<ulink
url="http://www.micropop.com/code/">http://www.micropop.com/code/</ulink>)
er umiddelbart lukket, men prøv at søge på <ulink
url="http://www.google.com">http://google.com</ulink>.
</para>

<para>
Det skal lige siges, at under konvertering fra MS Exchange til MS
Outlook Express mister man alle "mail headers", dvs. at information om
hvordan e-posten kom til din maskine går tabt. Dette kan være en
Exchange-bug, eller der kan være overset en konfigurationsmulighed.
</para>

<para>
Før vi går i gang, så afsæt tiden til dette projekt - det tager mange
timer at komme igennem. Det kan også anbefales at have ca. 3 gange så
meget ledig diskplads som den post-mængde man har i Outlook Express.
</para>

<para>
<emphasis>Fra Exchange til Outlook Express.</emphasis>
</para>


<para>
Konvertering fra Exchange kræver at du går via MS Outlook
Express. Hvis du ikke bruger Exchange kan du hoppe dette skridt over.
Du kan importere din post direkte fra Exchange til Outlook Express via
en Wizard. Start Outlook Express, vælg "File"->"Import"->
"Microsoft Exchange". Derefter vælger du Profil og siger Næste -
venter - OK.
</para>

<para>
Hvis du har lavet en <filename>.pst</filename>-fil i Exchange til
offline-læsning kan du skabe en ny profil, når du kommer til det punkt.
Du skal så vælge manuel opsætning og tilføj <filename>*.pst</filename>
fil. (Dette kan gøres uden kontakt til Exchange-serveren).
Resten er som beskrevet ovenfor.
</para>

<para>
<emphasis>Fra Outlook Express til Linux mbox</emphasis>
</para>

<para>
<emphasis>Windows:</emphasis>
Læg <command>oe2mbx.exe</command> i roden (c:\) og kopiér eller flyt alle <filename>*.dbx</filename>-filer
til mappen <filename>c:\mail</filename>.
Åben en MS-DOS-prompt og skriv: <command>c:\oe2mbx c:\mail*.dbx</command>.
Voila, du har nu én eller flere mbox-filer, klar til at kopieres
over på din Linux-maskine.
</para>

<para>
<emphasis>Linux:</emphasis>
Start med at kopiere alle <filename>.dbx</filename>-filer til
<filename>$HOME/mail/</filename>.
</para>

<screen>
<prompt>[anne@linus ~]$ </prompt><userinput>tar xzvf oe2mbx-1.21.tar.gz</userinput>
...
<prompt>[anne@linus ~]$ </prompt><userinput>cd oe2mbx-1.21</userinput>
<prompt>[anne@linus ~/oe2mbx-1.21]$ </prompt><userinput>make</userinput>
...
<prompt>[anne@linus ~/oe2mbx-1.21]$ </prompt><userinput>./bin/oe2mbx ~/mail/*.dbx</userinput>
</screen>

<para>
<emphasis>Fra mbox til maildir (qmail)</emphasis>
Hvis du bruger qmail og maildir kan du til slut hente et program (perl-script)
som hedder <command>mbox2maildir</command> fra
<ulink url="http://www.qmail.org/mbox2maildir">http://www.qmail.org/mbox2maildir</ulink>.
</para>

<para>
Tak til: "Outlook -> Netscape"-tråden på sslug-teknik den 21. dec. 2000.
Se:     <ulink url="http://www.sslug.dk/emailarkiv/teknik/2000_12/msg00776.html">http://www.sslug.dk/emailarkiv/teknik/2000_12/msg00776.html</ulink> og
<ulink url="http://www.sslug.dk/emailarkiv/teknik/2000_12/msg00779.html">http://www.sslug.dk/emailarkiv/teknik/2000_12/msg00779.html</ulink>.
</para>
</sect3>
</sect2>
</sect1>


<sect1 id="sikkerhed">
<title>Internet-sikkerhed</title>
<indexterm><primary>Sikkerhed</primary></indexterm>
<indexterm><primary>Netværkssikkerhed</primary></indexterm>
<para>
Da man designede internettet for mange år siden, fandtes crackere ikke,
og man havde ikke fantasi til at forestille sig nutidens avancerede
internet-kriminalitet. Fakta er, at det meste internet-kommunikation
sendes i klar tekst - inklusiv login-navne og tilhørende adgangskoder.
Derfor skal man passe på, hvis man skal lave login på Linux-maskinen
fra et fjernt sted i verden via internettet. Der er sikre systemer med
stor fleksibilitet, som ikke transmitterer adgangskoder i klar tekst. Den
bedste implementering er "Secure Shell" (ssh). 
</para>

<para>
Emnet er meget vanskeligt, idet de kriminelle ofte ved uhyre meget om
netværk og sikkerhedsfejl. Der er dog et par generelle kommentarer,
som bør følges nøje, hvis din maskine skal stå på et usikkert netværk.
</para>

<itemizedlist mark="bullet" spacing="compact">

<listitem>
<para>Følg med i, hvilke programmer der kommer med opdateringer. Se
f.eks. <ulink url="http://www.cert.dk">http://www.cert.dk</ulink>.
</para>
</listitem>

<listitem>
<para>Luk af for programmer, du ikke bruger. Bliver det kendt, at der
er en sikkerhedsbrist i bare ét af de kørende programmer, kan du
rammes. I store træk, så indsæt <literal>disable = yes</literal> i
samtlige filer i <filename>/etc/xinetd.d/</filename> og kør:
</para>

<screen>
<prompt>[anne@linus ~]#  </prompt><userinput>su -</userinput>
<prompt>[root@linus /root]#  </prompt><userinput>killall -HUP xinetd</userinput>
<prompt>[root@linus /root]#  </prompt><userinput>/etc/rc.d/init.d/portmap stop</userinput>
<prompt>[root@linus /root]#  </prompt><userinput>/sbin/chkconfig --level 2345 portmap off</userinput>
</screen>

<para>
Med "portmap" stoppet (og ikke startet sidenhen) får du ikke ubrugte 
stand-alone dæmoner, der kan ramme dig sidenhen.
Åbn kun for services som du ved du skal bruge.
Lad være med at køre en web-server eller X-server, hvis du ikke
bruger det.
</para>
</listitem>

<listitem>
<para>Installér overvågningssystemer (såsom Tripwire og LogWatch).
</para>
</listitem>

<listitem>
<para>Installér Secure Shell eller OpenSSH (Se 
<ulink url="http://www.openssh.com">http://www.openssh.com</ulink>), og lad
dette erstatte <command>telnet</command> og <command>ftp</command>.
</para>
</listitem>

<listitem>
<para>
Installér og konfigurér en brandmur (eng. firewall) (ipchains).
Det er en del af Linux-kernen og dermed gratis. Der er gode
HOWTO-dokumenter om dette.
</para>
</listitem>

<listitem>
<para>Lær mere om netværk og Linux, og brug dit system med omtanke!
</para>
</listitem>

</itemizedlist>

<para>
Listen ser dramatisk ud og er ikke så relevant for dem, som lige logger på
internettet via modem for at checke epost og surfe lidt. For dem, som
vil lave missionskritiske forretningssystemer på internettet, er
det <emphasis>ekstremt</emphasis> relevant. 
Du kan læse meget mere i bogen "Linux - Friheden
til sikkerhed på internettet", der findes på 
<ulink
url="http://www.sslug.dk/linuxbog">http://www.sslug.dk/linuxbog</ulink>.
</para>

<para>
Tilsvarende bør du læse <ulink url="http://www.sslug.dk/sikkerhed">http://www.sslug.dk/sikkerhed</ulink>.
</para>

<para>
Det kan anbefales at købe en god bog om netværkssikkerhed, såsom:
</para>

<itemizedlist mark="bullet" spacing="compact">
<listitem><para>
Simon Garfinkel and Gene Spafford: <emphasis>Practical Unix &amp;
Internet Security</emphasis>,
O'Reilly &amp; Associates, Inc., ISBN 1-56592-148-8, 971 sider.
</para>
</listitem>
</itemizedlist>


</sect1>

<sect1 id="nem-firewall">
<title>Nem brandmur med Red Hat</title>
<para>
 Er din maskine på internettet i lang tid ad gangen, så bør du have en brandmur
 på din maskine. Vil du vide mere, så læs "Linux - Friheden til sikkerhed på
 internettet".
</para>

<para>
I Red Hat (7.0 og senere) er der et godt program med til at sætte en
brandmur op.  Der er ingen garanti for at alt bliver sikkert bagefter,
men modsat, så er det et glimrende udgangspunkt. Program-pakken hedder
<filename>gnome-lokkit*.rpm</filename>. Du skal som root køre
<command>/usr/sbin/gnome-lokkit</command> for at sætte brandmuren op eller 
<command>lokkit</command> hvis det skal være i tekst-mode.
Vælg "høj sikkerhed". Dernæst om hvilke
maskiner man skal tillade lav sikkerhed overfor (evt. til internt
netværk). Du spørges om følgende skal tillades: DHCP (vælg ofte nej),
ekstern adgang til egen webserver (normalt nej), indgående e-post (ofte
nej), ssh (ofte nej), telnet (altid nej). Dernæst laver programmet
hele brandmuropsætningen og den aktiveres automatisk ved næste
systemopstart. Du kan også selv genstarte brandmuren ved at køre
<command>/etc/init.d/ipchains restart</command>.
</para>


<figure id="gnome-lokkit-fig" float="1">
<title>Firewall med gnome-lokkit</title>
<graphic fileref="gnome-lokkit.&magic;" scale="40"></graphic>
</figure>

</sect1>

<sect1 id="news-reader">
<title>News</title>
<indexterm><primary>News</primary></indexterm>
<indexterm><primary>Nyhedsgrupper</primary></indexterm>

<para>
At læse nyhedsgrupper (news groups) på internettet er meget anvendeligt.
Mange anvender f.eks. Netscape til dette, men der er alternativer,
såsom <command>pine</command> og <command>slrn</command>.
</para>

<sect2 id="pan">
<indexterm><primary>pan</primary></indexterm>
<indexterm><primary>News</primary><secondary>pan</secondary></indexterm>
<title>Pan</title>
<para>
Programmet <command>pan</command> er nok noget af det nemmeste, man
kan få til at læse nyhedsgrupper. Pan er en GTK-baseret nyhedslæser
til Gnome. Når du starter Pan føste gang skal du lige indtaste
relevant information om dig selv (på dansk) i grafiske menuer - det er
meget let at komme igennem hvis du har styr på hvilken news-server du
skal tilgå. Du kan anvende 
<ulink url="news:news.sslug.dk">news:news.sslug.dk</ulink> for at tilgå
SSLUG-nyhedsgrupperne.
</para>

<figure id="pan-fig" float="1">
<title>Pan læser nyhedsgrupper</title>
<graphic fileref="pan.&magic;" scale="40"></graphic>
</figure>

</sect2>

<sect2 id="knode">
 <title>knode</title>

 <indexterm><primary>pan</primary></indexterm>
 <indexterm><primary>News</primary><secondary>pan</secondary></indexterm>

 <para>
  Programmet <command>knode</command> er KDEs svar på PAN. 
  Det er også en glimrende grafisk måde at læse nyhedsgrupper
  på.
 </para>

<figure id="knod-fig" float="1">
<title>Knode læser nyhedsgrupper</title>
<graphic fileref="knode.&magic;" scale="40"></graphic>
</figure>

</sect2>

<sect2 id="slrn">
<title>Newsreaderen slrn</title>
<indexterm><primary>News</primary><secondary>slrn</secondary></indexterm>
<indexterm><primary>slrn</primary></indexterm>

<para>
Der er mange forskellige newsreadere. Én af dem er
<command>slrn</command> og den kommer med så godt som alle
Linux-distributioner. Den startes ved at skrive
<command>slrn</command> på kommandolinien og er en ikke-grafisk
newsreader, men det gør den nu ikke dårligere, snarere tværtimod. Den
er nemlig lynhurtig.
</para>

<sect3 id="slrn-config">
<title>Opsætning af slrn</title>

<para>
For at <command>slrn</command> kan starte skal den vide hvilken
NNTP-server den skal læse fra. Environment-variablen NNTPSERVER
bestemmer hvilken server slrn læser fra; i dette eksempel egen
maskine:
</para>

<screen>
<prompt>[anne@linus ~]$ </prompt><userinput>export NNTPSERVER=localhost</userinput>
</screen>

<para>
Til start skal <command>slrn</command> bruge en scorefil. Den laves med:
</para>

<screen>
<prompt>[anne@linus ~]$ </prompt><userinput>touch News/Score</userinput>
</screen>


<para>
hvorefter <command>slrn</command> startes første gang:
</para>

<screen>
<prompt>[anne@linus ~]$ </prompt><userinput>slrn -create</userinput>
</screen>

<para>
Det første indtryk af <command>slrn</command> er at det er et uindbydende 
nyheds-læseprogram, med grupper strøet efter forgodtbefindende.
</para>

<figure id="slrn1-fig" float="1">
<title>slrn newsreader
</title>
<graphic fileref="slrn1.&magic;" scale="60"></graphic>
</figure>

<para>
Fortvivl ikke! <command>slrn</command>'s display styres med konfigurationsfilen
<filename>~/.slrnrc</filename>. En god konfigurationsfil (som kan
hentes under <filename>eksempler</filename> på 
<ulink
url="http://www.sslug.dk/linuxbog/">http://www.sslug.dk/linuxbog/</ulink>)
kan se således ud:
</para>

<programlisting>
% Konfigurationsfil til slrn - gemmes i <filename>~/.slrnrc</filename>
% sørger for at poste med rigtig e-post-adresse. 
% Username og hostname bliver sat sammen til afsender adressse.

set username "anne"
set hostname "sslug.dk"
set realname "Anne S. Slug"

% replies skal også se ordentligt ud.

set quote_string "&gt; "

% Headers to show when viewing an articles.  This is a comma-separated
% list of strings that specify what headers to show.  Note that these
% strings are not regular expressions.  However, one may use, e.g.,
% "X-" to match any header beginning with "X-".  Similarly, "F" will
% match "From:" and "Followup".

visible_headers "From:,Subject:,Followup-To:,Reply-To:,Date:"


% Sortering
set sorting_method 9
set new_subject_breaks_threads 0

%Definere "gode" farver.

color article           "blue"          "white"
color author            "magenta"       "white"
color boldtext          "brightblue"    "white"
color box               "black"         "white"
color cursor            "brightgreen"   "black"
color description       "brightmagenta" "white"
color error             "red"           "white"
color frame             "yellow"        "blue"
color group             "blue"          "white"
color grouplens_display "blue"          "white"
color header_name       "green"         "white"
color header_number     "green"         "white"
color headers           "blue"          "white"
color high_score        "red"           "black"
color italicstext       "magenta"       "white"
color menu              "yellow"        "blue"
color menu_press        "blue"          "yellow"
color normal            "blue"          "white"
color pgpsignature      "blue"          "white"
color quotes            "red"           "white"
color quotes1           "magenta"       "white"
color quotes2           "magenta"       "white"
color quotes3           "magenta"       "white"
color quotes4           "magenta"       "white"
color quotes5           "magenta"       "white"
color quotes6           "magenta"       "white"
color quotes7           "magenta"       "white"
color response_char     "green"         "white"
color signature         "red"           "white"
color selection         "yellow"        "blue"
color status            "yellow"        "blue"
color subject           "red"           "white"
color thread_number     "blue"          "white"
color tilde             "green"         "white"
color tree              "red"           "white"
color underlinetext     "cyan"          "white"
color verbatum          "green"         "white"

% Mime support
%------------------------------------------------
set use_mime 1
% set mime_charset "iso-8859-1"
% If non-zero, call metamail for mime formats 
% that slrn does not handle
set use_metamail 1

% En sidste ting der kunne være interessant er:
editor_command    "jed %s -g %d -tmp"
% Denne sætter slrn til at bruge jed som editor i 
% stedet for default (vi). Her putter man så bare 
% sin favorit editor ind i stedet for.
</programlisting>

<para>
Filen kan findes under eksempler på bogens hjemmeside 
<ulink url="http://www.sslug.dk/linuxbog/">http://www.sslug.dk/linuxbog/</ulink>.
</para>

<para>
Alle disse parametre er fint beskrevet i <command>man
slrn</command>. 
Men det mest interessante er resultatet af dette:
</para>

<figure id="slrn2-fig" float="1">
<title>slrn newsreader efter konfiguration
</title>
<graphic fileref="slrn2.&magic;" scale="60"></graphic>
</figure>

<para>
Lidt mere brugervenlig. Derefter afmeldes de grupper man ikke
ønsker at vise. Dette sker ved at trykke <command>"u"</command> og afslutte med
<command>"g"</command>. Så giver man sig til at tilmelde
grupper. Dette sker ved <command>"a" + gruppens navn</command>,
men da man ikke lige kender det altid, ville det være skønnere med en
liste. Det gøres med <command>"L" + sslug*</command> og så trykkes
der bare <command>"s"</command> ud for de grupper man ønsker at
abonnere på. Når man så læser et indlæg, så farver slrn efter den formatering
der er markeret for i ASCII-teksten.
</para>

<figure id="slrn3-fig" float="1">
<title>Nyhedslæseren slrn
</title>
<graphic fileref="slrn3.&magic;" scale="60"></graphic>
</figure>

<para>
Ydermere er alle basis-kommandoerne lagt på "?", så de er lige ved
hånden hvis der er noget man ikke lige kan få slrn til. Derudover, så
god fornøjelse med slrn.
</para>
</sect3>
</sect2>
</sect1>

<sect1 id="FAX">
<title>FAX under Linux</title>
<indexterm><primary>FAX</primary></indexterm>
<para>
Der findes en del programmer til at sende og modtage FAX under Linux. Se
mere på <ulink 
url="http://www.ibiblio.org/pub/Linux/apps/serialcomm/fax/">org/pub/Linux/apps/serialcomm/fax/</ulink>.
</para>
</sect1>


<sect1 id="netbooks">
<title>Bøger om netværk</title>
<indexterm><primary>Netværk</primary><secondary>Bøger om</secondary></indexterm>

<para>
Netværk er et stort og kompliceret emne, som det ikke er muligt at dække på
andet end den mest nødtørftige måde på den plads, der er brugt her. Hvis du
har lyst til at lære mere, kan nedenstående bøger anbefales.
</para>

<para>
<itemizedlist mark="bullet" spacing="compact">

<listitem><para>
Olaf Kirch: <emphasis>Linux Network Administrator's Guide</emphasis>,
O'Reilly &amp; Associates, Inc., ISBN 1-56592-087-2, 335 sider.
</para>

<para>
Dette er en indføring og praktisk vejledning i TCP/IP, UUCP, DNS, PPP,
mail, news osv., altså stort set alt, hvad der har at gøre med at
køre netværk under Linux. Det forudsættes, at man er i stand til at
redigere en tekstfil og generelt "komme omkring" i systemet.
</para>

<para>
Da bogen oprindeligt er udsprunget af The Linux Documentation Project, kan
den hentes frit på internettet, f.eks. på
<ulink
url="ftp://metalab.unc.edu/pub/Linux/docs/LDP/network-guide">ftp://metalab.unc.edu/pub/Linux/docs/LDP/network-guide</ulink>.
Ganske ofte er filen på Linux-cd-rom'erne.
     </para>
    </listitem>

    <listitem>
     <para>
      Craig Hunt: <emphasis>TCP/IP Network Administration</emphasis>,
      O'Reilly &amp; Associates, Inc., ISBN: 0-937175-82-X, 472 sider.
     </para>

     <para>
      Denne bog handler om TCP/IP under Unix generelt i modsætning til
      Linux Network Administrator's Guide og går nok også lidt mere i dybden med
      tingene.
     </para>
    </listitem>

    <listitem>
     <para>
      Stig Jensen og Arne Gjelstrup: <emphasis>Datakommunikation</emphasis>,
      Teknisk Forlag, ISBN 87-571-1956-2, 872 sider.
     </para>

     <para>
      Hvis du vil have en endnu dybere og mere teknisk betonet viden om netværk
      generelt, er denne bog et glimrende valg og fungerer godt både som lærebog
      og opslagsværk.
     </para>

     <para>
      Det kan i øvrigt være interessant at følge 
      <ulink url="http://users.dhp.com/~whisper/mason/">http://users.dhp.com/~whisper/mason/</ulink> og 
      <ulink url="http://www.opensource.firewall.com/">http://www.opensource.firewall.com/</ulink>.
     </para>
    </listitem>
   </itemizedlist>
  </para>
 </sect1>
</chapter>
