<chapter id="distro-freebsd">
<title>Om FreeBSD</title>
<para>
FreeBSD kernen er et helt andet projekt end Linux kernen. FreeBSD laves
af en gruppe frivilige, der styres af et demokratisk valgt "core team". 
</para>

<para>
De 3 BSD'er FreeBSD, OpenBSD og NetBSD er UNIX-lignende Open Source
systemer, ligesom Linux. Men hvor Linux er skrevet fra bunden, og således
aldrig har rummet kode fra det originale UNIX system, er de 3 BSD'er
baseret på Berkely universitetes BSD UNIX. FreeBSD er således ikke "en
slags Linux". Men forskellen på at bruge Linux og FreeBSD er i praksis
ikke så stor. FreeBSD projektet har hjemme på <ulink url="http://www.freebsd.org">http://www.freebsd.org</ulink>.
</para>

<sect1 id="distro-freebsd-maalgruppe">
<title>Hvem er målgruppen for FreeBSD</title>
<para>
Folk som er mere til kedelige servere end til sjov og ballade. Folk med
driftsstabilitet i højsædet, og som ikke er bange for teknik. Eller folk
som synes at Linux er blevet for nemt:-) FreeBSD kan også godt bruges
som desktop system, men det er ikke den primære målgruppe.
</para>


<figure id="distro-freebsd-figname" float="1">
<title>FreeBSD logo</title>
<graphic fileref="dae_up3.&magic;" scale="60"></graphic>
</figure>


</sect1>

<sect1 id="distro-freebsd-installation">
<title>Installation</title>
<para>
FreeBSD kan installeres fra CD/DVD, eller fra netværk.
CD'er kan købes på <ulink
url="http://www.bsdmall.com/">http://www.bsdmall.com/</ulink> , eller
iso images kan downloades fra
<ulink
url="ftp://ftp.freebsd.org/pub/FreeBSD/releases/i386/ISO-IMAGES/">ftp://ftp.freebsd.org/pub/FreeBSD/releases/i386/ISO-IMAGES/</a>.

FreeBSD findes også til andre platforme end i386, f.eks. alpha og sparc.
</para>

<sect2 id="distro-freebsd-version">
<title>Hvilken version skal man vælge?</title>
<para>
I øjeblikket hedder den stabile gren af FreeBSD 4.x - i skrivende stund
er 4.9-RELEASE den nyeste. Skal man køre en produktionsserver og vil
drage forde l af FreeBSD's store driftsstabilitet, er det denne version
man bør vælge.
</para>

<para>
Skal man "bare" lege med desktop eller har man brug for nye features,
der ikke er med i stable, kan man vælge "current", som pt. hedder 5.1.
Skal man forsøge sig som FreeBSD udvikler kører man naturligvis den
nyeste.
</para>

</sect2>

<sect2 id="distro-freebsd-netinst">
<title>Installation via netværk</title>

<para>
Download de to floppy images kern.flp og mfsroot.flp fra
<ulink url="ftp://ftp.freebsd.org/pub/FreeBSD/releases/i386/4.9-RELEASE/floppies/">"ftp://ftp.freebsd.org/pub/FreeBSD/releases/i386/4.9-RELEASE/floppies/</ulink> og læg dem på disketter.
Der bootes fra kern.flp. Disketten med mfsroot.flp sættes i, når
systemet spørger efter den. 
</para>

<para>
Noget af det første man bliver bedt om, er at konfigurere kernen, dvs.
vaelge nogle ekstra drivere. Dette er relevant hvis man har noget
speciel hardware. Jeg ved ikke helt hvor specielt det skal være - min
gamle test-PC virkede fint med standard-kernen.
</para>

<para>
FreeBSD bruger et andet partitioneringssystem end Linux. FreeBSD kan
bruge hele disken med sit eget partitioneringssystem, eller den kan
installere sine partitioner inde i en almindelig partition. For at undgå
forvirring kaldes de "almindelige" partitioner for "slices" på FreeBSD. Se 
<ulink url="http://www.freebsd.org/doc/en_US.ISO8859-1/books/handbook/disks.html">http://www.freebsd.org/doc/en_US.ISO8859-1/books/handbook/disks.html</ulink>
</para>

<para>
Når man skal partitionere under installationen, skal man først vaelge
om man vil bruge hele disken eller kun en del af den. Så vælges
bootloader, og derefter laves "FreeBSD partitioner" inde i den partition
(disk slice) man lavede før. Følg instruktionerne på skærmen. Det
nemmeste er at bede FreeBSD om automatisk at lave passende partitioner
(følg instruktionerne på skærmen).
</para>

<para>
Efter partitionering og valg af bootloader skal man vælge
installationstype - sjovt nok kan man ikke vælge server. Der er
forskellige udgaver af Developer og User, samt All, Minimal og Custom.

Derefter vælges installationsmetode (f.eks. passive ftp), mirror mv. Der
er to danske mirrors, bare bladr nedad i listen til du finder dem.
</para>

<para>
Selve installationen af FreeBSD basesystemet tager ikke særlig lang tid,
da det ikke indeholder særlig meget. Næsten alle programmerne ligger i
"port collection", selv "bash". I brugervenlighed kan installationen
sammenlignes med Red Hat 4.2. En del sværere end Red Hat / Mandrake nu
om dage, men til gengæld ikke nær så svær som Debian.

Man kan installere Linux Compat modulet så FreeBSD kan køre binære Linux
programmer.

</para>

<sect2 id="distro-freebsd-ports">
<title>Ports Collection</title>
<para>
Når selve FreeBSD installationen er overstået bliver man spurgt hvilke
pakker fra ports collection man vil have. Der er mange! Alle mine små
yndlingsprogrammer er at finde. Mange spil. Husk at installere dit
shell, f.eks. bash, og din yndlings-editor. 
</para>

<para>
Er det første gang du installerer FreeBSD, så lad være med at bruge
en time på at bladre igennem alle pakkerne og vælge de helt rigtige -
sommetider fejler installationen før den når at installlere dem, og
så er det surt. Vælg hellere nogle få vigtige pakker, så går
installationen også meget hurtigere. Pakker kan let installeres
bagefter med pgk_add programmet.
</para>
</sect2>

<sect2 id="distro-freebsd-xfree">
<title>X-konfiguration</title>
<para>
Efter installation af ports får man tilbud om at konfigurere X i et
grafisk interface. Hvis installationen dør før dette punkt, kan man
selv starte X-konfigurationsprogrammet når man har bootet sin nye
FreeBSD installation.
Xconfiguration foretages enten med programmet xf86config (tekstbaseret)
eller med xf86cfg, som er grafisk. Hvis musen ikke virker i konsollen og
under xf86cfg, så prøv at sætte linien moused_enable="YES" ind i filen
/etc/rc.conf, og genstarte maskinen.
</para>
</sect2>

<sect2 id="distro-freebsd-probs">
<title>Problemer</title>
<para>
Da min installation nåede til at partitionere disken gik den i kernel
panic.  Efter en reboot, med samme valg som første gang, gik det godt,
så måske skulle den lige skrive partitionstabellen først.
</para>
<para>
Jeg har tidligere oplevet problemer med at installere FreeBSD på
partitioner der starter over cylinder 1024.
Er det første gang du prøver FreeBSD kan det anbefales at prøve på en
maskine der ikke skal lave andet, så FreeBSD kan få starten af disken
(og hele disken), så disse problemer undgås, og partitioneringen er
nemmere.</para>
<para>
Jeg har også oplevet problemer med en nyere ide controller.  Hvis din
FreeBSD installation bliver ved med at gå i kernel panic, så prøv en
nyere version af FreeBSD eller led efter smarte kernel boot-options der
kan løse problemet. Check dog først at det ikke bare er boot floppien
der er defekt.
</para>
</sect2>


</sect1>

<sect1 id="distro-freebsd-brug">
<title>Brugen af FreeBSD</title>
<para>
Som bruger vil man, når man har X oppe og køre med sin normale Window
Manager, ikke mærke meget forskel på Linux og FreeBSD. 
Som systemadministrator er der en del forskel.

<para>
FreeBSD bruger af gode grunde ikke sysvinit (FreeBSD er et BSD system i
modsætning til SystemV UNIX). Sysvinit er de fine runlevel
scripts der under Linux bliver kørt ved start. F.eks. vil Linux ved
normal start i grafisk login (runlevel 5) køre de scripts der ligger
under /etc/rc5.d. Under FreeBSD finder man i stedet konfigurationen
under /etc/rc.conf og, hvad softwarepakker angår, under /usr/local/etc.
</para>

<para>
FreeBSD er meget konservative med hvad de lægger ind i systemet. Der er
ikke ret mange programmer med som udgangspunkt, det meste skal man selv
vælge fra ports-collection. Som mail-server program bruger de sendmail.
Ftp serveren er XXX. Det er naturligvis muligt at installere
alternativer fra ports-collection.
</para>

<para>
Jeg har ikke opdaget ret mange FreeBSD konfigurationsværktøjer. Det kan
godt være at de er der. Som nævnt tidligere er der et fint grafisk
x-konfigurationsprogram, og det er også muligt at gen-aktivere
ports-collection installationsværktøjet der blev kørt under
installationen (det hedder XXXX). Ellers retter man bare selv i sine
konfigurationsfiler.
</para>

<sect2 id="distro-freebsd-forskel">
<title>Andre forskelle på Linux og FreeBSD</title>
<para>
FreeBSD benytter ikke ext2/ext3. Filsystemet på FreeBSD hedder [UFS????] 
FreeBSD 5 benytter noget, de kalder snapshots til hurtigt at få systemet
op igen efter uregelementeret nedlukning. Under boot tages et snapshot
af filsystemet, som derefter får lov at starte normalt op. Så køres fsck
på snapshottet, mens systemet kører.
</para>

<para>
FreeBSD bruger ikke /proc filsystemet som Linux gør. Direkte adgang
til kernen opnår i stedet med sysctl kald.
</para>
</sect2>

</sect1>

<sect1 id="distro-freebsd-pakker">
<title>Installation af ekstra programmel</title>
<para>
Installere en ny pakke:
</para>
<screen>
pkg_add -r pakkenavn
</screen>
<para>
Med denne kommando kan man også opgradere en pakke der allerede er
installeret, hvis der findes en nyere version til den FreeBSD version
man kører. Man kan søge efter pakker der er til rådighed på <ulink
url="http://freebsd.org/ports">http://freebsd.org/ports</ulink>. Jeg har
ikke fundet en måde man kan søge på kommandolinien, som f.eks. debians
apt-cache search.
</para>

<para>
Man kan se info om installerede pakker med pkg_info, f.eks.
pkg_info -a (se alle installerede pakker)
pkg_info postfix-2.0.15,1 (se info om postfix)
pkg_info -W /usr/local/sbin/postfix (hvilken pakke hører filen til)
</para>

<sect2 id="distro-freebsd-update">
<title>Sikkerhedsupdateringer med freebsd-update</title>
<para>
Det er muligt at installere alle sikkerhedsopdateringer til FreeBSD på en
rimelig nem måde med programmet freebsd-update, hvis man kører en
standard stable version 4.7-RELEASE, 4.8-RELEASE eller 4.9-RELEASE.
<screen>
pkg_add -r freebsd-update
cp /usr/local/etc/freebsd-update.conf.sample /usr/local/etc/freebsd-update.conf
/usr/local/sbin/freebsd-update fetch
/usr/local/sbin/freebsd-update install
</screen>
For mere information: "man freebsd-update" eller <ulink
url="http://www.daemonology.net/freebsd-update/">http://www.daemonology.net/freebsd-update/</ulink>.
</para>
</sect2>

<sect2 id="distro-freebsd-cvsup">
<title>Opgradering af FreeBSD med cvsup</title>
<para>
Skal man opgradere hele FreeBSD, og ikke kun binære sikkerhedsrettelser
til de nævnte stable-versioner, er man nødt til at opgradere på den hårde måde.

Det kan ikke anbefales begynderen at forsøge dette, uden at have læst
manualen grundigt først. Man kan nemt komme til at lave sit system så
det ikke kan boote.

Ideen er at man henter source-koden til systemet såvel som
ports-collection ned på sin maskine ved hjælp af cvsup programmet.
Derefter kompilerer man det hele lokalt. FreeBSD er lavet så det er
"nemt", det er ret få kommandoer der skal til, så klarer den resten af
arbejdet selv. Men man skal helst vide hvad man gør, det lykkedes i
hvert fald mig at smadre både et stable og et unstable system så de ikke
kunne boote bagefter ;) Så gav jeg op, og skrev denne billige forklaring
i stedet for. Instruktioner kan findes i FreeBSD Handbook:
<ulink="http://www.freebsd.org/doc/en_US.ISO8859-1/books/handbook/">http://www.freebsd.org/doc/en_US.ISO8859-1/books/handbook/</ulink>.

</para>
</sect2>
</sect1>


<sect1 id="distro-freebsd-killer">
<title>Killer-feature</title>
<para>
FreeBSD's killer feature er nok driftsstabilitet. Filosofien er
"principle of least astonishment", dvs. "princippet om mindst mulig
overraskelse". Dvs. at tingene skal virke som folk forventer, der skal
ikke laves om medmindre der er en grund til det. Systemet er optimeret
til driftsstabilitet også under pres, frem for at være hurtigt ude med
fine nye features, og man kan stadig køre meget gamle versioner af
FreeBSD. 
</para>

<para>
Det kræver dog "sin mand" at installere og drive en FreeBSD server, og
der er reelt mange forskelle fra Linux når man kommer lidt ned i det.
Det kan ikke anbefales en Linux-mand sætte en FreeBSD server i drift
uden at have leget en del med det i forvejen og lært det at kende.
</para>

</sect1>


<sect1 id="distro-freebsd-vurdering">
<title>Samlet vurdering af FreeBSD</title>
<para>
Kun en tåbe frygter ikke make world ;)
</para>
<para>
FreeBSD er rimelig nemt at komme i gang med, hvis man starter på en
frisk maskine, og bare vil lege lidt. Og er heldig at ens hardware er
understøttet. 
Det kan godt være lidt svært at komme videre med, men
heldigvis er der hjælp at finde på nettet, dels i FreeBSD Handbook 
<ulink url="http://www.freebsd.org/doc/en_US.ISO8859-1/books/handbook/">http://www.freebsd.org/doc/en_US.ISO8859-1/books/handbook/</ulink>
og
dels i den danske BSD-brugergruppe 
<ulink url="http://www.bsd-dk.dk/">http://www.bsd-dk.dk/</ulink>.
</para>

<para>
Hvis man har mod på at lære, er FreeBSD klart et spændende og nyttigt
system at sætte sig ind i. Det er beregnet til at kunne køre længe uden
at skulle rebootes og passes, og tolerere høj load uden at vælte.
</para>

</sect1>



</chapter>
