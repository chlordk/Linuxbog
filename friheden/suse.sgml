<!-- $Id$ -->
<chapter id="suse">
<title>SuSE 8.0 installation</title>

<!-- Skrevet af Erling Sjørlund og til dels Peter Toft -->

<indexterm><primary>SuSE</primary></indexterm>


<para>
SuSE Linux version 8.0 installeres og konfigureres ved hjælp af det
medfølgende systemværktøj, YaST2 (Yet another System Tool - version 2).
YaST2 overflødiggør i udstrakt grad nødvendigheden
af tidligere tiders nøjagtige kendskab til alle mulige
opsætningsværktøjer og -filer. Du slipper f.eks. for at skulle
anvende fdisk til at skabe partitionerne, idet YaST2 har et fornuftigt
brugerinterface til dette.
</para>

<para>
SuSE Linux 8.0 findes i to udgaver. En officiel "professional"
købeversion med 7 cd-rom'er og en DVD og en "personal" købeversion.
De to første købe-versioner indeholder over 1500 programpakker og en
trykt engelsksproget manual på ca. 500 sider. Dette gør SuSE til den
Linux-distribution, der har de fleste programmer og værktøjer med.
</para>

<para>
Der findes også en evaluation version på en cd-rom. Ordet "evaluation"
betyder i denne sammenhæng ikke noget med, at man kun må bruge den i
begrænset tid eller andet. En SuSE evaluation cd-rom svarer i omfang
og niveau til en meget reduceret Red Hat enkelt-cd-rom version.  I
praksis kan det kun anbefales at se på de to købe-versioner af SuSE
Linux - og de kan ikke downloades fra Internettet, men må købes f.eks.
fra <ulink url="http://www.suse.dk">http://www.suse.dk</ulink>.
</para>



<sect1 id="susehardware">
<title>Hardwarekrav til SuSE 8.0</title>
<para>
SuSE Linux stiller følgende krav til hardware:
</para>
<itemizedlist mark="bullet" spacing="compact">
<listitem>
 <para>
   En Intel 32 bit-kompatibel CPU (80386 eller senere). Der er
   efterhånden god understøttelse af andre mærker end Intel,
   f.eks. AMD.
 </para>
</listitem>
<listitem>
 <para>
   Mindst 8 Mb RAM, men 16 Mb eller derover anbefales.
 </para>
</listitem>
<listitem>
 <para>
   30 Mb fri diskplads, men vil du bruge det til noget reelt, bør du
   regne med 1.5 Gbyte. Det koster at installere alle de
   programmer, og 1.5 Gbyte - 2.5 Gbyte er ikke et dårligt udgangspunkt.
 </para>
</listitem>
</itemizedlist>
</sect1>


<sect1 ID="Generelt"><Title>Generelt om SuSE 8.0</title>
 <para>
 SuSE er med version 8.0 blevet endnu lettere at installere end
 tidligere. Du får en meget komplet samling velkonfigurerede
 programmer, og en installation, der langt hen ad vejen kører helt
 automatisk.
</para>

<figure ID="susestart" float="1">
 <title>Bootskærmen ved start fra CD</title>
 <graphic fileref="SuSE_80_1.&magic;" scale="60"></graphic>
</figure>

<para>
  Som det fremgår af skærmbilledet kan man bruge SuSE's CD 1 (eller
  den medfølgende DVD) både til installation, redningssystem og simpel
  start af et installeret system. Denne beskrivelse omhandler kun
  installationsdelen.
</para>

<figure ID="susestart1" float="1">
 <title>Sprogvalg</title>
 <graphic fileref="SuSE_80_2.&magic;" scale="60"></graphic>
</figure>

<para>
  Det første valg i installationen er hvilket sprog, der skal bruges
  undervejs. Hvor den danske udgave tidligere (i version 7.2) var
  skæmmet af en del uoversættelser og misdannelser, er version 8
  kommet meget fint med. Det kan derfor anbefales at vælge den danske
  udgave. Fejlmeldinger på engelsk kan dog stadig forekomme.
</para>

<figure ID="susestart2" float="1">
 <title>Enheder</title>
 <graphic fileref="SuSE_80_4.&magic;" scale="60"></graphic>
</figure>
 
<para>
  SuSE detekterer maskinens hardware. I mit tilfælde manglede den dog
  at finde en Mylex raid-controller, faktisk den der bærer de
  harddiske, der skal installeres på.  Løsningen på den slags
  problemer er at afbryde installationen, hvorefter den gamle
  tekstbaserede skærm dukker op.Denne giver adgang til at installere
  diverse drivere, herunder en der giver adgang til netop min
  controller.  
</para>

<figure ID="susestart3" float="1">
 <title>Installationen startes</title>
 <graphic fileref="SuSE_80_5.&magic;" scale="60"></graphic>
</figure>

<para>
  Når alle enheder er på plads får du en sidste advarsel om, 
  at installationen nu går i
  gang. Vælg "Ja, installer" og læn dig tilbage mens der arbejdes.
</para>
 
<para>
  Her kommer DVD udgaven til sin fulde ret. Du slipper for at sidde og skifte
  CD'er med lange mellemrum.
</para>

<figure ID="susestart4" float="1">
 <title>Partitionering</title>
 <graphic fileref="SuSE_80_8.&magic;" scale="60"></graphic>
</figure>
 
<para>
  Du får mulighed for at ændre på partitioneringen af harddisken, men
  har du ikke endog meget gode grunde til det, så lad være. SuSE
  vælger som standard at lægge en swap-partition ud som er tilpasset
  mængden af RAM i maskinen, hvorefter resten af disken bruges til
  /. Hvis du ved hvad du leger med, gives der adgang til at oprette
  både raid og LVM. Sidstnævnte er et system, som tillader en meget
  fleksibel brug af flere harddiske, en slags virtuel partitionering
  på tværs af diskene.Som standard foreslår SuSE 8.0 at formattere /
  med ReiserFS, og ikke som i billedet herover Ext3.
</para>

<figure ID="susestart5" float="1">
 <title>Installationstype</title>
 <graphic fileref="SuSE_80_10.&magic;" scale="60"></graphic>
</figure>
 
<para>
  Der skal naturligvis også vælges programmer.Her byder SuSE på fire
  forslag, men der gives også en adgang til mere detaljerede
  valg. Hvis det er en server du skal installere må du en tur ind over
  den del, mens en almindelig arbejdsplads fint kan klares med et af
  de fire standardvalg. Det skal bemærkes, at du senere kan installere
  programmer ganske let med Yast2, så risikoen ved blot at tage en
  standardløsning i første omgang er ikke stor.
</para>

<figure ID="susestart6" float="1">
 <title>Programvalg</title>
 <graphic fileref="SuSE_80_11.&magic;" scale="60"></graphic>
</figure>
 
<para>
  SuSE giver både en ny (den viste) og en gammel ("Vis pakkesæt")
  opdeling af programmerne.  Begge dele er egentlig lige
  uoverskuelige, men er du vant til SuSE kan det være en fordel at
  kunne få den traditionelle opdeling vist.  Hertil kommer en meget
  effektiv mulighed for at søge - noget man naturligvis først får
  glæde af, når man ved, hvad man skal søge efter.
</para>

<figure ID="susestart7" float="1">
 <title>Programvalg</title>
 <graphic fileref="SuSE_80_15.&magic;" scale="60"></graphic>
</figure>
 
<para>
  Herover er der først søgt efter "postfix", hvorefter pakken er
  blevet valgt. Dette udløser en advarsel om, at "Sendmail" (SuSE's
  standard postprogram) og "Postfix" ikke kan leve særligt godt
  sammen.Vil du alligevel installere, får du dels en liste hvor du kan
  bortvælge Sendmail eller Postfix, og en liste med programmer, der
  yderligere skal installeres for at få Postfix til at køre.
</para>
 
<para>
  Vælger du at slette en programpakke, kan der tilsvarende komme en
  advarsel om, at et eller flere andre programmer kræver netop denne
  pakke for at fungere. Her kunne man ønske sig en mulighed for på en
  gang at slette alle de afhængige programmer - en ide til næste
  udgave (hvis de skulle forstå dansk hos SuSE).
</para>

<figure ID="susestart8" float="1">
 <title>Programvalg</title>
 <graphic fileref="SuSE_80_17.&magic;" scale="60"></graphic>
</figure>
 
<para>
  Når pakkerne installeres vises forskellige reklamer for det produkt
  du allerede har købt. Lidt for kish efter min smag, men der er dog
  en adgang til at slå over på en skærm, der med grafik viser hvor
  langt man er nået i forløbet. Herover vises installationen fra
  CD'erne.
</para>
 
<para>
  Når alt dette er på plads skrives en ny boot-sektor og din maskine
  bliver genstartet med den nyinstallerede Linux.
</para>
 
<para>
  Du skal inden den videre installation give root en adgangskode,
  ligesom SuSE ret fornuftigt insisterer på, at der oprettes mindst en
  almindelig bruger.Du får også mulighed for at vælge, om Linux skal
  startes i grafisk eller tekst mode. Er du begynder så vælg den
  grafiske (standard) - det er trods alt lettere at starte der, end at
  skulle finde rundt i diverse konfigurationsfiler. Den eneste
  betingelse er, at installationsprogrammet kunne finde dit skærmkort
  og skærm. Sker dette ikke, så vælg hellere at starte i tekst mode,
  indtil du har fået løst problemet.
</para>
 </sect1>

 <sect2  ID="Mangler-suse80">
<Title>Mangler og Nyheder i SuSE 8.0</title>
 
<para>
  Som inkarneret SuSE bruger savner jeg først og fremmest Yast - den
  tekstbaserede udgave som gav mig en langt hurtigere og lettere
  adgang til småjusteringer end Yast2. I den grafiske udgave er Yast2
  blevet forbedret - den tekstbaserede Ysat2 er efter min bedste
  mening et misfoster som SuSE aldrig burde have vist frem for
  verden. Hårde ord, men et tekstbaseret program skal altså følge
  andre spilleregler end et grafisk, og ikke være en plat efterligning
  med samme struktur og opbygning.  Det er mit hede ønske, at SuSE i
  næste version dumper Yast2 i tekstversionen helt, og i stedet får
  opdateret Yast(1), så det program kan håndtere systemet.
</para>
 
<para>
  Tag nu ikke fejl. Yast2 er i sin grafiske udgave et meget stærkt og
  effektivt værktøj, som man kan have meget glæde af. Forudsætningen
  er altså blot lige, at man har installeret X på sin maskine, noget
  der jo langt fra er givet, hvis den skal bruges som server. Har man
  X, er det muligt direkte at starte de enkelte moduler i Yast2, så
  man slipper for omvejen over kontrolcenteret. Ganske nyttigt.
</para>
 
<para>
  SuSE har taget Zope til sig. Med vanlig omhu fra SuSE's side får man
  ikke alene programmet installeret, det er faktisk konfigureret og de
  nødvendige opsætninger til brug for Apache er på plads. Skulle du
  (som jeg) vælge helt at stryge Apache, skal du blot finde filen
  /etc/sysconfig/zope (du skal her være root), og i den rette "8080"
  til "80" og "8021" til "21", så overtager Zope helt opgaven med at
  køre din hjemmeside og FTP-server. Kom i gang med at administrere
  den ved at åbne en browser med http://1.2.3.4/manage (brug din egen
  servers IP-nummer i stedet for 1.2.3.4).  
</para>
 
<para>
  Med i Yast2 er også en endog meget let adgang til at konfigurere en brandvægg (ikke oversat til dansk).
  Klik på de områder, der skal gives adgang til, og du er sikret.
</para>
 
<para>
  Der er det lidt specielle problem, at SuSE 8.0 ikke kan installeres
  under VMWare. Angiveligt skyldes dette en fejl i VMWare - noget med
  manglende evne til at håndtere hukommelsen i forbindelse med
  skærmen. Fejlen dukker op ved første forsøg på at boote systemet, så
  installationsarbejdet viser sig at være forgæves.  </para>
 
<para>
  Oversættelse af EDB-programmer til Dansk er og bliver en pine. Skal
  et engelsk udtryk fordanskes, oversættes til et modsvarende dansk
  udtryk eller måske helt erstattes af et nyopfundet ord. Det sidste
  er sjældent en farbar vej, og ord som "opstartsindlæser" og
  "kørselsniveau værktøj" falder mig for brystet. Der er langt færre
  af den slags finurligheder i Yast2 nu, end der var i den tidligere
  version, så mon ikke tidens tand ret hurtigt vil få bugt med de
  sidste skæverter. Roses skal det efter min mening, at der i langt
  højere grad er anvendt ord som "tidszone" (ikke urområde) og
  "tastaturlayout" (ikke knapudlægning). Konstruerede ord har det let
  med at tale ned til læseren, a'la "vi vil sandelig ikke forlange af
  dig, at du lærer de nødvendige fagudtryk, her er lidt fra
  børnehaven!"  Også de løbende sidetekster der ses i Yast2 er kommet
  på plads, mens der endnu kan dukke engelske fejlmeldinger op, hvis
  noget går galt. Eftersom disse fejlmedinger sikkert kommer fra
  programmer, der ikke er oversat til dansk, er det jo næppe noget,
  der kan gøres noget ved.  
</para> 
</sect2> 

<sect1 id="om-LVM">
<title>LVM - Logical Volume Management</title>
<indexterm><primary>LVM</primary></indexterm>
<indexterm><primary>Logical Volume Management</primary></indexterm>

<para>
LVM arbejder med hele, primære partitioner. Det vil ikke være
misvisende, hvis du forestiller dig LVM på samme måde som sekundære
partitioner på en harddisk. En sekundær partition er ganske enkelt en
opdeling af en primær partition, og på samme måde giver LVM adgang til
at opdele en primær partition i flere områder.
</para>

<para>
For at vise forløbet, har jeg sat en virtuel VMware-maskine op med 2
harddiske, hdb og hdc (virtuelle drev på hver 2 Gb max), mens hda er en
selvstændig partition på ca. 4 Gb.
</para>

<figure  id="Yast2-LVM-3-fig" float="1">
<title>YaST2</title>
<graphic fileref="Yast2_LVM_3.&magic;"  scale="60"></graphic>
</figure>


</sect2>

<sect2 id="lvm-expert">
<title>Bliv "expert" på få minutter.</title>

<para>
Det er en smule misvisende, at LVM er dømt "for experts", det er
faktisk ganske let og ligetil at bruge det, ikke mindst takket være
YaST2. Ideen bag LVM er i al sin enkelthed, at man opretter en gruppe,
som indeholder eksisterende drev eller (primære) partitioner. Gruppen
fremtræder derefter overfor Linux som én stor harddisk, der kan
partitioneres efter behov.
</para>

<para>
De tre harddiske i eksemplet herover rummer til sammen 8 Gb, men det er
alligevel ikke muligt at oprette en partition på 5 Gb uden brug af LVM
(eller for den sags skyld to på 3 Gb hver).
</para>

<para> 
Desværre tillader Linux endnu ikke, at <filename>/</filename>
bliver placeret på en LVM-partition, men til gengæld kan man senere
ændre på størrelsen af de enkelte partitioner, når det viser sig, at
man ikke har plads nok.  
</para>

<para>
Et helt andet problem er rækkefølgen man skal gøre tingene i. Man kan
ikke bruge en LVM-partition før den er sat sammen i en gruppe, og man
kan derfor heller ikke blot køre lige igennem, men må have sat sin LVM
sammen først, vende tilbage til tidligere i forløbet, og få den
partitioneret.  Det er naturligvis lidt ekspert-agtigt, men altså til
at komme igennem.  Det ville være en fordel, hvis YaST2 ikke blot tog
LVM-delen efter partitioneringsdelen, men gav adgang via en knap til
at oprette en LVM-partition. Det er forhåbentlig noget der kommer i en
fremtidig version.
</para>


<figure  id="Yast2-LVM-4-fig" float="1">
<title>Der oprettes partitioner</title>
<graphic fileref="Yast2_LVM_4.&magic;"  scale="60"></graphic>
</figure>

<para>
På maskinen her er det ønsket, at der på hda skal være <filename>/boot</filename>, <filename>/</filename> og swap, mens hdb og hdc skal
indgå  i  LVM-gruppen. Partitioneringen af hda er ikke vist, mens oprettelsen af en partition
til brug for LVM er vist herover. Bemærk, at man ikke kan andet end at bestemme størrelsen og
reservere den til LVM-brug ved at give den type 89.
</para>

<figure  id="Yast2-LVM-5-fig" float="1">
<title>De oprettede partitioner</title>
<graphic fileref="Yast2_LVM_5.&magic;"  scale="60"></graphic>
</figure>

<para> 
Herover ses resultatet af den endelige
partitionering. <filename>/boot</filename> skal helst være over 12 Mb
(der advares hvis den er mindre), swap har jeg ikke meget at bruge til
og <filename>/</filename> (root) får så resten af hda.  Der er valgt
ext2 til <filename>/boot</filename> og ReiserFS til
<filename>/</filename>. Det sidste er også noget forholdsvis nyt, SuSE
7.0 frarådede at lægge <filename>/</filename> ud med ReiserFS, mens
7.2 ikke antyder, at det skule give problemer, hvilket det da heller
ikke endnu har gjort for mig.
</para>

<para>
Her er det så, at konflikten opstår. Man kan ikke benytte
LVM-partitionerne direkte. De skal først ind i en gruppe, og man kan
derfor heller ikke oprette partitioner til /home, /usr osv.  på dem
endnu.
</para>

<para>
Et klik på knappen [Næste] starter LVM-delen.
</para>

<figure  id="Yast2-LVM-6-fig" float="1">
<title>Opret en Virtuel Gruppe</title>
<graphic fileref="Yast2_LVM_6.&magic;"  scale="60"></graphic>
</figure>



<para>
Gruppen skal have et navn. Dette navn indgår senere i "drev"
betegnelsen (<filename>/dev/gruppenavn/</filename>), så jeg vil
anbefale at det gøres kort. "vg" synes at være et fornuftigt valg af
betegnelse.  Jeg har ikke planer om at oprette flere grupper, men på
større systemer med flere maskiner kan det måske give mening at udvide
navnet lidt.
</para>

<figure  id="Yast2-LVM-7-fig" float="1">
<title>Drevene aktiveres</title>
<graphic fileref="Yast2_LVM_7.&magic;"  scale="60"></graphic>
</figure>


<para>
Når gruppen er oprettet får man mulighed for at tilknytte de af ens
partitioner, der er af typen LVM (89). Herover er hdb1 tilknyttet mens
hdc1 er på vej til at blive det. Det er hele partitionen der
tilknyttes gruppen, og det er som tidligere nævnt kun de primære
partitioner, der overhovedet kan tilknyttes.
</para>

<figure  id="Yast2-LVM-8-fig" float="1">
<title>Partitioneringen af LVM-gruppen</title>
<graphic fileref="Yast2_LVM_8.&magic;"  scale="60"></graphic>
</figure>

<para>
Når gruppen er dannet og de enkelte partitioner er tilknyttet skal der
partitioneres. Hver partition får sit eget navn, som den herefter
optræder under (i stil med <filename>/dev/hda1</filename> og
<filename>/dev/hda2</filename>).  Det giver fin mulighed for at give
meningsfyldte navne. Når der skal oprettes en partition til /home kan
den passende komme til at hedde vg_home. Fordelen ved dette viser sig
i næste skærm, hvor jeg er vendt tilbage i forløbet til skærmen, hvor
der partitioneres.  
</para>

<figure  id="Yast2-LVM-9-fig" float="1">
<title>YaST2</title>
<graphic fileref="Yast2_LVM_9.&magic;"  scale="60"></graphic>
</figure>

<para> 
Her et det nemt og hurtigt at koble <filename>/home</filename>
og <filename>/dev/vg/vg_home</filename> sammen (altså at mounte
<filename>/dev/vg/vg_home</filename> som
<filename>/home</filename>). Specielt hvis noget går galt, har man via
navnet en mulighed for at redde hvad reddes skal (f.eks.
<filename>/home</filename>), ved ikke at reformatere partitionen, men
blot bestemme, at den igen skal mountes under /home.  
</para>

<figure  id="Yast2-LVM-10-fig" float="1">
<title>YaST2</title>
<graphic fileref="Yast2_LVM_10.&magic;"  scale="60"></graphic>
</figure>



<para>
Indtil dette tidspunkt er det muligt at gå tilbage og ændre
partitionsstørrelserne på LVM-partitionerne.  Når først de er
formaterede og fyldt med rare ting og sager skal der lidt mere til for
at ændre dem, men det emne falder uden for denne tekst.
</para>

<para>
Resten af installationen forløber som tidligere beskrevet, og er derfor ikke omtalt igen her.
</para>
</sect2>
</sect1>

</chapter>
