<!-- $Id$ -->
<chapter id="installation-af-linux">
<title>Linux-installation</title>
<indexterm><primary>Installation</primary></indexterm>
<para>
I dette kapitel vises, hvordan du installerer Red Hat 7.2 (version 6.0
til 7.1 er næsten ens), Mandrake 8.0 (version 7.2) og SuSE
6.3-7.2.  Først er vist, hvordan Red Hat
installeres og dernæst Mandrake og SuSE - Alle er gode
distributioner og omtrent lige nemme. 
</para>

<para>
Vi antager i dette kapitel at du arbejder med en pc, men Linux kører
også på andre maskintyper - og typisk skal der gøres lidt mere
arbejde for at få alt til at køre, men det kan ofte lade sig gøre. Du
kan få mere information i <xref linkend="Linux-paa-andre-platforme">.
</para>

<!-- Køb af Linux-maskiner som er præ-installerede? -->

<para> 
Der er i det følgende skrevet mest om Red Hat, men det er
faktisk kun fordi SuSE-brugere også kan have glæde af at læse de
mange generelle kommentarer, som i øjeblikket er skrevet under Red Hat
installationen. SuSE og Mandrake har pt. et forspring i at have
integreret <glossterm linkend="def-reiserfs">ReiserFS</glossterm> i
deres system, hvilket er virkelig smart for servere, hvor man hurtigt
skal kunne komme op efter en strømafbrydelse eller lignende.  Red Hat
satser ikke på ReiserFS, men på et kommende alternativ. 
</para>

<para>
En anden distribution, som kan have din interesse, er <ulink
url="http://www.debian.org/">Debian</ulink>, som ikke bør være den
første, du starter med, men det er måske den, du ender med.
</para>

<para>
Har du en UDMA 66-maskine så skal din Linux-distribution tidligst være
fra sommeren 2000.  Hjælp kan læses på <ulink
url="http://www.csie.ntu.edu.tw/~b6506063/hpt366/">http://www.csie.ntu.edu.tw/~b6506063/hpt366/</ulink>.
Der er erfaringer med at nyeste Mandrake selv finder UDMA controller.
For at få f.eks. Red Hat 7.0 og senere til at finde din UDMA
controller, så skal du i Windows9x under "device manager" finde
adressen på den første (Primary) Master controller. Denne adresse skal
du give til LILO som en ekstra opstartsparameter:
</para>

<screen>
linux ide2=0x[address]
</screen>

<para>
Senere kan du indsætte denne i <filename>/etc/lilo.conf</filename> så
din controller genkendes.
</para>

<para>
Endelig kan det nævnes, at du også kan installere Linux via netværk,
f.eks. via ftp. Har du problemer med at dit cd-rom-drev ikke er
understøttet af Linux, så læs i <xref linkend="ftp-inst">, hvordan du
kan komme videre.
</para>



<sect1 id="forberedelse">
<title>Forberedelse til installation af Linux</title>

<para>
Installation er den del af Linux, som mange mener er mest besværlig.
En del folk har gennem tiderne prøvet et par gange, før det hele
spiller. Fortvivl ikke, gå bare i gang. Har du tekniske problemer, er
der sikkert hjælp at hente i din nærmeste Linux-brugergruppe. Dette
kan du se mere om i <xref linkend="videre-paa-web">.
</para>


<sect2 id="maskinelinux">
<title>Kan min maskine bruges til Linux?</title>
<para>
Før du tænker på at installere, er det <emphasis>meget
klogt</emphasis>, at du undersøger, om din hardware er understøttet i
Linux.  Du kan f.eks. i Windows bruge lidt tid under dit
<command>kontrolpanel</command>-&gt;<command>system</command> og
skrive ned, hvilke typer hardware-enheder du har på systemet og hvilke
adresser, der bruges til netkort, grafikkort, lydkort og andet. Har du
dette klar, bliver det nemmere at komme igennem installationen.
</para>

<para>
Hvis du har aktiveret virusbeskyttelse i din 
<glossterm linkend="def-BIOS">BIOS</glossterm> er det nødvendigt
at slå dette fra mens du installerer Linux. Ellers kan Linux'
opstartsprogram, LILO, 
ikke skrive i MBR (master boot record). Se desuden 
"Linux - Friheden til at lære Unix".
</para>

<para>
Generelt kan det være svært at få grafikkort, der er nyere end den
Linux-distribution, man bruger, til at virke optimalt. Bærbare
computere kan også være besværlige at installere, men ellers kan langt
de fleste maskiner køre Linux med fuld udnyttelse af grafikkortet.
</para>

<sect3 id="kan-jeg-koere-linux">

<title>Kan min maskine anvendes til Linux?</title>

<itemizedlist mark="bullet" spacing="compact">

<listitem><para>
<ulink url="http://cdb.suse.de/cgi-bin/scdb?HTML=ENGLISH/cdb_listtemplates/menu.htm&amp;LANG=ENGLISH">http://cdb.suse.de/cgi-bin/scdb?HTML=ENGLISH/cdb_listtemplates/menu.htm&amp;LANG=ENGLISH</ulink>
- SuSE hardware kompatibilitets-database (kan i langt de fleste
tilfælde også dække Red Hat).
</para></listitem>


<listitem><para><ulink
url="http://hardware.redhat.com">http://hardware.redhat.com</ulink>
- Red Hat hardware kompatibilitets-database.
</para></listitem>

<listitem><para><ulink url="http://www.xfree86.org">http://www.xfree86.org</ulink>
- Oversigt over, hvilke grafikkort der er understøttet af grafik til Linux.
</para></listitem>

<listitem><para><ulink url="http://lhd.datapower.com/">http://lhd.datapower.com/</ulink> - Database med hardware, der virker med Linux.
</para></listitem>

<indexterm><primary>laptop og Linux</primary></indexterm>
<listitem><para>
<ulink url="http://www.linux-on-laptops.com/">http://www.linux-on-laptops.com/</ulink>
og <ulink url="http://www.linux.org/hardware/laptop.html">http://www.linux.org/hardware/laptop.html/</ulink>
- Skal du installere Linux på en bærbar pc, så se altid disse steder.
</para></listitem>
</itemizedlist>
</sect3>
</sect2>

<sect2 id="klargoer">
<title>Gør din pc klar og lav sikkerhedskopi</title>

<para>
Har du en anden harddisk, som kan bruges til at lægge Linux ind på -
f.eks. en gammel 800 Mb eller måske 2 Gb disk, så brug denne, 
for det er en del nemmere end at skulle repartitionere harddisken.
</para>

<para>
Hvis du starter med en Windows 95/98-maskine og skal have Linux
installeret på den samme harddisk som Windows, skal du have delt
harddisken op i to dele - en til hvert styresystem. Kan du lægge Linux
først undgår du problemer med bootloaderen LILO (i Red Hat 7.1 og
tidligere) som ikke kan adressere start af Linux-partitionen senere
end cylinder 1024. Med de store harddiske som man køber i dag er dette
et problem. I Mandrake 8.0 er problemet heldigvis væk.
</para>

<para>
Har du Windows 2000 fyldt op på harddisken og kun én harddisk, så kan
du få problemer med at lave nye partitioner til
Linux hvis Windows 2000 bruger NTFS-filsystemet. Nyere
Linux-distributioner - f.eks. Mandrake 7.2 - har et fint
repartitioneringsprogram, som kan håndtere Windows 2000.
<indexterm><primary>Windows 2000</primary></indexterm>
<indexterm><primary>Partitionering</primary><secondary>Windows 2000</secondary></indexterm>
</para>

<para>
<emphasis>Tip:</emphasis> Hvis du selv installerer Windows, så 
vælg at installere det på en FAT-formateret harddisk og undgå
NTFS-filsystemet. På den måde kan filer kopieres direkte fra
Linux til Windows. Og du kan altid gøre Windows-partitionen
mindre med DOS/Windows-programmet Fips. (Se <xref linkend="opdelharddisk">)
</para>

<para>
I Windows er det klogt at køre en fejlsøgning på disken og derefter en
defragmentering. Dette finder du under egenskaber for disken under
"Denne computer" (Windows på dansk). Evt. kan du skanne efter dårlige
sektorer under DOS med ScanDisk. Finder du fejl på disken nu, er
det måske tegn på, at du hellere bør købe en ny harddisk til Linux.
</para>

<para>
Før du går videre, vil det være en god idé at udskrive alle systemoplysninger
om computeren for at lette installation og
evt. fejlfinding. Det gøres ved at gå ind i "Denne computer" og
derefter trykke på Kontrolpanel. Dobbeltklik på System og vælg
fanebladet "Enhedshåndtering". I bunden af vinduet vælges Udskriv. Det
kan anbefales at udskrive samtlige systemoplysninger.
</para>

<FIGURE ID="windowsinfo-fig" FLOAT="1">
<TITLE>Windows systeminformation</TITLE>
<GRAPHIC FILEREF="windowsinfo.&magic;"  SCALE="60"></GRAPHIC>
</FIGURE>

<para>
Det er nu, du bør tage en sikkerhedskopi af de vigtige data
på din disk. Det bør ikke gå galt, hvis du læser videre og går
forsigtigt frem. Fik vi nævnt, at du bør tage sikkerhedskopi ? :-)
</para>

<para>
<emphasis>Tip:</emphasis> Du skal bruge en diskette til installationen.
På et tidspunkt bliver du spurgt om du vil lave en bootdiskette.
Erfaringen siger at det godt kan betale sig at formatere en diskette
i forvejen med check for dårlige sektorer. 
Er disketten i stykker, så kan man erfaringsmæssigt blive noget sur den 
dag man skal bruge disketten :-)
</para>


</sect2>

<sect2 id="fdiskintro">
<title>Hvad skal der ske?</title>
<para>
Kort fortalt: Før du installerer Linux, skal der være en partition til
rådighed, der er stor nok til at rumme det hele (samt en swap-partition).  Hvor
stor er et spørgsmål om, hvad du vil tage med i installationen - se de
følgende afsnit.  I løbet af Linux-installationen vil der blive
lejlighed til at repartitionere så meget, du har behov for, inden for
den plads, der nu er blevet til rådighed.
</para>

<para>
DOS/Windows (i det følgende kaldet DOS) har programmet
<command>fdisk.exe</command>. Linux har programmerne
<command>fdisk</command> og <command>disk-druid</command>.  Alle
programmerne er tilfredsstillende beskrevet i deres respektive
dokumentationer.
</para>

<para>
Hvis du har Windows installeret, og ønsker at bevare det efter at Linux er
blevet installeret, så kan du først køre
<command>fdisk.exe</command> i DOS <command>Start->Luk->Genstart DOS</command> (ikke i 
et DOS-vindue under Windows) til at slette en eller flere
eksisterende DOS/Windows-partitioner, så der er plads til Linux.
Linux installeres derefter bare ved siden af Windows på den fri partition.
</para>

<para>
Skulle det i løbet af anstrengelserne blive nødvendigt at fjerne en
mislykket Linux-installation fra harddisken og begynde forfra med DOS,
vil du få brug for at have en opstartsdiskette til DOS, som blandt andet skal
indeholde DOS <command>fdisk.exe</command>.  Fdisk kan køre med en
(udokumenteret) option <command>fdisk /mbr</command>, som kan fjerne
de registreringer, Linux måtte have lagt i diskens master boot record
(det vil vi minde dig om et par gange).
</para>

<para>
Du kan måske være interesseret i at læse denne vejledning i
repartitionering af harddisken: 
<ulink url="http://www.redhat.com/support/manuals/RHL-6.2-Manual/ref-guide/ch-partitions.html">http://www.redhat.com/support/manuals/RHL-6.2-Manual/ref-guide/ch-partitions.html</ulink>.
</para>

</sect2>


<sect2 id="opdelharddisk">
<title>Opdele en DOS/Windows-harddisk til Linux</title>
<para>
<indexterm><primary>Opdeling af harddisk</primary></indexterm>
<indexterm><primary>fips</primary></indexterm>
Harddisken skal nu deles mellem Linux og Windows. Det gøres ved, at
du indsætter din Linux-cd-rom og finder DOS-programmet
<command>fips.exe</command>, som du skal starte under DOS - IKKE under
Windows eller OS/2. Læs i øvrigt dokumentationen til Fips!  Har du to
versioner af <command>fips.exe</command>, så brug den nyeste (fips20).
</para>

<para>
Programmet <command>fips</command> vil vise dig, at du har én
partition med Windows (det er det mest normale). Tryk Enter for at
komme til næste skærmbillede. Lav gerne en sikkerhedskopi til en formateret
diskette ved at trykke <command>y</command> (for yes) to gange.
</para>

<para>
Nu vil Fips foreslå, at dele disken i to partitioner,
så du skal nu til at vurdere, hvor meget plads du vil bruge på hver af
de to styresystemer. Brug venstre og højre pil til at ændre fordelingen,
hvor 'Old partition' er størrelsen på din Windows-partition. Husk, at du
bør lave noget fri plads til udvidelse af Windows-programmer,
selvom du nok senere hen vil mene, at du hellere vil have pladsen
under Linux. Det er dit valg. Tryk derefter <command>c</command>
for continue, og derefter genstartes maskinen med mindre plads under
Windows. Din ekstra DOS-partition skal senere slettes for at give
plads til mindst én Linux-partition og en Linux swap-partition.
</para>

<para>
Vi kan lige nævne, at hvis du har en Windows 95 installeret, som er fra
før 1996 (final beta release), så er der set problemer (for Windows 95), hvis
Linux installeres på "extended partitions". Problemet
eksisterer ikke med officielt udgivne Windows-versioner - det er kun
final beta og tidligere, der har problemer.
</para>
</sect2>
</sect1>

<sect1 id="disklayout">
<title>Disk-partitioner</title>
<para>
Du er temmelig frit stillet med hensyn til antallet og størrelsen af
partitionerne. Hvis du kører uden swap-partition, kan du simpelthen
installere alt på en enkelt root-partition 
(<filename>/</filename>). Mange bruger fire
eller fem partitioner. Denne fordeling er ret udbredt og efter vor mening også
både fornuftig og fleksibel:

<itemizedlist mark="bullet" spacing="compact">

<listitem>
<para>
<indexterm><primary>Swap</primary></indexterm>
en swap-partition. Størrelsen kan diskuteres i det uendelige og
afhænger meget af, hvad du har tænkt dig at bruge systemet til. Et
eller andet sted mellem 16 Mb og 127 Mb. En tommelfingerregel siger,
at swap-partitionens størrelse skal være det dobbelte af den fysiske
hukommelse.  Har du 32 Mb RAM og derover, kan du måske nøjes med en
swap-størrelse, som svarer til RAM-størrelsen. Et råd til dig er, at
normal anvendelse af Linux ikke kræver over 64 Mb, dvs. summen af
fysisk hukommelse plus swap.  Du kan dog lave mange swap-partitioner,
hvis du vil, og de kan laves på et senere tidspunkt, evt. bundet til en
stor swapfil, som det kendes fra Windows. Du skal bemærke, at
swap-partitioner ikke placeres i filtræet. Man kan således ikke gå et
bestemt sted hen og se swap-indholdet, men det er blot mere hukommelse
for systemet (du kan med kommandoen <command>free</command> senere se,
hvordan hukommelsen anvendes).
</para>
</listitem>

<listitem><para>en partition på 20 Mb til <filename>/boot</filename>,
som lægges før cylinder 1024 på disken.  Ældre BIOS-typer har en fejl,
som gør dette nødvendigt.  Denne partition bør du kun lave, hvis du
vil køre LILO - læs mere i "Linux - Friheden til at lære Unix".
</para></listitem>

<listitem><para>en partition på 300-500 Mb til rodkataloget,
dvs. <filename>/</filename>, men installerer du SuSE, skal du dertil
lægge plads til <filename>/opt</filename>, som kan indeholde
yderligere 200 Mb, hvis du installerer KDE og StarOffice. Med Red Hat
installeres disse programmer under
<filename>/usr</filename>.</para></listitem>

<listitem><para>en partition på 300 Mb til 1 Gb til
<filename>/usr</filename></para></listitem>



<listitem><para>en partition til <filename>/home</filename>,
størrelse afhængig af antal brugere og deres behov.</para></listitem>

</itemizedlist>
Installerer du alle pakker som custom, skal du regne med at bruge
mindst 1 Gb.
</para>

<para>
Harddisknummerering i Windows og Linux er forskellig.  I Linux kaldes
alle systemenheder - som f.eks. harddiske - for enheder (eng. devices) og har
fortløbende bogstavnavne. De ligger alle i kataloget
<filename>/dev</filename>
</para>
<indexterm><primary>IDE diske</primary></indexterm>
<indexterm><primary>SCSI diske</primary></indexterm>

<para>
Første IDE-disk  = <filename>/dev/hda</filename>
</para>
<para>
Anden IDE-disk  = <filename>/dev/hdb</filename>
</para>
<para>
Tredje IDE-disk = <filename>/dev/hdc</filename>
</para>
<para>
Fjerde IDE-disk = <filename>/dev/hdd</filename>
</para>
<para>
Første SCSI-disk = <filename>/dev/sda</filename> osv.
</para>

<para>
Partitioner på en disk har numre svarende til disken, f.eks. er
<filename>/dev/hda2</filename> den anden partition på den første IDE-disk.
</para>

</sect1>

<sect1 id="kort-om-filsystemet">
<title>Kort information om filsystemet i Linux</title>
<para>
Et par store forskelle mellem filsystemet i Linux og f.eks. Windows 
</para>

<itemizedlist mark="bullet">
<listitem>
 <para>
I Linux betyder store og små bogstaver forskelligt - dvs. filerne
<filename>hej.html</filename> og <filename>HEJ.html</filename> er
to forskellige filer.
 </para>
</listitem>

<listitem> 
 <para>
I Linux arbejder du ud fra et filtræ, som det kendes fra Windows og
DOS. I Windows kan du have flere drev
f.eks. <filename>C:\</filename>, <filename>D:\</filename> og
<filename>E:\</filename> svarende til to harddisk-partitioner og et
cd-rom-drev. I Linux findes der ikke drev, men kun et filtræ der
starter i roden <filename>/</filename>, og her kan du oprette
kataloger, der svarer til harddisk-partitioner,
f.eks. <filename>/cdrev</filename> kunne svare til
<filename>C:\</filename> mens <filename>/cdrom</filename> kunne svare
til <filename>E:\</filename>. 
 </para>
</listitem>

<listitem> 
 <para>
I Windows adskiller man kataloger og filnavne med baglæns skåstreg
(eng: backslash) og her anvender Linux ligesom UNIX-familien forlæns
skråstreg (eng: slash). Dvs. der findes i Linux en fil
<filename>/usr/bin/ls</filename>, når filen <filename>ls</filename>
ligger i kataloget <filename>/usr/bin</filename>. 
 </para>
</listitem>

<listitem> 
 <para>
Harddiske på en Linux-formatteret disk hedder
<filename>/dev/hda</filename> for den første harddisk på systemet
(primær disk - første IDE controller), Tilsvarende hedder de næste 
harddiske <filename>/dev/hdb</filename>, <filename>/dev/hdc</filename> og
<filename>/dev/hdd</filename>. SCSI-enheder starter tilsvarende fra
<filename>/dev/sda</filename>.
 </para>
</listitem>


<listitem> 
 <para>
Partitioner på en harddisk under Linux nummereres som ud fra
harddisk-nummer, så den første harddisk
(<filename>/dev/hda</filename>) har partitionerne
<filename>/dev/hda1</filename>, <filename>/dev/hda2</filename>
osv. svarende til den første partition, anden partition og så
fremdeles.
 </para>
</listitem>


<listitem> 
 <para>
Katalogerne i et UNIX-system såsom Linux er normalt som følger:
 </para>

<itemizedlist mark="bullet">
<listitem>
 <para>
 <filename>/bin/</filename> indeholder binære programmer til brugere og system.
 </para>
</listitem>
<listitem>
 <para>
<filename>/boot/</filename> indeholder opsætning af opstart af LILO hhv. GRUB boot-loaderen.
 </para>
</listitem>
<listitem> 
 <para>
<filename>/dev/</filename> indeholder en serie af meget specielle filer, som hver 
peger på en hardware-enhed (eng: device). Igennem disse enheder tilgås hardware.
 </para>
</listitem>

<listitem>
 <para>
<filename>/etc/</filename> indeholder opsætningsfiler for systemer - typisk
tekst-filer, som kun systemadministratoren "root" kan ændre.
 </para>
</listitem>

<listitem> 
 <para>
<filename>/home/</filename> indeholder underkataloger for hver af brugerne, så brugeren 
"anne" har hjemmekatalog <filename>/home/anne</filename> osv.
 </para>
</listitem>


<listitem>
 <para>
<filename>/lib/</filename> biblioker (eng: libraries) for grafik, lister, og alt
det som skal til at drive systemet.
 </para>
</listitem>
<listitem>
 <para>
<filename>/mnt/</filename> her monterer man typisk ikke-stationære enheder ind, såsom
cdrom, floppy-drev og tilsvarende.
 </para>
</listitem>
<listitem>
 <para>
<filename>/proc/</filename> er et virtuelt filsystem (lever i RAM),
som indeholder indeholder en masse information om alle de processer,
der kører samt alle de hardware-enheder systemer kommunikerer med. Dette
er beskrevet i bogen "Linux - Friheden til systemadministration".
 </para>
</listitem>
<listitem>
 <para>
<filename>/sbin/</filename> indeholder binære system-programmer, som brugeren
ikke skal køre.
 </para>
</listitem>
<listitem> 
 <para>
<filename>/usr/</filename> indeholder programmer (<filename>/usr/bin/</filename>), 
biblioteker (<filename>/usr/lib/</filename>) og 
delte filer (<filename>/usr/share/</filename>) som bruger-programmer anvender.
 </para>
</listitem>




<listitem> 
 <para>
<filename>/root/</filename> er hjemmekataloget for systemadministratoren (root).
 </para>
</listitem>

<listitem> 
 <para>
<filename>/tmp/</filename> er skrivbart for alle, og her kan man gemme 
midlertidige filer. Ofte bliver disse filer slettet ved system-opstart eller
nedlukning af maskinen.
 </para>
</listitem>

<listitem> 
 <para>
<filename>/var/</filename> er til filer som ændrer sig over tiden f.eks. logfiler.
 </para>
</listitem>


</itemizedlist>


</listitem>

</itemizedlist>


<para>
I Windows ligger systemet ofte i <filename>c:\windows</filename> og
der er en række faste kataloger i dette katalog, hvor man kan lægge
skrifttyper, hjælpefiler, menuer og andet. På samme måde er navnet på
katalogerne i roden af et Linux-styresystem helt faste.  Brugere
har kun adgang til at oprette kataloger i deres hjemmekatalog, der
normalt findes i <filename>/home/mitbrugernavn</filename>, på den måde
undgår man at brugere piller ved operativsystemet og andre brugeres
filer - det har kun administratoren lov til at gøre. Administratoren
(root) har hjemmekatalog i <filename>/root</filename>..
</para>

<para>
<emphasis>Tip:</emphasis> Du kan efter installationen med <command>man
7 hier</command> læse mere om filtræet.
</para>

<para>
Der er mange andre dele man kunne gå nærmere ind på.
FHS er beskrevet på i Filesystem Hierarchy Standard 
<ulink url="http://www.pathname.com/fhs/">http://www.pathname.com/fhs/</ulink>
og Red Hat's udførelse er beskrevet i 
<ulink url="http://www.redhat.com/docs/manuals/linux/RHL-7.3-Manual/ref-guide/s1-filesystem-fhs.html">http://www.redhat.com/docs/manuals/linux/RHL-7.3-Manual/ref-guide/s1-filesystem-fhs.html</ulink>.
</para>


</sect1>
</chapter>







